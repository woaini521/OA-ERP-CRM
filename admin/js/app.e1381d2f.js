(function(e){function t(t){for(var i,o,l=t[0],n=t[1],c=t[2],d=0,p=[];d<l.length;d++)o=l[d],r[o]&&p.push(r[o][0]),r[o]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],i=!0,o=1;o<a.length;o++){var n=a[o];0!==r[n]&&(i=!1)}i&&(s.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},r={app:0},s=[];function o(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-39257bb2":"d3b64fb7"}[e]+".js"}function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a=r[e];if(0!==a)if(a)t.push(a[2]);else{var i=new Promise(function(t,i){a=r[e]=[t,i]});t.push(a[2]=i);var s,n=document.createElement("script");n.charset="utf-8",n.timeout=120,l.nc&&n.setAttribute("nonce",l.nc),n.src=o(e),s=function(t){n.onerror=n.onload=null,clearTimeout(c);var a=r[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+i+": "+s+")");o.type=i,o.request=s,a[1](o)}r[e]=void 0}};var c=setTimeout(function(){s({type:"timeout",target:n})},12e4);n.onerror=n.onload=s,document.head.appendChild(n)}return Promise.all(t)},l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/admin/",l.oe=function(e){throw console.error(e),e};var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=t,n=n.slice();for(var d=0;d<n.length;d++)t(n[d]);var u=c;s.push([1,"chunk-vendors"]),a()})({0:function(e,t){},"0132":function(e,t,a){},"020e":function(e,t,a){},"04c9":function(e,t,a){},"0639":function(e,t,a){"use strict";var i=a("0fad"),r=a.n(i);r.a},"099b":function(e,t,a){"use strict";var i=a("496d"),r=a.n(i);r.a},"0a08":function(e,t,a){},"0c7f":function(e,t,a){},"0e67":function(e,t,a){"use strict";var i=a("c8f0"),r=a.n(i);r.a},"0e73":function(e,t,a){},"0fad":function(e,t,a){},1:function(e,t,a){e.exports=a("56d7")},"11e4":function(e,t,a){"use strict";var i=a("9c19"),r=a.n(i);r.a},"12cf":function(e,t,a){},"13fd":function(e,t,a){},1573:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAARKSURBVDhPVVTbb5NlHO5/4ZVXiyMDo+PCQKJA3BjbaNd2p647sAmoGBIS57Y6JWpMvDCZRsCEeLpgU3Es29oBYkzgyhtMAOMYZex8Klm7r4fvfP4en6/jAr/k7dvD2+f3HH6/N4Bnj+u6gOm/s7Ak2Ph+vYhLgoRLORkXswIuZiT8lDbxY9rA1b90ZEseTEeB6xhwPA9eGQUIuJ4LzxL5g4N7qy6OFNexR5lHVWke+4oPuZ5g/+Y6mpISolMSItMqopMKWm7IOH1bguuZsB2NhHYhCehBIbtbCyJelZawJ/sQe4U09uWXsVdaxKH5TYSSJsKTEsJJhaAaoikZzSkFx/m5944Iz9MJaMJzHQI6lEr0amUVL+ef4KXCY1SRVXX+EWr+2cbbSRXxiQLi0xpifB9NlRCeVhBJaSykInRTw3tjKizLt80mINkNk8Ur+UVUCYuoEB9T5iJCv2dw9poE0/YL6hTj4u62i74/LcqW0JyU0cA9/q2C2EcSCjs84lCyRYaV2TWymqfUR6iUl/HWzBZOXCvBMnToZG+yqGGZsGjPquWh/YZB+TJOfl5A17CGjiERl8clqI6KgMkwKkr3USmuobI4h55JHpqUWY7JuaXd/VmG/qtt2zjNYN5JCOgaIMMhGbFBESOjFlyqIaCLFymxIp9GJ1nVzxgITggwHAuqD0VWzz+++duCjM5P6G1CQicBOwYlfDVGQGIFDMp5oTiL9nETrUyy+aaOM3+4lGrBoTx21f8eh4VoAk6dlxAbIOiQRMkSRsZMMmTKvoeRX4voHGc7zLBaSofk96ZHh32RzxH02Tr8kz8AfUMuuoZUdA/K5f3CqF3uxYDNQwcnBQRTIiLXZdT9xiYnO9P22E0+PR90V7pDv/0lU9Xtv1X0DstlD7s+kPDNdzocfh8wWTF41UPrlI6mVBFHfslh9H4BWskkKEeLTD0e9NvLcWwoBkNJrOLyrSJ6Ezp9ZCjxLEa+zFAyGfqAtT/rCF4XEJnhSCU17irSGRdZm+TYsQ4nwGcNLtvSce6LPPqGdyhVQVt7Bs3127gwotEOi5IZdegHkY3MUJI62qYKOHpFxr9bwHLOwVpexYMNXhgFBVtFGyuCjit3VPR9KKIpuIBIwxZamjK490ClAvahL2Vh8ylayS7EC6CBo9X+WQEtZ3Uc6C3hcE8BoX4Nx94V8HrcwNEzO+h+HwiF0ojWb6KxLo3aN+bodBEmRQQceqS7BhrOKwhPGYh9XEA3TY4lCugZ4FgxxXhCLK82+tXdn0X4+AbC9RuINm7jWN1dTIw/xfrSJidJ2b2+DOhMUUYwrqP3Uw0nBh3E+ovoYYLxAX8X2R4i+s7xUmhcIbMVNNQsoqk+g69HZpHZ3EEulysHxwuW7UHTLU6AZRuYm7XRfMrAoYiMw60qatp11LZqeDOs4OD+LRyozuK16g2c7FhFrrBevrIc3jJ+W3meh/8Ansugw+g7m1AAAAAASUVORK5CYII="},"16b0":function(e,t,a){"use strict";var i=a("4bfc"),r=a.n(i);r.a},"17d0":function(e,t,a){},"1b71":function(e,t,a){"use strict";var i=a("12cf"),r=a.n(i);r.a},"1f9c":function(e,t,a){"use strict";var i=a("f67c"),r=a.n(i);r.a},2:function(e,t){},"21c0":function(e,t,a){"use strict";var i=a("b6f7"),r=a.n(i);r.a},"22d6":function(e,t,a){"use strict";var i=a("4c18"),r=a.n(i);r.a},"23ea":function(e,t,a){},"25d0":function(e,t,a){"use strict";var i=a("47a6"),r=a.n(i);r.a},2703:function(e,t,a){"use strict";var i=a("8c5c"),r=a.n(i);r.a},"2acb":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAR1SURBVDhPPZT5TxtXFIX5X6uqP6DS0ECgFDAQVapatQGCTUwMBi8ztsEYB2yWdAm0TZSqUoUqoW5qmiZNRSEBvMy8dU7PG6NaunrjWb5373nn3j5c/yKG1AJdYyCsBRdEysBqBW0YVsIazTB810BHEaQV0Crgc/c+7/Oe+8VQ98cyBD9q136Amd+BTFZhkyWITBH6vge1UoBe5XW+COXnoSoFdBsVdJ9+i8hBI0tOzOxBjdbQoUI4VMX5/AHs57sEb8GkCE5XoJc86GUfZtWHznEDj+B1H7JZhmz4COpbEKIdw12CfS5DqSX0aBWtwTLU3BG6s/uQd7ehkjXo1AZUmjBm68B6zYcqMmOfYEJFowS566O7vQlrexL0OY3M0e9Q75Whb5SBjw7Rmf8advFL2OWHkKu7XOuw2QokoTbjQRaZZT4PUy8jbJbQ2uO67UP8egLDcyBUQ46tQ77PMoZ84NYW1JM/eEAWYcQNKY3iwek3Vwi9Ojr5MqIspcg7GXJQ9QrETglhw0PQrEJR2z53lnKILwyzrPF1tJ+fQUtudPwi1llTmuivc+jnp7ymMzb3oPIb1JbgAuXwGVVKwEyDRhEhCKW0kLc8iA9KMJ/y1J2FrgKIiTqUjhBEEoH/FYLqIXSLGygBuVaGyZWgCx6MRznK1Jtgs1nisVPT2J+jBcgPufPeMbN0vqS9rELH0hUsPaQE4uUZVPkRxONjyJPfIB8eQZVqsRO0TyjdoDe8HtRyUWP03QQfpg+gBI3NDCU1NbSI5bV2m12248w7Tl+GktxYdJltFdojsEz5KnkWfw2V4znIyRzEzQyCqza7RMPww4gWgdP1l78RUGe79QSv35zFJ9zN7kBQijC8ohsoAw9Olzwir6FiYg0ykUMwmYW+mYZ5eQ4TsC3dxyxbdpkRN2pfXqJNSYxlJaf/xm1reHgqSyhtpikFe7MH1YSq6WWEiRUEiQzaj3+CuEMzlw4h9tm2r17DxLK4oCSECl67uRBehFAZ1xAFWDZEnKnrWT1SiyWwlEAmlhCOLaI9nUY4nuaGGeiPS2hftKipjiWRkcuW6xWdsfqAvnXlF2EpQdxRmg/F+AHkYBNqkD08kieYMMLtVAaKmYf8H4wtwTx9BvPiApYR/vwPun4TNpVDd8VjxxUhKIFgFX2G5ajsjxBDTZjBB9D97K7+Nc6C+9AzizBTi1AuJlKIhpMIBz6BffczdEZn6e8FhATqFXYUB43Ze0RncErFogu24mADZrgJObAJ08/J9DYzHrlH8AKhScjpFB2yAJtYjK/1ZBLt2wuQS9STYJkmXHRizTn66EMOZ3VyjpCZ2hs7PWg/p9BbqzDTc9BTd7k6OLO7PQc707unZijJPVaW4qx99id9rag5y3eT1XnSTffgtAU7VEcwsAHRz6n1DrtsmBaLoYyp+Xh1QJGYhbrDXk+z9LNzOoHDhxzLiDONFHXlRIrYok6O1qsL9vT3HBjfQeW+ga4dQG+52P8/xBecu2wUxa4TrvP4nZvNURThP/HWvfdxu2wxAAAAAElFTkSuQmCC"},3:function(e,t){},3302:function(e,t,a){"use strict";var i=a("5c50"),r=a.n(i);r.a},3547:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAASaSURBVDhPPZXpb1RVGMbnrzERmO6zdJ3O0Bmmi2CsmEI3KFAKhoQQl48aQ4h+MUESiEG60YVuLGqADwYTY/CDiMgSg0ZjTJRCC7Pcufeee7bH57bENqf3pnPv7zzv8z7vmYgxBuFSSkNoD4bXq8ribSNxQhkcVwrHfxZ4947Be3cs3uE6fjfA9wUNZRwIJQAVANYi/Il41kATqAk7RVhUK0QJ28IHolqg7geJhhsKDV8bNHylEfvSIHYlQGyF/7uscHM1gNQGVEWGQsQIn+oq6DcBaqRBjZaIElZtfNQ+CAiyiIWga1xXQ5hBfIXXZYvEEjeZ05j8Q8IPQk6AiNIWC1ahSmu8SvlV3K1GE/SIAKqqvyYJC0H6JUghsUjoJYOmBY3GWX5+UeBpIGmZQUQTspXqtm6oMqgjOPlLgIGbz5FjaVVUVrcsULvEDRYUGpe4Fgmnsvg8gdMWyUmFgx+WIKVApMQGRGFRZRS2EJy4HeDsQ42y8uitj+4r9HBRoWlJoumyRmqaz1BV40WLpkmDxHiA5OkAqT6fPvqIPFQSNcrHNp9+3PDRcrlCfwMoeunTkzurAi1zPm79rXD/iYPeZR/NMyybyhqoLDlukB92kBl8xkbTw3tGIP4Tu0nj41clmpcCWGMJ3OzaeqGM+imJbecUqs8orNCO2CTVfsH3xhUyJyrYMUjgniLrpIcP1tjV64TRp3pGITEj8JyqDeNkpETXYoDmaQKmimgbd7H9QgXRcx7iFzy0vu+iY8DB9qEy0n0h0CJyf10jsaLRsMzOsXsNswonv9UsV9HkAJ985yMxR5/G6RuVZc9XUE216VEHucESslTXMVBG5q3CS4XrVMUOJhYInKPJcxa1NPrxkxAqINis3ksuWiY8dHxeQecHPl4/LNA+XGCpxU1Yfwnp3QXOCRU+pMLkJUZhnkGdNUjOWMSpJHraxe9POV7SZWhdzF93cOs2s8a8/fqbj11HPGQHCgSWkNlL4JsvgY+eK7SGyghLTLBrU4RPamQ+VcgfdfB4XbB0ls+OK2ZUh95yGAqOh+59JXTsLbIhHlp61whklx+sh0lnaKfYmAmJ1FmN/DEH+bEAr41UkBly8eNfEpUgPEQUgRKS96ueh/SeF2gnML33BVKhhzwDIj58JCcE2i7Q+DMaOw956DlMw49ovDHiYsdICcndRXw0+wz3Vj38SQH31gQ6ehmnNvreCiRaODE5CeVxUnwvQGZGo+kzgV2jLrrHBHoOcUII7jroIk+VeYKz/Q6SfSW80iyxNQHEWgPE2ySSaU5Su4tT5z34tkwg0/1PxaLrKEsc9dEzSm82YCHIQeeBzWtupIjmTh/xZlrTpqhMIp4SiLVzoxytYHb5h4cDzzzD0+abxwG6RjR6xhzCHOw8oFluGZ37WPYwje+lNa1MRIoxSzMNLLeR97EdAuuOy6nSHD12efNwDUMs8W/FxdBJlr3fJdxDbn8Z2X0BskMK9a18ORV6xgay1NqUh2MfC3be3UjB/ye23ZhZfgWESoVlzgQ/29xN81wMn7Mb17DDivfhixxN/iqhEXCiBFf4NWKtxX9cSOqOV9jflgAAAABJRU5ErkJggg=="},"35c6":function(e,t,a){"use strict";var i=a("5701"),r=a.n(i);r.a},"38f3":function(e,t,a){},"398e":function(e,t,a){"use strict";var i=a("e691"),r=a.n(i);r.a},"3aef":function(e,t,a){"use strict";var i=a("9121"),r=a.n(i);r.a},"3df3":function(e,t,a){"use strict";var i=a("bff8"),r=a.n(i);r.a},"42bb":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAYAAABiS3YzAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAT9SURBVDhPTVRbbBRlGF3WCyZGJRof5IGCVKqlQqhYLYKJMRIeRCSSGCQEL08kPvCiWAxBiEZDuZRKFaUEETEYYkGuPmgQRdRECaBQaAO97O7sZXZndu7/P/PPHM9s1DjJZHYn35z/fOf7zsngf1eSxIh5KxUhiiPEKoQonIX33WqIgaWNp5M7gySSUHGMSCko1oN3kvDxD04mSf/xSuKkARaHIQJRg3dgIYwtWdh7psI9sQryTBfEsVfg7p0GY2sW7oGn4Xk1JNJDFIUkQGBipHgN0Dg9NRbw0+fYtzB7boE4/BKCtDgOISMPcaQglc861pBp/ZsVsHpugxg6DlcJMk5rU8YpKNsMoqjB0hn7EfVdWfj6RUBKSLA4JAibkak0Cuwk4e+Q9RJ+7TKcvgkQY8cIqBBQDkESmZDICQtCtwC3ZwLiymVqFfKOEKaaESTVTSY8mB+mjCPWS9aoSCCsXYVNYGmPIRYOBGszIkVnob7/cdjHVkK5AjIOEAxfhfXxZlTXvIbKy8tQW74ElVXLoK95FU7vB/CGBiGUS+YSwanVqO9rpzQKYeIjk7YjpIbahxMaTFIGox0tKMyfhXzbVBTmNKO6Ygn0p1pRWrkIpfYpyLVORv6JNoy3t7ITMo9i1HqykJ7GLjj9slmA/2s3vC8XNSZfWbEUtc6ZKD/aDO/CBVyfmEUUBmzfRxhGGL0zi2BkCMWO+1HsnAX9xecgAxfukRfgnO2iVAKZcW0ExT2dCC7tgvIltOZ7kJ9Hpu1NZN+N4qwpKC1bDGfLFpSXP4sbsyejtqMX2pwmFDofwPiMeylfDO/aIdS/mAMlA2oa+LjWPR368Cm2rmCdPMxV2QFh1VDdtA7+6eMQgeCAAE/aMK/8AWvN65BmGebOXrhHBwhEw2jnYOyeyuGl0498VPpbMfr7AAzXZgH3TQhYp0+iMrsZyqsTkLonLlQQwlFlaHOb4Hx/lHUBQp7mqqDhPHP3NIJGyGj5PNxDC1H/5X3cyBdRdWykB409fB91nYIgsDmIiJPmenErvNBD6ZEmaO3TIX2TJNyGXf0/98M52MHBsf3xQhX1n7bD2NuB0DMxWhqCsa8f+jxOe+6MBhuLjkkkzRH7DZPk2h9Ead5M2P19HJ7koQL2gQUIz70H7hQyjm4gpFbWtiyKeg6FkXEUFs5HYUEbSp0tGGm7G65GY9BVdqWMKw/djjLflx5rwfgzcxEKbgU7sLbeRDtzS7iSmZgiC7Y3/PliDPY9iapBCfo/grHpbVib3oS5sQv2hrUw1r8B+521fLcOtXffgrFxPaqf7IQQJuoDz6P29WLuO92XDipOJIpGGSOjeYxtzqI+eJD2pKtCtiqYWgyPtL3UkukzpGaR9OHzlkLCunYE3nayDF12HjAWadNiKQctV4BtmoidEqy+LMT5HZREoa6b0PIl+J5krDE3FRONERfzwJgHigufod53Mzz7Ot8zY7k5isCZXC4Hy7IYKkkjRJStodJzB0a2TcPIxR9g6jWM5vLw/VojmNMQDyt/wepvgdE7CaExzKzgGvK94hak8ZdJAdMfivsWxWn6+NArJoaOd0Hbdheq3bdC39mCqx/OR/nTNphbJ9Ick+D+vIEkKIdyaGMyT1QjS9Prv5BWTG3BnNQrOlseJ8MKDC/A6I1B+NpvqFz6CmPnTyBwKvD5TRp/CQccMRMi+v3f1AeAvwEGTacKa3T0zwAAAABJRU5ErkJggg=="},"45da":function(e,t,a){},"47a6":function(e,t,a){},4823:function(e,t,a){"use strict";var i=a("c9a5"),r=a.n(i);r.a},"496d":function(e,t,a){},"4b8c":function(e,t,a){},"4bfc":function(e,t,a){},"4c10":function(e,t,a){"use strict";var i=a("faa4"),r=a.n(i);r.a},"4c18":function(e,t,a){},"4ec9":function(e,t,a){"use strict";var i=a("cc95"),r=a.n(i);r.a},"4ed5":function(e,t,a){},"50d0":function(e,t,a){"use strict";var i=a("7f15"),r=a.n(i);r.a},5443:function(e,t,a){},"56d7":function(e,t,i){"use strict";i.r(t);i("456d"),i("ac6a"),i("cadf"),i("551c"),i("f751"),i("097d");var r,s=i("2b0e"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},l=[],n={neme:"#app"},c=n,d=(i("7c55"),i("2877")),u=Object(d["a"])(c,o,l,!1,null,null,null),p=u.exports,m=i("8c4f"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-form",{attrs:{model:e.reForm,"label-width":"60px"}},[a("label",[e._v("KOVI后台系统")]),a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{clearable:""},model:{value:e.reForm.input1,callback:function(t){e.$set(e.reForm,"input1",t)},expression:"reForm.input1"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.reForm.input2,callback:function(t){e.$set(e.reForm,"input2",t)},expression:"reForm.input2"}})],1),a("el-button",{staticClass:"dl",attrs:{type:"primary",icon:"el-icon-upload"},on:{click:e.handleLogin}},[e._v("登录")])],1)],1)],1)},f=[],_=(i("7f7f"),{data:function(){return{reForm:{input1:"",input2:""},name:"GT",psd:"GTT"}},methods:{handleLogin:function(){var e=this;""==this.reForm.input1?this.open("用户名不为空"):""==this.reForm.input2?this.open("密码为空"):this.axios.post("/Index/checklogin",{phone:this.reForm.input1,pwd:this.reForm.input2}).then(function(t){"2000"==t.data.code?(e.$cookies.set("token","11"),e.$router.push({path:"/"}),e.menus=t.data.menu,localStorage.setItem("Arr",JSON.stringify(t.data.menu)),localStorage.setItem("name",JSON.stringify(t.data.name)),e.open1()):e.open(t.data.msg)})},open:function(e){this.$message({message:e,type:"error",center:!0})},open1:function(){this.$message({message:"成功登陆",type:"success",center:!0})}},created:function(){var e=this;document.onkeydown=function(t){var a=window.event.keyCode;13==a&&e.handleLogin()}},beforeDestroy:function(){document.onkeydown=function(e){window.event.keyCode}}}),g=_,b=(i("a1d0"),Object(d["a"])(g,h,f,!1,null,"189498ec",null)),v=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app"},[a("div",{staticClass:"app-header"},[e._m(0),a("i",{staticClass:"el-icon-refresh",staticStyle:{"margin-left":"10px"},on:{click:e.shuaxin}}),a("i",{staticClass:"el-icon-goods",staticStyle:{"margin-left":"15px"}}),a("div",{staticClass:"info_geren"},[a("i",{staticClass:"el-icon-s-custom",staticStyle:{float:"left","font-size":"30px","margin-top":"13px"}}),a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n          "+e._s(e.name)+"\n        ")]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[e._v("消息中心")]),a("el-dropdown-item",{nativeOn:{click:function(t){return e.personal(t)}}},[e._v("设置")]),a("el-dropdown-item",{attrs:{divided:""},nativeOn:{click:function(t){return e.tuichu(t)}}},[e._v("退出")])],1)],1)],1)]),a("div",{staticClass:"app-content"},[a("div",{staticClass:"app-nav",style:{height:this.menuHeight+"px"}},[a("app-nav")],1),a("div",{staticClass:"app-wrap"},[a("div",{staticClass:"template-tabs"},[e.options.length?a("el-tabs",{attrs:{type:"card",closable:""},on:{"tab-click":e.tabClick,"tab-remove":e.tabRemove},model:{value:e.activeIndex,callback:function(t){e.activeIndex=t},expression:"activeIndex"}},e._l(e.options,function(e){return a("el-tab-pane",{key:e.name,attrs:{label:e.name,name:e.route}})}),1):e._e()],1),a("div",{staticClass:"content-wrap",style:{height:this.fullHeight+"px"}},[a("transition",{attrs:{name:"fade-transform",mode:"out-in"}},[a("keep-alive",[a("router-view")],1)],1)],1)])]),a("el-dialog",{attrs:{title:"设置",visible:e.dialogPersonal,width:"850px"},on:{"update:visible":function(t){e.dialogPersonal=t}}},[a("el-form",{staticStyle:{float:"left"},attrs:{model:e.dialogPersonalForm}},[a("el-form-item",{attrs:{label:"姓名","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{disabled:!0},model:{value:e.dialogPersonalForm.name,callback:function(t){e.$set(e.dialogPersonalForm,"name",t)},expression:"dialogPersonalForm.name"}})],1),a("el-form-item",{attrs:{label:"手机","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{disabled:!0},model:{value:e.dialogPersonalForm.phone,callback:function(t){e.$set(e.dialogPersonalForm,"phone",t)},expression:"dialogPersonalForm.phone"}})],1),a("el-form-item",{attrs:{label:"工作手机","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{disabled:!0},model:{value:e.dialogPersonalForm.Gphone,callback:function(t){e.$set(e.dialogPersonalForm,"Gphone",t)},expression:"dialogPersonalForm.Gphone"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.dialogPersonalForm.pwd,callback:function(t){e.$set(e.dialogPersonalForm,"pwd",t)},expression:"dialogPersonalForm.pwd"}})],1),a("el-form-item",{attrs:{label:"绑定二维码","label-width":"100px"}},[a("erweima",{attrs:{link:e.link}})],1),a("el-form-item",{attrs:{label:" ","label-width":"100px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addInfo}},[e._v("保存")])],1)],1),a("div",{staticStyle:{float:"left","margin-left":"30px"}},[a("el-table",{attrs:{data:e.tabledata}},[a("el-table-column",{attrs:{label:"已经绑定微信号",prop:"openid",width:"300px"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.dele(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)],1)},x=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title"},[a("img",{attrs:{src:i("f9ee")}})])}],k=i("bd86"),w=(i("ac4d"),i("8a81"),i("cebc")),S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-scrollbar",{staticStyle:{height:"100%"}},[a("div",{staticClass:"app-nav-wrap",staticStyle:{height:"100%"}},[a("i",{class:[0==e.isCollapse?"el-icon-s-fold":"el-icon-s-unfold"],staticStyle:{"font-size":"22px",color:"#CCC","margin-left":"22px"},attrs:{title:[0==e.isCollapse?"回收":"展开"]},on:{click:function(t){e.isCollapse=!e.isCollapse}}}),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.$route.path,router:"",collapse:e.isCollapse,"background-color":"#324057","text-color":"#FFFFFF","active-text-color":"#409EFF"}},[a("el-menu-item",{key:"/sy",attrs:{index:"/sy"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),e._l(e.menus,function(t){return a("el-submenu",{key:t.id,attrs:{index:t.name}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])]),e._l(t.child,function(i){return[null!==i.child?[a("el-submenu",{key:i.id,attrs:{index:i.name}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(i.title))]),e._l(i.child,function(r){return a("el-menu-item",{key:r.id,attrs:{index:"/"+t.name+"/"+i.name+"/"+r.name}},[e._v(e._s(r.title))])})],2)]:e._e(),null==i.child?[a("el-menu-item",{key:i.id,attrs:{index:"/"+t.name+"/"+i.name}},[e._v(e._s(i.title))])]:e._e()]})],2)})],2)],1)])},A=[],C=i("2f62"),F={data:function(){return{menus:[],isCollapse:!1}},mounted:function(){if("/sy"!==this.$route.path&&-1==this.$route.path.indexOf("userInfo")){var e={route:"/sy",name:"首页"},t={route:this.$route.path,name:this.$route.name},a=this.$route.path;this.triggerSetActiveIndex(a),this.triggerAddTabs(e),this.triggerAddTabs(t)}else{var i={route:"/sy",name:"首页"},r="/sy";this.triggerSetActiveIndex(r),this.triggerAddTabs(i),this.$router.push("/sy")}},computed:Object(w["a"])({},Object(C["c"])("Tabs",{options:"renderOptions",activeIndex:"renderActiveIndex"})),methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"])),created:function(){this.menus=JSON.parse(localStorage.getItem("Arr"))}},P=F,D=(i("4ec9"),Object(d["a"])(P,S,A,!1,null,"111dbd28",null)),$=D.exports,I=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},q=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"qrcode"}})])}],O=(i("b54a"),i("d044")),N=i.n(O),z={name:"test",props:["link"],mounted:function(){this.qrcode(this.link)},methods:{qrcode:function(e){new N.a("qrcode",{width:132,height:132,text:e,colorDark:"#000",colorLight:"#fff"})}}},T=z,j=Object(d["a"])(T,I,q,!1,null,null,null),U=j.exports,M=(i("3022"),r={components:{AppNav:$,erweima:U},data:function(){return{fullHeight:document.documentElement.clientHeight-120,menuHeight:document.documentElement.clientHeight-65,name:"",link:"",dialogPersonal:!1,dialogPersonalForm:{user_id:"",name:"",phone:"",Gphone:"",pwd:"",src:"",status:""},tabledata:[]}},computed:{jian:function(){return this.$route.path}},mounted:function(){var e=this;window.onresize=function(){return function(){window.fullHeight=document.documentElement.clientHeight,window.menuHeight=document.documentElement.clientHeight,e.fullHeight=window.fullHeight-120,e.menuHeight=window.menuHeight-65}()}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex","triggerDeleteTabs"]),{tabClick:function(){var e=this.activeIndex;this.activeIndex===this.UserInfo&&(e=this.activeIndex+"/"+this.options.id,this.$router.push({path:e})),this.$router.push({path:e})},tabRemove:function(e){"/sy"!=e&&(this.triggerDeleteTabs(e),this.activeIndex===e&&(this.options&&this.options.length>=1?(this.triggerSetActiveIndex(this.options[this.options.length-1].route),this.$router.push({path:this.activeIndex})):this.$router.push({path:"/"})))},tuichu:function(){var e=this;this.axios.get("/Index/exitdo").then(function(t){e.$router.push({path:"/Login"});var a=window.localStorage;a.clear()})},shuaxin:function(){window.location.reload()},personal:function(){var e=this;this.axios.get("/oa.User/user_set").then(function(t){e.dialogPersonal=!0,e.dialogPersonalForm.name=t.data.name,e.dialogPersonalForm.phone=t.data.phone,e.dialogPersonalForm.Gphone=t.data.work_phone,e.dialogPersonalForm.user_id=t.data.user_id,e.link=t.data.ewm,e.tabledata=t.data.openid_list})},addInfo:function(){var e=this;this.axios.post("/oa.User/user_set",{user_id:this.dialogPersonalForm.user_id,pwd:this.dialogPersonalForm.pwd}).then(function(t){2e3==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.personal()):e.$message({message:t.data.msg,type:"error"})})},dele:function(e){var t=this;this.axios.post("/oa.User/openid_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.$message({message:e.data.msg,type:"success"}),t.axios.get("/oa.User/user_set").then(function(e){t.tabledata=e.data.openid_list})):t.$message({message:e.data.msg,type:"error"})})}})},Object(k["a"])(r,"computed",Object(w["a"])({},Object(C["c"])("Tabs",{options:"renderOptions",renderActiveIndex:"renderActiveIndex"}),Object(C["c"])("customerList",{UserInfo:"renderUserInfo"}),{activeIndex:{get:function(){return this.renderActiveIndex},set:function(e){this.$store.dispatch("Tabs/triggerSetActiveIndex",e)}}})),Object(k["a"])(r,"created",function(){var e=this;this.name=JSON.parse(localStorage.getItem("name")),window.onresize=function(){return function(){window.fullHeight=document.documentElement.clientHeight,window.menuHeight=document.documentElement.clientHeight,e.fullHeight=window.fullHeight,e.menuHeight=window.menuHeight}()}}),Object(k["a"])(r,"watch",{$route:function(e){var t=!1,a=!0,i=!1,r=void 0;try{for(var s,o=this.options[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var l=s.value;if(l.name===e.name){t=!0;var n=e.path;this.triggerSetActiveIndex(n);break}}}catch(u){i=!0,r=u}finally{try{a||null==o.return||o.return()}finally{if(i)throw r}}if(!t){var c={route:e.path,name:e.name},d=e.path;this.triggerAddTabs(c),this.triggerSetActiveIndex(d)}},fullHeight:function(e){if(!this.timer){this.fullHeight=e,this.timer=!0;var t=this;setTimeout(function(){t.timer=!1},400)}}}),r),E=M,R=(i("b0f0"),Object(d["a"])(E,y,x,!1,null,null,null)),L=R.exports,H=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},B=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"router-template"},[a("div",{staticClass:"template-wrap"},[a("p",[e._v("大展宏图 一展伟业")])])])}],W={data:function(){return{}}},V=W,G=(i("8108"),Object(d["a"])(V,H,B,!1,null,null,null)),Q=G.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"warning"},on:{click:e.add}},[e._v("添加员工")]),a("div",{staticClass:"box_head"},[a("label",[e._v("姓名：")]),a("el-input",{staticStyle:{width:"200px","margin-right":"30px"},model:{value:e.seachName,callback:function(t){e.seachName=t},expression:"seachName"}}),a("label",[e._v("手机：")]),a("el-input",{staticStyle:{width:"200px","margin-right":"30px"},model:{value:e.seachPhone,callback:function(t){e.seachPhone=t},expression:"seachPhone"}}),a("label",[e._v("在职情况：")]),a("el-select",{staticStyle:{width:"80px","margin-right":"30px"},attrs:{placeholder:"请选择"},model:{value:e.seachState,callback:function(t){e.seachState=t},expression:"seachState"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),a("el-option",{attrs:{label:"在职",value:"1"}}),a("el-option",{attrs:{label:"离职",value:"2"}})],1),a("label",[e._v("总人数："+e._s(e.total))]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seach}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),a("el-table-column",{attrs:{label:"部门",prop:"dep_title"}}),a("el-table-column",{attrs:{label:"手机",prop:"phone"}}),a("el-table-column",{attrs:{label:"角色",prop:"role_name"}}),a("el-table-column",{attrs:{label:"工作手机",prop:"work_phone"}}),a("el-table-column",{attrs:{label:"入职日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(1e3*t.row.hiredate)))])]}}])}),a("el-table-column",{attrs:{label:"员工生日"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatDate")(1e3*t.row.birthday)))])]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",[e._v("在职")]):e._e(),0==t.row.status?a("span",[e._v("离职")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updata(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.daily(t.row)}}},[e._v("日常权限")])]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"日常权限",visible:e.dialogDaily},on:{"update:visible":function(t){e.dialogDaily=t}}},[a("el-form",{attrs:{model:e.formDaily}},[a("el-form-item",{attrs:{label:"级别","label-width":"90px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formDaily.level,callback:function(t){e.$set(e.formDaily,"level",t)},expression:"formDaily.level"}},e._l(e.options_level,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"审核部门","label-width":"90px"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.formDaily.dep,callback:function(t){e.$set(e.formDaily,"dep",t)},expression:"formDaily.dep"}},e._l(e.options_dep,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogDaily=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addDaily}},[e._v("确 定")])],1)],1)],1)},J=[],Z=(i("c5f6"),i("28a5"),{data:function(){return{seachName:"",seachPhone:"",seachState:"0",tableData:[],currentPage:0,total:0,per_page:0,last_page:0,page:0,dialogDaily:!1,formDaily:{level:"",dep:[],user_id:"",id:""},options_level:[{id:1,title:"巴长"},{id:2,title:"人事"},{id:3,title:"副总"},{id:4,title:"总经理"}],options_dep:[]}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{gettableData:function(){var e=this;this.axios.get("/oa.User/user_lists").then(function(t){e.tableData=t.data.data,e.currentPage=t.data.current_page,e.total=t.data.total,e.per_page=t.data.per_page,e.last_page=t.data.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.page=e,this.axios.post("/oa.User/user_lists",{page:e,name:this.seachName,phone:this.seachPhone,status:this.seachState}).then(function(e){t.tableData=e.data.data,t.currentPage=e.data.current_page,a.close()})},seach:function(){var e=this;this.axios.post("/oa.User/user_lists",{name:this.seachName,phone:this.seachPhone,status:this.seachState}).then(function(t){e.tableData=t.data.data,e.currentPage=t.data.current_page,e.total=t.data.total,e.per_page=t.data.per_page,e.last_page=t.data.last_page})},updata:function(e){this.triggerReplaceId(e.user_id),this.$router.push({path:"/oa/User/user_update/".concat(e.user_id),params:{userId:e.user_id,name:"/oa/User/user_update/".concat(e.user_id)}});var t={route:"/oa/User/user_update/".concat(e.user_id),name:"员工信息修改",id:e.user_id},a="/oa/User/user_update/".concat(e.user_id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},add:function(){this.triggerReplaceId("0"),this.$router.push({path:"/oa/User/user_update/0",params:{userId:"0",name:"/oa/User/user_update/0"}});var e={route:"/oa/User/user_update/0",name:"员工信息修改",id:"0"},t="/oa/User/user_update/0";this.triggerAddTabs(e),this.triggerSetActiveIndex(t)},daily:function(e){var t=this;this.axios.get("/oa.User/verify_update?user_id="+e.user_id).then(function(e){if(t.options_dep=e.data.user_dep,null!==e.data.verify){t.formDaily.level=e.data.verify.level;var a=e.data.verify.dep;t.formDaily.dep=a.split(",").map(Number),t.formDaily.id=e.data.verify.id}else t.formDaily.level="",t.formDaily.dep=[]}),this.formDaily.user_id=e.user_id,this.dialogDaily=!0},addDaily:function(){var e=this;this.axios.post("/oa.User/verify_update",{id:this.formDaily.id,user_id:this.formDaily.user_id,level:this.formDaily.level,dep:this.formDaily.dep.join(",")}).then(function(t){2e3==t.data.code?(e.$message({message:t.data.msg,type:"success"}),e.dialogDaily=!1):e.$message({message:t.data.msg,type:"error"})})}}),created:function(){this.gettableData()},filters:{formatDate:function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var o=t.getMinutes();o=o<10?"0"+o:o;var l=t.getSeconds();return l=l<10?"0"+l:l,a+"-"+i+"-"+r}},watch:{$route:function(e){this.handleCurrentChange(this.page)}}}),Y=Z,X=(i("4c10"),Object(d["a"])(Y,K,J,!1,null,"e343e98e",null)),ee=X.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-tabs",{staticStyle:{"margin-top":"20px"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本资料",name:"1"}},[a("el-form",{staticStyle:{"margin-top":"10px"},attrs:{model:e.formData1}},[a("el-form-item",{attrs:{label:"姓名","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.formData1.name,callback:function(t){e.$set(e.formData1,"name",t)},expression:"formData1.name"}})],1),a("el-form-item",{attrs:{label:"部门","label-width":"100px"}},[a("el-cascader",{attrs:{options:e.options,props:e.props,"change-on-select":""},model:{value:e.formData1.bumen,callback:function(t){e.$set(e.formData1,"bumen",t)},expression:"formData1.bumen"}})],1),a("el-form-item",{attrs:{label:"负责公司","label-width":"100px"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{multiple:"",placeholder:"选择所在企业",filterable:""},model:{value:e.formData1.company,callback:function(t){e.$set(e.formData1,"company",t)},expression:"formData1.company"}},e._l(e.Customercompany,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"角色","label-width":"100px"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{placeholder:"选择职位",multiple:""},model:{value:e.formData1.proson,callback:function(t){e.$set(e.formData1,"proson",t)},expression:"formData1.proson"}},e._l(e.options1,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"手机号码","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.formData1.phone,callback:function(t){e.$set(e.formData1,"phone",t)},expression:"formData1.phone"}})],1),a("el-form-item",{attrs:{label:"工作手机","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.formData1.Gphone,callback:function(t){e.$set(e.formData1,"Gphone",t)},expression:"formData1.Gphone"}})],1),a("el-form-item",{attrs:{label:"性别","label-width":"100px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formData1.sex,callback:function(t){e.$set(e.formData1,"sex",t)},expression:"formData1.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"},model:{value:e.formData1.sex,callback:function(t){e.$set(e.formData1,"sex",t)},expression:"formData1.sex"}},[e._v("女")])],1),a("el-form-item",{attrs:{label:"状态","label-width":"100px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formData1.status,callback:function(t){e.$set(e.formData1,"status",t)},expression:"formData1.status"}},[e._v("在职")]),a("el-radio",{attrs:{label:"0"},model:{value:e.formData1.status,callback:function(t){e.$set(e.formData1,"status",t)},expression:"formData1.status"}},[e._v("离职")])],1),a("el-form-item",{attrs:{label:"密码","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.formData1.pwd,callback:function(t){e.$set(e.formData1,"pwd",t)},expression:"formData1.pwd"}})],1),a("el-form-item",{attrs:{label:"","label-width":"100px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.add1}},[e._v("保存")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"附加信息",name:"2"}},[a("el-form",{staticStyle:{"margin-top":"10px"},attrs:{model:e.formData2}},[a("el-form-item",{attrs:{label:"入职时间","label-width":"100px"}},[a("el-date-picker",{staticStyle:{width:"217px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:e.formData2.hiredate,callback:function(t){e.$set(e.formData2,"hiredate",t)},expression:"formData2.hiredate"}})],1),a("el-form-item",{attrs:{label:"离职时间","label-width":"100px"}},[a("el-date-picker",{staticStyle:{width:"217px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"timestamp",placeholder:"选择日期"},model:{value:e.formData2.leavedate,callback:function(t){e.$set(e.formData2,"leavedate",t)},expression:"formData2.leavedate"}})],1),a("el-form-item",{attrs:{label:"员工生日","label-width":"100px"}},[a("el-date-picker",{staticStyle:{width:"217px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:e.formData2.birthday,callback:function(t){e.$set(e.formData2,"birthday",t)},expression:"formData2.birthday"}})],1),a("el-form-item",{attrs:{label:"转正日期","label-width":"100px"}},[a("el-date-picker",{staticStyle:{width:"217px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:e.formData2.formaldate,callback:function(t){e.$set(e.formData2,"formaldate",t)},expression:"formData2.formaldate"}})],1),a("el-form-item",{attrs:{label:"工资","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.salary,callback:function(t){e.$set(e.formData2,"salary",t)},expression:"formData2.salary"}})],1),a("el-form-item",{attrs:{label:"绩效","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.jixiao,callback:function(t){e.$set(e.formData2,"jixiao",t)},expression:"formData2.jixiao"}})],1),a("el-form-item",{attrs:{label:"合同截止日","label-width":"100px"}},[a("el-date-picker",{staticStyle:{width:"217px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:e.formData2.contractdate,callback:function(t){e.$set(e.formData2,"contractdate",t)},expression:"formData2.contractdate"}})],1),a("el-form-item",{attrs:{label:"禅修时间","label-width":"100px"}},[a("el-date-picker",{staticStyle:{width:"217px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:e.formData2.templedate,callback:function(t){e.$set(e.formData2,"templedate",t)},expression:"formData2.templedate"}})],1),a("el-form-item",{attrs:{label:"学历","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.education,callback:function(t){e.$set(e.formData2,"education",t)},expression:"formData2.education"}})],1),a("el-form-item",{attrs:{label:"政治面貌","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.politics,callback:function(t){e.$set(e.formData2,"politics",t)},expression:"formData2.politics"}})],1),a("el-form-item",{attrs:{label:"推荐人","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.recommend,callback:function(t){e.$set(e.formData2,"recommend",t)},expression:"formData2.recommend"}})],1),a("el-form-item",{attrs:{label:"身份证号码","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.idcard,callback:function(t){e.$set(e.formData2,"idcard",t)},expression:"formData2.idcard"}})],1),a("el-form-item",{attrs:{label:"身份证地址","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.idcard_address,callback:function(t){e.$set(e.formData2,"idcard_address",t)},expression:"formData2.idcard_address"}})],1),a("el-form-item",{attrs:{label:"现住址","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.address,callback:function(t){e.$set(e.formData2,"address",t)},expression:"formData2.address"}})],1),a("el-form-item",{attrs:{label:"父亲姓名","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.dad_name,callback:function(t){e.$set(e.formData2,"dad_name",t)},expression:"formData2.dad_name"}})],1),a("el-form-item",{attrs:{label:"母亲姓名","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.mom_name,callback:function(t){e.$set(e.formData2,"mom_name",t)},expression:"formData2.mom_name"}})],1),a("el-form-item",{attrs:{label:"父亲生日","label-width":"100px"}},[a("el-date-picker",{staticStyle:{width:"217px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:e.formData2.dad_birthday,callback:function(t){e.$set(e.formData2,"dad_birthday",t)},expression:"formData2.dad_birthday"}})],1),a("el-form-item",{attrs:{label:"母亲生日","label-width":"100px"}},[a("el-date-picker",{staticStyle:{width:"217px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"timestamp"},model:{value:e.formData2.mom_birthday,callback:function(t){e.$set(e.formData2,"mom_birthday",t)},expression:"formData2.mom_birthday"}})],1),a("el-form-item",{attrs:{label:"父母现住址","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入"},model:{value:e.formData2.parent_address,callback:function(t){e.$set(e.formData2,"parent_address",t)},expression:"formData2.parent_address"}})],1),a("el-form-item",{attrs:{label:"","label-width":"100px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.add1}},[e._v("提交")])],1)],1)],1),a("el-tab-pane",{attrs:{label:"个人历程",name:"3"}},[a("el-button",{staticStyle:{"margin-top":"20px"},on:{click:e.tianjia}},[e._v("添加")]),a("el-table",{attrs:{data:e.courseData}},[a("el-table-column",{attrs:{prop:"",label:"时间"}}),a("el-table-column",{attrs:{prop:"",label:"内容"}})],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialogTianjia},on:{"update:visible":function(t){e.dialogTianjia=t}}},[a("el-form",{attrs:{model:e.dialogTianjiaForm}},[a("el-form-item",{attrs:{label:"时间","label-width":"90px"}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{"value-format":"timestamp",type:"date",placeholder:"选择日期"},model:{value:e.dialogTianjiaForm.time,callback:function(t){e.$set(e.dialogTianjiaForm,"time",t)},expression:"dialogTianjiaForm.time"}})],1),a("el-form-item",{attrs:{label:"内容","label-width":"90px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.dialogTianjiaForm.content,callback:function(t){e.$set(e.dialogTianjiaForm,"content",t)},expression:"dialogTianjiaForm.content"}})],1),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{on:{click:e.send}},[e._v("确认")])],1)],1)],1)],1)],1)],1)},ae=[],ie={data:function(){return{activeName:"1",formData1:{name:"",bumen:[],company:[],proson:[],phone:"",Gphone:"",sex:"1",status:"1",pwd:""},options:[],options1:[],props:{value:"id",label:"title",children:"child"},Customercompany:[],formData2:{birthday:"",hiredate:"",leavedate:"",contractdate:"",templedate:"",formaldate:"",education:"",politics:"",recommend:"",idcard:"",idcard_address:"",address:"",dad_name:"",mom_name:"",dad_birthday:"",mom_birthday:"",parent_address:"",salary:"",jixiao:""},dialogTianjia:!1,dialogTianjiaForm:{time:"",content:""},courseData:[]}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{getData:function(){var e=this;this.axios.get("/oa.User/user_update?user_id="+this.$route.params.id).then(function(t){e.options1=t.data.role_list;var a=t.data.company;if(0==e.Customercompany.length)for(var i=0;i<a.length;i++){var r={name:"└".concat(a[i].name),id:a[i].id};if(e.Customercompany.push(r),a[i].hasOwnProperty("child"))for(var s=0;s<a[i].child.length;s++){var o={name:"└└".concat(a[i].child[s].name),id:a[i].child[s].id};if(e.Customercompany.push(o),a[i].child[s].hasOwnProperty("child"))for(var l=0;l<a[i].child[s].child.length;l++){var n={name:"└└└".concat(a[i].child[s].child[l].name),id:a[i].child[s].child[l].id};if(e.Customercompany.push(n),a[i].child[s].child[l].hasOwnProperty("child"))for(var c=0;c<a[i].child[s].child.length;c++)if(void 0==a[i].child[s].child[l].child[c]);else{var d={name:"└└└└".concat(a[i].child[s].child[l].child[c].name),id:a[i].child[s].child[l].child[c].id};e.Customercompany.push(d)}}}}if(e.formData1.name=t.data.name,e.formData1.phone=t.data.phone,e.formData1.Gphone=t.data.work_phone,e.formData1.proson=t.data.group_id.split(",").map(Number),e.formData1.sex=String(t.data.gender),e.formData1.status=String(t.data.status),e.formData1.pwd="",0==t.data.birthday?e.formData2.birthday="":e.formData2.birthday=1e3*t.data.birthday,0==t.data.hiredate?e.formData2.hiredate="":e.formData2.hiredate=1e3*t.data.hiredate,0==t.data.leavedate?e.formData2.leavedate="":e.formData2.leavedate=1e3*t.data.leavedate,0==t.data.contractdate?e.formData2.contractdate="":e.formData2.contractdate=1e3*t.data.contractdate,0==t.data.templedate?e.formData2.templedate="":e.formData2.templedate=1e3*t.data.templedate,0==t.data.formaldate?e.formData2.formaldate="":e.formData2.formaldate=1e3*t.data.formaldate,0==t.data.contractdate?e.formData2.contractdate="":e.formData2.contractdate=1e3*t.data.contractdate,0==t.data.dad_birthday?e.formData2.dad_birthday="":e.formData2.dad_birthday=1e3*t.data.dad_birthday,0==t.data.mom_birthday?e.formData2.mom_birthday="":e.formData2.mom_birthday=1e3*t.data.mom_birthday,e.formData2.salary=t.data.salary,e.formData2.jixiao=t.data.jixiao,e.formData2.education=t.data.education,e.formData2.politics=t.data.politics,e.formData2.recommend=t.data.recommend,e.formData2.idcard=t.data.idcard,e.formData2.idcard_address=t.data.idcard_address,e.formData2.address=t.data.address,e.formData2.mom_name=t.data.mom_name,e.formData2.dad_name=t.data.dad_name,e.formData2.parent_address=t.data.parent_address,"0"==t.data.company_id?e.formData1.company=[]:e.formData1.company=t.data.company_id.split(",").map(Number),e.options=t.data.user_dep[0].child[0].child,t.data.dep_id>4&&17!=t.data.dep_id)for(var u=0;u<e.options.length;u++)e.options[u].hasOwnProperty("child")&&e.options[u].child.filter(function(a){a.id==t.data.dep_id&&(e.formData1.bumen=[Number(e.options[u].id),Number(t.data.dep_id)])});else 17==t.data.dep_id?e.formData1.bumen=[17]:e.formData1.bumen=[Number(t.data.dep_id)]})},getData1:function(){var e=this;this.axios.get("/oa.User/user_update").then(function(t){e.options1=t.data.role_list;var a=t.data.company;if(0==e.Customercompany.length)for(var i=0;i<a.length;i++){var r={name:"└".concat(a[i].name),id:a[i].id};if(e.Customercompany.push(r),a[i].hasOwnProperty("child"))for(var s=0;s<a[i].child.length;s++){var o={name:"└└".concat(a[i].child[s].name),id:a[i].child[s].id};if(e.Customercompany.push(o),a[i].child[s].hasOwnProperty("child"))for(var l=0;l<a[i].child[s].child.length;l++){var n={name:"└└└".concat(a[i].child[s].child[l].name),id:a[i].child[s].child[l].id};if(e.Customercompany.push(n),a[i].child[s].child[l].hasOwnProperty("child"))for(var c=0;c<a[i].child[s].child.length;c++)if(void 0!==a[i].child[s].child[l].child[c]){var d={name:"└└└└".concat(a[i].child[s].child[l].child[c].name),id:a[i].child[s].child[l].child[c].id};e.Customercompany.push(d)}}}}e.formData1.name="",e.formData1.phone="",e.formData1.Gphone="",e.formData1.proson=[],e.formData1.sex="1",e.formData1.status="1",e.formData1.pwd="123456",e.formData2.birthday="",e.formData2.hiredate="",e.formData2.leavedate="",e.formData2.contractdate="",e.formData2.templedate="",e.formData2.formaldate="",e.formData2.contractdate="",e.formData2.education="",e.formData2.politics="",e.formData2.recommend="",e.formData2.idcard="",e.formData2.idcard_address="",e.formData2.address="",e.formData2.mom_name="",e.formData2.dad_name="",e.formData2.dad_birthday="",e.formData2.mom_birthday="",e.formData2.parent_address="",e.formData2.salary="",e.formData2.jixiao="",e.options=t.data.user_dep[0].child})},add1:function(){var e=this;0==this.$route.params.id?this.axios.post("/oa.User/user_add",{name:this.formData1.name,dep_id:this.formData1.bumen[this.formData1.bumen.length-1],company_id:String(this.formData1.company),group_id:this.formData1.proson.join(","),phone:this.formData1.phone,work_phone:this.formData1.Gphone,gender:this.formData1.sex,status:this.formData1.status,pwd:this.formData1.pwd,birthday:this.formData2.birthday/1e3,hiredate:this.formData2.hiredate/1e3,leavedate:this.formData2.leavedate/1e3,contractdate:this.formData2.contractdate/1e3,templedate:this.formData2.templedate/1e3,formaldate:this.formData2.formaldate/1e3,education:this.formData2.education,politics:this.formData2.politics,recommend:this.formData2.recommend,idcard:this.formData2.idcard,idcard_address:this.formData2.idcard_address,address:this.formData2.address,dad_name:this.formData2.dad_name,mom_name:this.formData2.mom_name,dad_birthday:this.formData2.dad_birthday/1e3,mom_birthday:this.formData2.mom_birthday/1e3,parent_address:this.formData2.parent_address,salary:this.formData2.salary,jixiao:this.formData2.jixiao}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),console.log(e.$route.path),e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/oa/User/user_lists"})):e.open(t.data.msg,"error")}):this.axios.post("/oa.User/user_update",{user_id:this.$route.params.id,name:this.formData1.name,dep_id:this.formData1.bumen[this.formData1.bumen.length-1],company_id:String(this.formData1.company),group_id:this.formData1.proson.join(","),phone:this.formData1.phone,work_phone:this.formData1.Gphone,gender:this.formData1.sex,status:this.formData1.status,pwd:this.formData1.pwd,birthday:this.formData2.birthday/1e3,hiredate:this.formData2.hiredate/1e3,leavedate:this.formData2.leavedate/1e3,contractdate:this.formData2.contractdate/1e3,templedate:this.formData2.templedate/1e3,formaldate:this.formData2.formaldate/1e3,education:this.formData2.education,politics:this.formData2.politics,recommend:this.formData2.recommend,idcard:this.formData2.idcard,idcard_address:this.formData2.idcard_address,address:this.formData2.address,dad_name:this.formData2.dad_name,mom_name:this.formData2.mom_name,dad_birthday:this.formData2.dad_birthday/1e3,mom_birthday:this.formData2.mom_birthday/1e3,parent_address:this.formData2.parent_address,salary:this.formData2.salary,jixiao:this.formData2.jixiao}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/oa/User/user_lists"})):e.open(t.data.msg,"error")})},getcourseData:function(){this.axios.get("/oa.User/user_story_select?user_id="+this.$route.params.id).then(function(e){})},tianjia:function(){this.dialogTianjia=!0,this.dialogTianjiaForm.time="",this.dialogTianjiaForm.content=""},send:function(){},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){this.activeName="1",0==this.$route.params.id?this.getData1():(this.getData(),this.getcourseData())},watch:{$route:function(e){this.$route.params.id&&(this.activeName="1",0==this.$route.params.id?this.getData1():(this.getData(),this.getcourseData()))}},filters:{formatDate:function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var o=t.getMinutes();o=o<10?"0"+o:o;var l=t.getSeconds();return l=l<10?"0"+l:l,a+"-"+i+"-"+r}}},re=ie,se=(i("a05e"),Object(d["a"])(re,te,ae,!1,null,"82fbc6c0",null)),oe=se.exports,le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head"},[e._l(e.tableData,function(t){return a("p",{key:t.id,staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.title)+"\n        ")])}),a("p",e._l(e.tableData[0].user,function(t){return a("span",{key:t.id,staticStyle:{"margin-left":"10px"}},[e._v("\n                "+e._s(t.name)+"\n            ")])}),0)],2),a("div",{staticClass:"head"},[e._l(e.tableData[0].child,function(t){return a("p",{key:t.id,staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.title))])}),a("p",e._l(e.tableData[0].child[0].user,function(t){return a("span",{key:t.id,staticStyle:{"margin-left":"10px"}},[e._v("\n                "+e._s(t.name)+"\n            ")])}),0)],2),a("div",{staticClass:"head_er"},e._l(e.bumen,function(t){return a("div",{key:t.id,staticClass:"lirui"},[a("p",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.title))]),void 0!=t.child?[e._l(t.user,function(t){return a("p",{key:t.group_id},[e._v(e._s(t.name)+" -- "+e._s(t.role_name))])}),a("div",{staticClass:"liruiInner"},e._l(t.child,function(t){return a("div",{key:t.id},[a("p",{staticStyle:{"margin-bottom":"10px","font-weight":"bold"}},[e._v(e._s(t.title))]),e._l(t.user,function(t){return a("p",{key:t.group_id},[e._v(e._s(t.name)+"--"+e._s(t.role_name))])})],2)}),0)]:e._l(t.user,function(t){return a("p",{key:t.group_id},[e._v(e._s(t.name)+" -- "+e._s(t.role_name))])})],2)}),0)])},ne=[],ce={data:function(){return{tableData:[],bumen:[]}},methods:{gettableData:function(){var e=this;this.axios.get("/oa.User/dep_select").then(function(t){e.tableData=t.data,e.bumen=t.data[0].child[0].child})}},created:function(){var e=this;this.$nextTick(function(){e.gettableData()})}},de=ce,ue=(i("5acc"),Object(d["a"])(de,le,ne,!1,null,"1de4ccce",null)),pe=ue.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"warning"},on:{click:e.tian}},[e._v("添加")]),a("el-divider",{attrs:{direction:"horizontal"}}),a("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"名称",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._l(t.row.level,function(t,i){return a("span",{key:i,staticStyle:{"margin-right":"10px"}},[e._v("└")])}),e._v(e._s(t.row.name))],2)]}}])}),a("el-table-column",{attrs:{label:"地址",prop:"address"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updata(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletes(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"添加修改",visible:e.dialogForm},on:{"update:visible":function(t){e.dialogForm=t}}},[a("el-form",{attrs:{model:e.formData}},[a("el-form-item",{attrs:{label:"公司名称","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"公司名称"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"公司地址","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"公司地址"},model:{value:e.formData.address,callback:function(t){e.$set(e.formData,"address",t)},expression:"formData.address"}})],1),a("el-form-item",{attrs:{label:"上级部门","label-width":"100px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}},[a("el-option",{attrs:{value:"0",label:"顶级"}}),e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id,disabled:e.disabled}})})],2)],1),a("el-form-item",{attrs:{label:"","label-width":"100px"}},[a("el-button",{on:{click:e.add}},[e._v("保存")])],1)],1)],1)],1)},he=[],fe={data:function(){return{tableData:[{name:"aaa",address:"11111",id:1}],dialogForm:!1,formData:{name:"",address:"",value:"1",id:""},options:[]}},methods:{gettableData:function(){var e=this;this.axios.get("/oa.User/firm_select").then(function(t){e.tableData=t.data.list,e.options=t.data.firm_list})},tian:function(){this.dialogForm=!0,this.formData.id="",this.formData.name="",this.formData.address=""},updata:function(e){var t=this;this.axios.get("/oa.User/firm_select").then(function(a){t.options=a.data.firm_list,t.dialogForm=!0,t.formData.id=e.id,t.formData.name=e.name,t.formData.address=e.address,0==e.pid?t.formData.value="顶级":t.formData.value=e.pid,t.options.filter(function(t){t.id==e.id&&(t.disabled=!0)})})},add:function(){var e=this;""==this.formData.id?this.axios.post("/oa.User/firm_add",{}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.gettableData(),e.dialogForm=!1):e.open(t.data.msg,"error")}):this.axios.post("/oa.User/firm_update",{}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.gettableData(),e.dialogForm=!1):e.open(t.data.msg,"error")})},deletes:function(e){},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettableData()}},_e=fe,ge=Object(d["a"])(_e,me,he,!1,null,null,null),be=ge.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-button",{staticStyle:{"margin-top":"20px"},on:{click:e.add}},[e._v("发起")]),a("div",{staticClass:"box_head"},[a("label",[e._v("姓名：")]),a("el-input",{staticStyle:{width:"180px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.seachName,callback:function(t){e.seachName=t},expression:"seachName"}}),a("label",[e._v("开始日期：")]),a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.seachStart,callback:function(t){e.seachStart=t},expression:"seachStart"}}),a("label",[e._v("结束日期：")]),a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.seachEnd,callback:function(t){e.seachEnd=t},expression:"seachEnd"}}),a("label",[e._v("审批情况：")]),a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("el-option",{attrs:{label:"全部",value:"全部"}}),a("el-option",{attrs:{label:"待审批",value:"1"}}),a("el-option",{attrs:{label:"已审批",value:"2"}})],1),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seach}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"名字",prop:"name",width:"100px"}}),a("el-table-column",{attrs:{label:"类型",prop:"leave_type",width:"80px"}}),a("el-table-column",{attrs:{label:"开始时间",width:"155px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.start_time))])]}}])}),a("el-table-column",{attrs:{label:"结束时间",width:"155px;"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.end_time))])]}}])}),a("el-table-column",{attrs:{label:"预算",prop:"money"}}),a("el-table-column",{attrs:{label:"天数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.day)+"天/"+e._s(t.row.hour)+"小时")])]}}])}),a("el-table-column",{attrs:{label:"进度",prop:"leave_flow_text"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.leave_flow.leave_flow_text))])]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.shenhe(t.row)}}},[e._v("审核")]),a("br"),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.shanchu(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"审批",visible:e.dialogshenp},on:{"update:visible":function(t){e.dialogshenp=t}}},[a("el-form",{attrs:{model:e.shenpForm}},[a("el-form-item",{attrs:{label:"原因"}},[a("p",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.yuanyin))])]),a("el-form-item",{attrs:{label:"选项"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.shenpForm.radio,callback:function(t){e.$set(e.shenpForm,"radio",t)},expression:"shenpForm.radio"}},[e._v("同意")]),a("el-radio",{attrs:{label:"2"},model:{value:e.shenpForm.radio,callback:function(t){e.$set(e.shenpForm,"radio",t)},expression:"shenpForm.radio"}},[e._v("拒绝")])],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"320px"},attrs:{type:"textarea"},model:{value:e.shenpForm.text,callback:function(t){e.$set(e.shenpForm,"text",t)},expression:"shenpForm.text"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogshenp=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")])],1)],1)],1)},ye=[],xe={data:function(){return{seachName:"",seachStart:"",seachEnd:"",value:"",tableData:[],currentPage:0,total:0,per_page:0,last_page:0,dialogshenp:!1,shenpForm:{id:"",radio:"",text:""},yuanyin:""}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{gettableData:function(){var e=this;this.axios.get("/oa.Days/leave_select").then(function(t){e.tableData=t.data.data,e.currentPage=t.data.current_page,e.total=t.data.total,e.per_page=t.data.per_page,e.last_page=t.data.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/oa.Days/leave_select",{page:e,name:this.seachName,start_time:this.seachStart,end_time:this.seachEnd,status:this.value}).then(function(e){t.tableData=e.data.data,t.currentPage=e.data.current_page,a.close()})},seach:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/oa.Days/leave_select",{name:this.seachName,start_time:this.seachStart,end_time:this.seachEnd,status:this.value}).then(function(a){e.tableData=a.data.data,e.currentPage=a.data.current_page,e.total=a.data.total,e.per_page=a.data.per_page,e.last_page=a.data.last_page,t.close()})},add:function(){this.$router.push({path:"/oa/Days/add"});var e={route:"/oa/Days/add",name:"发起申请"},t="/oa/Days/add";this.triggerAddTabs(e),this.triggerSetActiveIndex(t)},shenhe:function(e){var t=this;this.axios.post("/oa.Days/leave_check",{id:e.id}).then(function(a){1==a.data.code?(t.dialogshenp=!0,t.shenpForm.id=e.id,t.yuanyin=a.data.data):t.open(a.data.msg,"error")})},confirm:function(){var e=this;2==this.shenpForm.radio&&""==this.shenpForm.text?this.open("填写拒绝原因","error"):this.axios.post("/oa.Days/leave_check_submit",{id:this.shenpForm.id,status:this.shenpForm.radio,remark:this.shenpForm.text}).then(function(t){2e3==t.data.code?(e.dialogshenp=!1,e.gettableData(),e.open(t.data.msg,"success")):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})},shanchu:function(e){var t=this;this.axios.post("/oa.Days/leave_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.gettableData(),t.open(e.data.msg,"success")):t.open(e.data.msg,"error")})}}),created:function(){this.gettableData()},watch:{$route:function(e){this.gettableData()}},filters:{formatDate:function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1;i=i<10?"0"+i:i;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var o=t.getMinutes();o=o<10?"0"+o:o;var l=t.getSeconds();return l=l<10?"0"+l:l,a+"-"+i+"-"+r}}},ke=xe,we=(i("9597"),Object(d["a"])(ke,ve,ye,!1,null,"3950f834",null)),Se=we.exports,Ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"content_box"},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"请假申请",name:"1"}},[a("div",{staticClass:"leave"},[a("el-form",{attrs:{model:e.leaveForm}},[a("el-form-item",{attrs:{label:"预算","label-width":"100px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.leaveForm.budget,callback:function(t){e.$set(e.leaveForm,"budget",t)},expression:"leaveForm.budget"}})],1),a("el-form-item",{attrs:{label:"时间","label-width":"100px"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入天数"},model:{value:e.leaveForm.timeT,callback:function(t){e.$set(e.leaveForm,"timeT",t)},expression:"leaveForm.timeT"}}),a("el-input",{staticStyle:{"margin-left":"20px",width:"150px"},attrs:{type:"number",placeholder:"请输入小时数"},model:{value:e.leaveForm.timeH,callback:function(t){e.$set(e.leaveForm,"timeH",t)},expression:"leaveForm.timeH"}})],1),a("el-form-item",{attrs:{label:"开始时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.leaveForm.startTime,callback:function(t){e.$set(e.leaveForm,"startTime",t)},expression:"leaveForm.startTime"}})],1),a("el-form-item",{attrs:{label:"结束时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.leaveForm.endTime,callback:function(t){e.$set(e.leaveForm,"endTime",t)},expression:"leaveForm.endTime"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"100px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.leaveForm.remark,callback:function(t){e.$set(e.leaveForm,"remark",t)},expression:"leaveForm.remark"}})],1),a("el-form-item",{attrs:{label:" ","label-width":"100px"}},[a("el-button",{on:{click:e.add1}},[e._v("保存")])],1)],1)],1)]),a("el-tab-pane",{attrs:{label:"外出申请",name:"3"}},[a("div",{staticClass:"egress"},[a("el-form",{attrs:{model:e.egressForm}},[a("el-form-item",{attrs:{label:"预算","label-width":"100px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.egressForm.budget,callback:function(t){e.$set(e.egressForm,"budget",t)},expression:"egressForm.budget"}})],1),a("el-form-item",{attrs:{label:"时间","label-width":"100px"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入天数"},model:{value:e.egressForm.timeT,callback:function(t){e.$set(e.egressForm,"timeT",t)},expression:"egressForm.timeT"}}),a("el-input",{staticStyle:{"margin-left":"20px",width:"150px"},attrs:{type:"number",placeholder:"请输入小时数"},model:{value:e.egressForm.timeH,callback:function(t){e.$set(e.egressForm,"timeH",t)},expression:"egressForm.timeH"}})],1),a("el-form-item",{attrs:{label:"开始时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.egressForm.startTime,callback:function(t){e.$set(e.egressForm,"startTime",t)},expression:"egressForm.startTime"}})],1),a("el-form-item",{attrs:{label:"结束时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.egressForm.endTime,callback:function(t){e.$set(e.egressForm,"endTime",t)},expression:"egressForm.endTime"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"100px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.egressForm.remark,callback:function(t){e.$set(e.egressForm,"remark",t)},expression:"egressForm.remark"}})],1),a("el-form-item",{attrs:{label:" ","label-width":"100px"}},[a("el-button",{on:{click:e.add1}},[e._v("保存")])],1)],1)],1)]),a("el-tab-pane",{attrs:{label:"加班申请",name:"4"}},[a("div",{staticClass:"overtime"},[a("el-form",{attrs:{model:e.overtimeForm}},[a("el-form-item",{attrs:{label:"预算","label-width":"100px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.overtimeForm.budget,callback:function(t){e.$set(e.overtimeForm,"budget",t)},expression:"overtimeForm.budget"}})],1),a("el-form-item",{attrs:{label:"时间","label-width":"100px"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入天数"},model:{value:e.overtimeForm.timeT,callback:function(t){e.$set(e.overtimeForm,"timeT",t)},expression:"overtimeForm.timeT"}}),a("el-input",{staticStyle:{"margin-left":"20px",width:"150px"},attrs:{type:"number",placeholder:"请输入小时数"},model:{value:e.overtimeForm.timeH,callback:function(t){e.$set(e.overtimeForm,"timeH",t)},expression:"overtimeForm.timeH"}})],1),a("el-form-item",{attrs:{label:"开始时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.overtimeForm.startTime,callback:function(t){e.$set(e.overtimeForm,"startTime",t)},expression:"overtimeForm.startTime"}})],1),a("el-form-item",{attrs:{label:"结束时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.overtimeForm.endTime,callback:function(t){e.$set(e.overtimeForm,"endTime",t)},expression:"overtimeForm.endTime"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"100px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.overtimeForm.remark,callback:function(t){e.$set(e.overtimeForm,"remark",t)},expression:"overtimeForm.remark"}})],1),a("el-form-item",{attrs:{label:" ","label-width":"100px"}},[a("el-button",{on:{click:e.add1}},[e._v("保存")])],1)],1)],1)]),a("el-tab-pane",{attrs:{label:"出差申请",name:"2"}},[a("div",{staticClass:"business"},[a("el-form",{attrs:{model:e.businessForm}},[a("el-form-item",{attrs:{label:"预算","label-width":"100px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.businessForm.budget,callback:function(t){e.$set(e.businessForm,"budget",t)},expression:"businessForm.budget"}})],1),a("el-form-item",{attrs:{label:"时间","label-width":"100px"}},[a("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",placeholder:"请输入天数"},model:{value:e.businessForm.timeT,callback:function(t){e.$set(e.businessForm,"timeT",t)},expression:"businessForm.timeT"}}),a("el-input",{staticStyle:{"margin-left":"20px",width:"150px"},attrs:{type:"number",placeholder:"请输入小时数"},model:{value:e.businessForm.timeH,callback:function(t){e.$set(e.businessForm,"timeH",t)},expression:"businessForm.timeH"}})],1),a("el-form-item",{attrs:{label:"开始时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.businessForm.startTime,callback:function(t){e.$set(e.businessForm,"startTime",t)},expression:"businessForm.startTime"}})],1),a("el-form-item",{attrs:{label:"结束时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.businessForm.endTime,callback:function(t){e.$set(e.businessForm,"endTime",t)},expression:"businessForm.endTime"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"100px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.businessForm.remark,callback:function(t){e.$set(e.businessForm,"remark",t)},expression:"businessForm.remark"}})],1),a("el-form-item",{attrs:{label:" ","label-width":"100px"}},[a("el-button",{on:{click:e.add1}},[e._v("保存")])],1)],1)],1)])],1)],1)])},Ce=[],Fe={data:function(){return{activeName:"1",leaveForm:{budget:"",timeT:"",timeH:"",startTime:"",endTime:"",remark:""},rules:{budget:[{type:"number",message:"预算必须为数字",trigger:"blur"}],timeT:[{type:"number",message:"天数必须为数字",trigger:"blur"}],timeH:[{type:"number",message:"小时必须为数字",trigger:"blur"}]},egressForm:{budget:"",timeT:"",timeH:"",startTime:"",endTime:"",remark:""},overtimeForm:{budget:"",timeT:"",timeH:"",startTime:"",endTime:"",remark:""},businessForm:{budget:"",timeT:"",timeH:"",startTime:"",endTime:"",remark:""}}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{add1:function(){var e=this;1==this.activeName?""==this.leaveForm.timeT||""==this.leaveForm.timeH||""==this.leaveForm.startTime||""==this.leaveForm.endTime?this.open("填写完整","error"):this.axios.post("/oa.Days/leave_add",{leave_type:this.activeName,money:this.leaveForm.budget,day:this.leaveForm.timeT,hour:this.leaveForm.timeH,start_time:this.leaveForm.startTime,end_time:this.leaveForm.endTime,content:this.leaveForm.remark}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.params.name),e.$router.push({path:"/oa/Days/leave_select"})):e.open(t.data.msg,"error")}):2==this.activeName?""==this.businessForm.timeT||""==this.businessForm.timeH||""==this.businessForm.startTime||""==this.businessForm.endTime?this.open("填写完整","error"):this.axios.post("/oa.Days/leave_add",{leave_type:this.activeName,money:this.businessForm.budget,day:this.businessForm.timeT,hour:this.businessForm.timeH,start_time:this.businessForm.startTime,end_time:this.businessForm.endTime,content:this.businessForm.remark}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.params.name),e.$router.push({path:"/oa/Days/leave_select"})):e.open(t.data.msg,"error")}):3==this.activeName?""==this.egressForm.timeT||""==this.egressForm.timeH||""==this.egressForm.startTime||""==this.egressForm.endTime?this.open("填写完整","error"):this.axios.post("/oa.Days/leave_add",{leave_type:this.activeName,money:this.egressForm.budget,day:this.egressForm.timeT,hour:this.egressForm.timeH,start_time:this.egressForm.startTime,end_time:this.egressForm.endTime,content:this.egressForm.remark}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.params.name),e.$router.push({path:"/oa/Days/leave_select"})):e.open(t.data.msg,"error")}):4==this.activeName&&(""==this.overtimeForm.timeT||""==this.overtimeForm.timeH||""==this.overtimeForm.startTime||""==this.overtimeForm.endTime?this.open("填写完整","error"):this.axios.post("/oa.Days/leave_add",{leave_type:this.activeName,money:this.overtimeForm.budget,day:this.overtimeForm.timeT,hour:this.overtimeForm.timeH,start_time:this.overtimeForm.startTime,end_time:this.overtimeForm.endTime,content:this.overtimeForm.remark}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.params.name),e.$router.push({path:"/oa/Days/leave_select"})):e.open(t.data.msg,"error")}))},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){}},Pe=Fe,De=(i("eb65"),Object(d["a"])(Pe,Ae,Ce,!1,null,"d256d8fa",null)),$e=De.exports,Ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box",staticStyle:{"padding-bottom":"20px"}},[a("el-button",{staticStyle:{"margin-top":"20px"},on:{click:e.send}},[e._v("发起")]),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"task_name",label:"名称"}}),a("el-table-column",{attrs:{prop:"apply_name",label:"发起人"}}),a("el-table-column",{attrs:{label:"接收部门/负责人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dep_name)+"/"+e._s(t.row.receive_name))])]}}])}),a("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.type.type_text))])]}}])}),a("el-table-column",{attrs:{prop:"start_time",label:"时间",width:"150px"}}),a("el-table-column",{attrs:{label:"内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{staticStyle:{width:"500px"},attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.row.content))]),a("el-button",{attrs:{type:"text",size:"mini"}},[e._v("查看")])],1)]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.status.status_text))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.receive_user==e.zt&&0==t.row.status.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.linqu(t.row)}}},[e._v("分配")]):e._e(),1==t.row.status.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.see(t.row)}}},[e._v("查看")]):e._e(),t.row.apply_user==e.zt&&0==t.row.status.status?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.updata(t.row)}}},[e._v("修改")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"分配任务",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("h2",[e._v(e._s(e.task_name))]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("技术委托")]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v("部门：")]),e._v(e._s(e.dep_name)+"  "),a("span",[e._v("负责人：")]),e._v(e._s(e.name))]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("任务类型："+e._s(e.task_type_name))]),a("p",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[e._v("参与角色")]),void 0,e._l(e.Options,function(t,i){return a("el-form",{key:i,attrs:{model:t}},[a("el-form-item",{attrs:{label:"设计"}},[a("el-select",{attrs:{disabled:e.show1,placeholder:"请选择人员"},model:{value:e.designForm.user_id[i],callback:function(t){e.$set(e.designForm.user_id,i,t)},expression:"designForm.user_id[index]"}},e._l(t.list,function(e){return a("el-option",{key:e.user_id,attrs:{label:e.name,value:e.user_id}})}),1),a("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{disabled:e.show1,type:"number",placeholder:"工时1"},model:{value:e.designForm.work_time1[i],callback:function(t){e.$set(e.designForm.work_time1,i,t)},expression:"designForm.work_time1[index]"}}),a("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{disabled:e.show1,type:"number",placeholder:"工时2"},model:{value:e.designForm.work_time2[i],callback:function(t){e.$set(e.designForm.work_time2,i,t)},expression:"designForm.work_time2[index]"}})],1)],1)}),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("任务明细")]),a("p",[e._v(e._s(e.content))]),a("p",{staticStyle:{"margin-top":"30px"}},[e._v("需要完成时间："),a("el-date-picker",{attrs:{"value-format":"timestamp",disabled:"",type:"date",placeholder:"选择日期"},model:{value:e.end_time,callback:function(t){e.end_time=t},expression:"end_time"}})],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{"margin-top":"20px"},on:{click:e.Submission}},[e._v("提交")])],2)],1)},qe=[],Oe={data:function(){var e;return e={show:!0,show1:!0,tableData:[],name:"",currentPage:0,total:0,per_page:0,last_page:0,dialogVisible:!1,designForm:{user_id:[],work_time1:[],work_time2:[]},task_id:"",zt:0},Object(k["a"])(e,"name",""),Object(k["a"])(e,"task_name",""),Object(k["a"])(e,"dep_name",""),Object(k["a"])(e,"task_type_name",""),Object(k["a"])(e,"end_time",""),Object(k["a"])(e,"content",""),Object(k["a"])(e,"Options",[]),e},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{gettableData:function(){var e=this;this.axios.get("/oa.Days/task_select").then(function(t){e.tableData=t.data.data.data,e.currentPage=t.data.data.current_page,e.total=t.data.data.total,e.per_page=t.data.data.per_page,e.last_page=t.data.data.last_page,e.zt=t.data.user_id})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/oa.Days/task_select",{page:e}).then(function(e){t.tableData=e.data.data.data,t.currentPage=e.data.data.current_page,t.total=e.data.data.total,t.per_page=e.data.data.per_page,t.last_page=e.data.data.last_page,a.close()})},seach:function(){},send:function(){this.$router.push({path:"/oa/Days/task_add/0"});var e={route:"/oa/Days/task_add/0",name:"任务发起/修改",id:a.id},t="/oa/Days/task_add/0";this.triggerAddTabs(e),this.triggerSetActiveIndex(t)},updata:function(e){this.$router.push({path:"/oa/Days/task_add/".concat(e.id)});var t={route:"/oa/Days/task_add/".concat(e.id),name:"任务发起/修改",id:e.id},a="/oa/Days/task_add/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},linqu:function(e){var t=this;this.axios.get("/oa.Days/task_assign?id="+e.id).then(function(e){t.show=!0,t.show1=!1,t.Options=e.data.role_list,t.name=e.data.data.name,t.task_name=e.data.data.task_name,t.task_type_name=e.data.data.task_type_name,t.end_time=1e3*e.data.data.end_time,t.content=e.data.data.content,t.dep_name=e.data.data.dep_name,t.dialogVisible=!0,t.task_id=e.data.data.id})},see:function(e){var t=this;this.axios.get("/oa.Days/task_assign?id="+e.id).then(function(a){t.show=!1,t.show1=!0,t.Options=a.data.role_list,t.name=a.data.data.name,t.task_name=a.data.data.task_name,t.task_type_name=a.data.data.task_type_name,t.end_time=1e3*a.data.data.end_time,t.content=a.data.data.content,t.dep_name=a.data.data.dep_name,t.dialogVisible=!0,t.task_id=e.id;var i=a.data.task_user_list;i.map(function(e){t.designForm.user_id.push(e.task_user),t.designForm.work_time1.push(e.work_time1),t.designForm.work_time2.push(e.work_time2)})})},Submission:function(){for(var e=this,t=[],a=this.designForm.user_id.length,i=0;i<a;i++){var r={user_id:this.designForm.user_id[i],work_time1:this.designForm.work_time1[i],work_time2:this.designForm.work_time2[i]};t.push(r)}this.axios.post("/oa.Days/task_assign",{task_id:this.task_id,task_user:t}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.dialogVisible=!1,e.gettableData()):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}}),activated:function(){this.gettableData()}},Ne=Oe,ze=Object(d["a"])(Ne,Ie,qe,!1,null,"2d88922c",null),Te=ze.exports,je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{model:e.formData}},[a("el-form-item",{attrs:{label:"名称","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),a("el-form-item",{attrs:{label:"类型","label-width":"90px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}},[e._v("技术委托")])],1),a("el-form-item",{attrs:{label:"部门","label-width":"90px"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},on:{change:e.xuanze},model:{value:e.formData.dep_id,callback:function(t){e.$set(e.formData,"dep_id",t)},expression:"formData.dep_id"}},e._l(e.dep,function(e){return a("el-option",{key:e.id,attrs:{label:e.dep_name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"接收人","label-width":"90px"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.formData.user_id,callback:function(t){e.$set(e.formData,"user_id",t)},expression:"formData.user_id"}},e._l(e.user,function(e){return a("el-option",{key:e.user_id,attrs:{label:e.name,value:e.user_id}})}),1)],1),a("el-form-item",{attrs:{label:"任务类型","label-width":"90px"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择任务类型或手动输入按下Enter键"},model:{value:e.formData.value,callback:function(t){e.$set(e.formData,"value",t)},expression:"formData.value"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1),a("el-form-item",{attrs:{label:"参与角色","label-width":"90px"}},[a("el-checkbox-group",{model:{value:e.formData.role,callback:function(t){e.$set(e.formData,"role",t)},expression:"formData.role"}},[a("el-checkbox",{attrs:{label:"4"}},[e._v("设计")]),a("el-checkbox",{attrs:{label:"5"}},[e._v("策划")])],1)],1),a("el-form-item",{attrs:{label:"内容","label-width":"90px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.formData.remarks,callback:function(t){e.$set(e.formData,"remarks",t)},expression:"formData.remarks"}})],1),a("el-form-item",{attrs:{label:"完成时间","label-width":"90px"}},[a("el-date-picker",{attrs:{"value-format":"timestamp",type:"date",placeholder:"选择日期"},model:{value:e.formData.end_time,callback:function(t){e.$set(e.formData,"end_time",t)},expression:"formData.end_time"}})],1),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{on:{click:e.confirm}},[e._v("提交")])],1)],1)],1)},Ue=[],Me={data:function(){return{formData:{name:"",type:"1",dep_id:"",user_id:"",role:[],value:"",remarks:"",end_time:""},options:[],dep:[{id:3,dep_name:"研发中心"}],user:[]}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{xuanze:function(e){var t=this;this.axios.post("/oa.Days/task_user_list",{id:e}).then(function(e){t.user=e.data})},confirm:function(){var e=this;0==this.$route.params.id?this.axios.post("/oa.Days/task_add",{task_name:this.formData.name,receive_user:this.formData.user_id,type:this.formData.type,task_type:this.formData.value,role:this.formData.role.join(","),content:this.formData.remarks,dep_id:this.formData.dep_id,end_time:this.formData.end_time/1e3}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/oa/Days/task_select"})):e.open(t.data.msg,"error")}):this.axios.post("/oa.Days/task_update",{task_name:this.formData.name,receive_user:this.formData.user_id,type:this.formData.type,task_type:this.formData.value,role:this.formData.role.join(","),content:this.formData.remarks,dep_id:this.formData.dep_id,end_time:this.formData.end_time/1e3,id:this.$route.params.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/oa/Days/task_select"})):e.open(t.data.msg,"error")})},getoptions:function(){var e=this;this.axios.get("/oa.Days/task_add").then(function(t){e.options=t.data.task_type_list})},open:function(e,t){this.$message({message:e,type:t})},getupdata:function(e){var t=this;this.axios.get("/oa.Days/task_update?id="+e).then(function(e){t.xuanze(e.data.dep_id),t.formData.name=e.data.task_name,t.formData.user_id=e.data.receive_user,t.formData.type="1",t.formData.value=e.data.task_type_name,t.formData.role=e.data.role.split(","),t.formData.remarks=e.data.content,t.formData.dep_id=e.data.dep_id,t.formData.end_time=1e3*e.data.end_time})}}),created:function(){this.getoptions(),this.$route.params.id>0&&this.getupdata(this.$route.params.id)}},Ee=Me,Re=Object(d["a"])(Ee,je,Ue,!1,null,"54c2254e",null),Le=Re.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_head"},[a("label",[e._v("筛选：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-select",{staticStyle:{"margin-left":"20px"},attrs:{"collapse-tags":"",placeholder:"请选择"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.options1,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-select",{staticStyle:{"margin-left":"20px"},attrs:{"collapse-tags":"",placeholder:"请选择"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},e._l(e.options2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("div",{staticClass:"box_content"},[a("el-table",{attrs:{data:e.tableData,height:"318"}},[a("el-table-column",{attrs:{prop:"companyName",label:"企业名称",fixed:""}}),a("el-table-column",{attrs:{prop:"abbreviation",label:"简称"}}),a("el-table-column",{attrs:{prop:"province",label:"省份"}}),a("el-table-column",{attrs:{prop:"city",label:"市区"}}),a("el-table-column",{attrs:{prop:"address",label:"县/区"}}),a("el-table-column",{attrs:{prop:"customer",label:"客户数"}}),a("el-table-column",{attrs:{prop:"order",label:"订单数"}}),a("el-table-column",{attrs:{prop:"contact",label:"月联系"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return e.deleteRow(t.row)}}},[e._v("\n          查看\n        ")])]}}])})],1),a("el-table",{staticStyle:{width:"100%","margin-top":"40px","text-align":"center"},attrs:{data:e.customerInfo,border:""}},[a("el-table-column",{attrs:{prop:"customerName",label:"姓名",fixed:""}}),a("el-table-column",{attrs:{prop:"customerSex",label:"性别",width:"50"}}),a("el-table-column",{attrs:{prop:"customerBumen",label:"部门"}}),a("el-table-column",{attrs:{prop:"customerZhiwei",label:"职位"}}),a("el-table-column",{attrs:{prop:"customerAge",label:"年龄",width:"50"}}),a("el-table-column",{attrs:{prop:"customerBrith",label:"生日"}}),a("el-table-column",{attrs:{prop:"customerPhone",label:"手机号"}}),a("el-table-column",{attrs:{prop:"customerZphone",label:"座机号码"}}),a("el-table-column",{attrs:{prop:"customerJibie",label:"客户级别"}}),a("el-table-column",{attrs:{prop:"customerXiadan",label:"最后下单"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return e.update(t.row)}}},[e._v("\n          更新\n        ")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"修改信息",visible:e.dialogFormVisible,width:"70%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form,inline:!0}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.form.customerName,callback:function(t){e.$set(e.form,"customerName",t)},expression:"form.customerName"}})],1),a("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"性别"},model:{value:e.form.customerSex,callback:function(t){e.$set(e.form,"customerSex",t)},expression:"form.customerSex"}},[a("el-option",{attrs:{label:"男",value:"男"}}),a("el-option",{attrs:{label:"女",value:"女"}})],1)],1),a("el-form-item",{attrs:{label:"部门","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.form.customerBumen,callback:function(t){e.$set(e.form,"customerBumen",t)},expression:"form.customerBumen"}})],1),a("el-form-item",{attrs:{label:"职位","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.form.customerZhiwei,callback:function(t){e.$set(e.form,"customerZhiwei",t)},expression:"form.customerZhiwei"}})],1),a("el-form-item",{attrs:{label:"年龄","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.form.customerAge,callback:function(t){e.$set(e.form,"customerAge",t)},expression:"form.customerAge"}})],1),a("el-form-item",{attrs:{label:"生日","label-width":e.formLabelWidth}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.form.customerBrith,callback:function(t){e.$set(e.form,"customerBrith",t)},expression:"form.customerBrith"}})],1),a("el-form-item",{attrs:{label:"手机","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.form.customerPhone,callback:function(t){e.$set(e.form,"customerPhone",t)},expression:"form.customerPhone"}})],1),a("el-form-item",{attrs:{label:"座机","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.form.customerZphone,callback:function(t){e.$set(e.form,"customerZphone",t)},expression:"form.customerZphone"}})],1),a("el-form-item",{attrs:{label:"级别","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"性别"},model:{value:e.form.customerJibie,callback:function(t){e.$set(e.form,"customerJibie",t)},expression:"form.customerJibie"}},[a("el-option",{attrs:{label:"合作客户",value:"合作客户"}}),a("el-option",{attrs:{label:"意向客户",value:"意向客户"}}),a("el-option",{attrs:{label:"普通客户",value:"普通客户"}}),a("el-option",{attrs:{label:"已离职",value:"已离职"}})],1)],1),a("el-form-item",{attrs:{label:"最后下单","label-width":"80px"}},[a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.form.customerXiadan,callback:function(t){e.$set(e.form,"customerXiadan",t)},expression:"form.customerXiadan"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("确 定")])],1)],1)],1)},Be=[],We={data:function(){return{options:[{value:"",label:"全部"},{value:"人保财险",label:"人保财险"},{value:"人保寿险",label:"人保寿险"},{value:"中国人寿",label:"中国人寿"},{value:"中国太平",label:"中国太平"},{value:"新华保险",label:"新华保险"},{value:"阳光保险",label:"阳光保险"}],options1:[{value:"1",label:"湖南"},{value:"2",label:"广西"},{value:"3",label:"上海"}],options2:[{value:"1",label:"一级"},{value:"2",label:"二级"},{value:"3",label:"三级"}],value:"",value1:"",value2:"",tableData:[],customerInfo:[],dialogFormVisible:!1,form:{customerName:"",customerSex:"",customerBumen:"",customerZhiwei:"",customerAge:"",customerBrith:"",customerPhone:"",customerZphone:"",customerJibie:"",customerXiadan:""},formLabelWidth:"50px"}},methods:{deleteRow:function(){var e=this;this.axios.get("/api/customerInfo.json").then(function(t){e.customerInfo=t.data.data})},update:function(e){this.dialogFormVisible=!0,this.form=e}},created:function(){var e=this;this.axios.get("/api/tableData.json").then(function(t){e.tableData=t.data.data})}},Ve=We,Ge=(i("8e7a"),Object(d["a"])(Ve,He,Be,!1,null,"387c4799",null)),Qe=Ge.exports,Ke=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_head"},[a("div",{staticClass:"box_head_left"},[a("label",[e._v("筛选：")]),a("el-select",{staticStyle:{width:"217px"},attrs:{filterable:"",placeholder:"请选择"},on:{change:function(t){return e.retrieval(e.value)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("el-option",{attrs:{label:"空",value:""}}),e._l(e.Customercompany,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2),a("el-select",{staticStyle:{"margin-left":"20px",width:"120px"},attrs:{"collapse-tags":"",placeholder:"请选择"},on:{change:e.retrievalCity},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})}),1),a("el-select",{staticStyle:{"margin-left":"20px",width:"120px"},attrs:{"collapse-tags":"",placeholder:"请选择"},on:{change:e.retrievalJibie},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},e._l(e.options2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("div",{staticClass:"box_head_right"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form}},[a("el-form-item",[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.character(t)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"手机号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.character(t)}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.character}},[e._v("搜索")])],1)],1)],1)]),a("div",{staticClass:"box_content"},e._l(e.customerListInfo,function(t){return a("div",{key:t.id,staticClass:"InfoInner"},[a("div",{staticClass:"InfoInnerLeft"},[a("div",{staticClass:"InfoInnerLeftImg"},[a("img",{staticStyle:{width:"100px",heigt:"100px"},attrs:{src:t.headimg},on:{click:function(a){return e.See(t)}}})]),a("div",{staticClass:"InfoInnerLeftText"},[a("p",{staticClass:"geInformation"},[e._v(e._s(t.name)+"\n            "),a("span",[e._v(e._s(1==t.gender?"男":"女"))]),a("span",[e._v(e._s(e.age(t.birthday))+"岁")]),a("span",[e._v(e._s(t.department))]),a("span",[e._v(e._s(t.position))]),a("span",[e._v("最近联系：1小时前")])]),a("p",{staticClass:"companyInformation"},[a("span",[e._v(e._s(t.company_name))]),a("span",[e._v(e._s(t.level)+"级客户")])]),a("p",{staticClass:"companyAddress"},[a("span",[a("i",{staticClass:"el-icon-location-outline",attrs:{type:"Brand"}}),e._v("\n              "+e._s(t.company_province)+e._s(t.company_city)+e._s(t.company_county)+e._s(t.address)+"\n            ")])])])]),a("div",{staticClass:"InfoInnerRight"},[a("div",{staticClass:"InfoInnerRightLeft"},[a("el-tooltip",{staticClass:"item",staticStyle:{"margin-top":"8px"},attrs:{effect:"dark",content:String(t.wechatid),placement:"top"}},[a("img",{attrs:{src:i("1573"),alt:""}})]),a("el-tooltip",{staticClass:"item",staticStyle:{"margin-top":"5px"},attrs:{effect:"dark",content:String(t.wechatid),placement:"top"}},[a("img",{attrs:{src:i("2acb"),alt:""}})]),a("el-tooltip",{staticClass:"item",staticStyle:{"margin-top":"5px"},attrs:{effect:"dark",content:String(t.working_phone),placement:"top"}},[a("img",{attrs:{src:i("3547"),alt:""}})]),a("el-tooltip",{staticClass:"item",staticStyle:{"margin-top":"5px"},attrs:{effect:"dark",content:String(t.telephone),placement:"top"}},[a("img",{attrs:{src:i("42bb"),alt:""}})])],1),a("div",{staticClass:"InfoInnerRightRight"},[a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.lianxi(t)}}},[e._v("联系"),a("br"),e._v("记录")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.gengxin(t)}}},[e._v("更新"),a("br"),e._v("记录")])],1),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.dingdan(t)}}},[e._v("订单"),a("br"),e._v("详情")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.address(t)}}},[e._v("收货"),a("br"),e._v("地址")])],1)],1)])])}),0),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)])},Je=[],Ze=(i("4917"),{data:function(){return{Customercompany:[],options2:[{value:"1",label:"一级"},{value:"2",label:"二级"},{value:"3",label:"三级"}],province:"",value:"",value1:"",value2:"",form:{name:"",phone:""},customerListInfo:[],currentPage:0,total:0,per_page:0,last_page:0}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{lianxi:function(e){this.triggerReplaceId(e),this.$router.push({path:"/CRM/Customer/lianxi/".concat(e.id)});var t={route:"/CRM/Customer/lianxi/".concat(e.id),name:"联系记录",id:e.id},a="/CRM/Customer/lianxi/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},gengxin:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/CRM/Customer/gengxin/".concat(e.id),params:{userId:e.id}});var t={route:"/CRM/Customer/gengxin/".concat(e.id),name:"更新记录",id:e.id},a="/Customer/gengxin/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},dingdan:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/CRM/Customer/dingdan/".concat(e.id)});var t={route:"/CRM/Customer/dingdan/".concat(e.id),name:"订单详情",id:e.id},a="/Customer/dingdan/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},address:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/CRM/Customer/address/".concat(e.id),params:{userId:e.id}});var t={route:"/CRM/Customer/address/".concat(e.id),name:"收货地址",id:e.id},a="/CRM/Customer/address/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},See:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/CRM/Customer/gengxin/".concat(e.id),params:{userId:e.id}});var t={route:"/CRM/Customer/gengxin/".concat(e.id),name:"更新记录",id:e.id},a="/CRM/Customer/gengxin/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/crm.Customer/customer_list",{page:e}).then(function(e){t.customerListInfo=e.data.customer.data,t.currentPage=e.data.customer.current_page,a.close()})},openFullScreen:function(){var e=this;this.fullscreenLoading=!0,setTimeout(function(){e.fullscreenLoading=!1},2e3)},getData:function(){var e=this;this.axios.get("/crm.Customer/customer_list").then(function(t){e.customerListInfo=t.data.customer.data,e.currentPage=t.data.customer.current_page,e.total=t.data.customer.total,e.per_page=t.data.customer.per_page,e.last_page=t.data.customer.last_page})},getCustomer:function(){var e=this;this.axios.get("/crm.Customer/company_list").then(function(t){var a=t.data.company;e.Customercompany=a;for(var i=0;i<a.length;i++)if(a[i].hasOwnProperty("child"))for(var r=0;r<a[i].child.length;r++)e.Customercompany.push(a[i].child[r])})},getCityData:function(){var e=this;e.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in e.province=[],a)i.match(/0000$/)&&e.province.push({id:i,value:a[i],children:[]})}})},age:function(e){var t=e.substring(0,4),a=new Date,i=a.getFullYear();return Number(i)-Number(t)},retrieval:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/crm.Customer/customer_list",{company_id:e}).then(function(e){a.close(),t.customerListInfo=e.data.customer.data,t.currentPage=e.data.customer.current_page,t.total=e.data.customer.total,t.per_page=e.data.customer.per_page,t.last_page=e.data.customer.last_page})},retrievalCity:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/crm.Customer/customer_list",{province:e}).then(function(e){a.close(),t.customerListInfo=e.data.customer.data,t.currentPage=e.data.customer.current_page,t.total=e.data.customer.total,t.per_page=e.data.customer.per_page,t.last_page=e.data.customer.last_page})},retrievalJibie:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/crm.Customer/customer_list",{level:e}).then(function(e){a.close(),t.customerListInfo=e.data.customer.data,t.currentPage=e.data.customer.current_page,t.total=e.data.customer.total,t.per_page=e.data.customer.per_page,t.last_page=e.data.customer.last_page})},character:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/crm.Customer/customer_list",{name:this.form.name,phone:this.form.phone}).then(function(a){t.close(),e.customerListInfo=a.data.customer.data,e.currentPage=a.data.customer.current_page,e.total=a.data.customer.total,e.per_page=a.data.customer.per_page,e.last_page=a.data.customer.last_page})}}),created:function(){var e=this;this.$nextTick(function(){e.getData(),e.getCustomer(),e.getCityData()})},watch:{$route:function(){var e=this;this.$nextTick(function(){e.getData()})}}}),Ye=Ze,Xe=(i("bcf0"),Object(d["a"])(Ye,Ke,Je,!1,null,"1b55b360",null)),et=Xe.exports,tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-button",{staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{type:"primary"},on:{click:e.addRecord}},[e._v("添加记录")]),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"add_time",label:"时间"}}),a("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.type.type_text))])]}}])}),a("el-table-column",{attrs:{prop:"content",label:"内容"}}),a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.update(t.row)}}},[e._v("修改")]),e.dete(t.row.add_time)?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletes(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加记录",visible:e.dialogRecord},on:{"update:visible":function(t){e.dialogRecord=t}}},[a("el-form",{attrs:{model:e.dialogRecordForm}},[a("el-form-item",{attrs:{label:"类型","label-width":"90px"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:e.dialogRecordForm.type,callback:function(t){e.$set(e.dialogRecordForm,"type",t)},expression:"dialogRecordForm.type"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"内容","label-width":"90px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.dialogRecordForm.content,callback:function(t){e.$set(e.dialogRecordForm,"content",t)},expression:"dialogRecordForm.content"}})],1),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("提交")])],1)],1)],1)],1)},at=[],it=(i("a481"),{data:function(){return{search:"",tableData:[],dialogRecord:!1,dialogRecordForm:{type:"",content:"",customer_id:"",id:""},options:[{label:"催款",value:1},{label:"客户回访",value:2},{label:"售后服务",value:3},{label:"新品推荐",value:4},{label:"意向跟踪",value:5}],currentPage:0,total:0,per_page:0,last_page:0,today:""}},methods:{getTabledata:function(){var e=this;this.axios.get("/crm.Customer/customer_record?customer_id="+this.$route.params.id).then(function(t){e.tableData=t.data.customer.data,e.currentPage=t.data.customer.current_page,e.total=t.data.customer.total,e.per_page=t.data.customer.per_page,e.last_page=t.data.customer.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/crm.Customer/customer_record",{page:e}).then(function(e){t.customerListInfo=e.data.customer.data,t.currentPage=e.data.customer.current_page,a.close()})},addRecord:function(){this.dialogRecordForm.type="",this.dialogRecordForm.content="",this.dialogRecordForm.id="",this.dialogRecord=!0},confirm:function(){var e=this;""==this.dialogRecordForm.id?this.axios.post("/crm.Customer/customer_record_add",{customer_id:this.$route.params.id,type:this.dialogRecordForm.type,content:this.dialogRecordForm.content}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getTabledata(),e.dialogRecord=!1):e.open(t.data.msg,"error")}):this.axios.post("/crm.Customer/customer_record_update",{customer_id:this.$route.params.id,id:this.dialogRecordForm.id,type:this.dialogRecordForm.type,content:this.dialogRecordForm.content}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getTabledata(),e.dialogRecord=!1):e.open(t.data.msg,"error")})},update:function(e){this.dialogRecordForm.type=e.type.type,this.dialogRecordForm.content=e.content,this.dialogRecordForm.id=e.id,this.dialogRecord=!0,console.log()},deletes:function(e){var t=this;this.axios.post("/crm.Customer/customer_record_detele",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getTabledata(),t.dialogRecord=!1):t.open(e.data.msg,"error")})},dete:function(e){var t=e.substring(0,10),a=t.replace("-",""),i=a.replace("-",""),r=this.today;return Number(r)==Number(i)},open:function(e,t){this.$message({message:e,type:t})},change:function(e){return e<10?"0"+e:e}},created:function(){var e=new Date,t=e.getFullYear(),a=this.change(e.getMonth()+1),i=this.change(e.getDate());this.today="".concat(t).concat(a).concat(i),this.getTabledata()},watch:{$route:function(e){this.$route.params.id&&this.getTabledata()}}}),rt=it,st=Object(d["a"])(rt,tt,at,!1,null,"6e869e04",null),ot=st.exports,lt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:e.form,"label-width":"80px",rules:e.rules,inline:""}},[a("el-form-item",{attrs:{label:"企业",prop:"company"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择所在企业",filterable:""},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}},e._l(e.Customercompany,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"客户级别",prop:"level"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择客户级别"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[a("el-option",{attrs:{label:"一级",value:"1"}}),a("el-option",{attrs:{label:"二级",value:"2"}}),a("el-option",{attrs:{label:"三级",value:"3"}})],1)],1),a("el-form-item",{attrs:{label:"身份证号",prop:"card"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.card,callback:function(t){e.$set(e.form,"card",t)},expression:"form.card"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"Bumen"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.Bumen,callback:function(t){e.$set(e.form,"Bumen",t)},expression:"form.Bumen"}})],1),a("el-form-item",{attrs:{label:"职位",prop:"Zhiwei"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.Zhiwei,callback:function(t){e.$set(e.form,"Zhiwei",t)},expression:"form.Zhiwei"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{staticStyle:{width:"200px"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"1"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),a("el-form-item",{attrs:{label:"客户生日",prop:"brith"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},model:{value:e.form.brith,callback:function(t){e.$set(e.form,"brith",t)},expression:"form.brith"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"座机号",prop:"Zphone"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.Zphone,callback:function(t){e.$set(e.form,"Zphone",t)},expression:"form.Zphone"}})],1),a("el-form-item",{attrs:{label:"家庭电话",prop:"Homephone"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.Homephone,callback:function(t){e.$set(e.form,"Homephone",t)},expression:"form.Homephone"}})],1),a("el-form-item",{staticStyle:{float:"left","margin-left":"20px"},attrs:{label:"客户照片",prop:"imageUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{multiple:!0,accept:"image/jpeg,image/gif,image/png,image/bmp","show-file-list":!1,action:"/File/customer_headimg/","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"QQ",prop:"QQ"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.QQ,callback:function(t){e.$set(e.form,"QQ",t)},expression:"form.QQ"}})],1),a("el-form-item",{attrs:{label:"微信",prop:"wx"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.wx,callback:function(t){e.$set(e.form,"wx",t)},expression:"form.wx"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"Email"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.Email,callback:function(t){e.$set(e.form,"Email",t)},expression:"form.Email"}})],1),a("el-form-item",{attrs:{label:"省",prop:"sheng"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince},model:{value:e.sheng,callback:function(t){e.sheng=t},expression:"sheng"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"市",prop:"shi"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity},model:{value:e.shi,callback:function(t){e.shi=t},expression:"shi"}},e._l(e.shi1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"地区",prop:"qu"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock},model:{value:e.qu,callback:function(t){e.qu=t},expression:"qu"}},e._l(e.qu1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"具体地址",prop:"address"}},[a("el-input",{staticStyle:{width:"780px"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("br"),a("el-form-item",{attrs:{label:"备注信息",prop:"desc"}},[a("el-input",{staticStyle:{width:"780px"},attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),a("el-form-item",{staticStyle:{display:"block","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("立即修改")]),a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)},nt=[],ct={data:function(){return{form:{name:"",company:"",level:"",card:"",Bumen:"",Zhiwei:"",sex:"",brith:"",phone:"",Zphone:"",Homephone:"",headImg:"",QQ:"",wx:"",Email:"",sheng:"",shi:"",qu:"",address:"",desc:"",regin:"",imageUrl:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],company:[{required:!0,message:"请选择公司",trigger:"blur"}],level:[{required:!0,message:"请选择级别",trigger:"blur"}],sheng:[{required:!0,trigger:"blur"}],shi:[{required:!0,trigger:"blur"}],qu:[{required:!0,trigger:"blur"}]},imageUrl:"",province:"",city:"",block:"",sheng:"",shi:"",shi1:[],qu:"",qu1:[],Customercompany:[]}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),console.log(e),this.form.headImg=e.src},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getCityData:function(){var e=this;e.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in e.province=[],e.city=[],e.block=[],a)i.match(/0000$/)?e.province.push({id:i,value:a[i],children:[]}):i.match(/00$/)?e.city.push({id:i,value:a[i],children:[]}):e.block.push({id:i,value:a[i]});for(var r in e.province)for(var s in e.city)e.province[r].id.slice(0,2)===e.city[s].id.slice(0,2)&&e.province[r].children.push(e.city[s]);for(var o in e.city)for(var l in e.block)e.block[l].id.slice(0,4)===e.city[o].id.slice(0,4)&&e.city[o].children.push(e.block[l])}})},choseProvince:function(e){for(var t in this.province)e===this.province[t].id&&(this.shi1=this.province[t].children,this.shi=this.province[t].children[0].value,this.qu1=this.province[t].children[0].children,this.qu=this.province[t].children[0].children[0].value,this.E=this.qu1[0].value,this.form.sheng=this.province[t].value,this.form.shi=this.province[t].children[0].value,this.form.qu=this.province[t].children[0].children[0].value)},choseCity:function(e){for(var t in this.city)e===this.city[t].id&&(this.qu1=this.city[t].children,this.qu=this.city[t].children[0].value,this.E=this.qu1[0].id,this.form.shi=this.city[t].value)},choseBlock:function(e){for(var t in this.E=e,this.block)e===this.block[t].id&&(this.form.qu=this.block[t].value)},resetForm:function(e){this.$refs[e].resetFields(),this.shi="",this.qu="",this.sheng="",this.imageUrl=""},getCustomer:function(){var e=this;this.axios.get("/crm.Customer/company_list").then(function(t){for(var a=t.data.company,i=0;i<a.length;i++){var r={name:"└".concat(a[i].name),id:a[i].id};if(e.Customercompany.push(r),a[i].hasOwnProperty("child"))for(var s=0;s<a[i].child.length;s++){var o={name:"└└".concat(a[i].child[s].name),id:a[i].child[s].id};if(e.Customercompany.push(o),a[i].child[s].hasOwnProperty("child"))for(var l=0;l<a[i].child[s].child.length;l++){var n={name:"└└└".concat(a[i].child[s].child[l].name),id:a[i].child[s].child[l].id};if(e.Customercompany.push(n),a[i].child[s].child[l].hasOwnProperty("child"))for(var c=0;c<a[i].child[s].child.length;c++)if(void 0==a[i].child[s].child[l].child[c]);else{var d={name:"└└└└".concat(a[i].child[s].child[l].child[c].name),id:a[i].child[s].child[l].child[c].id};e.Customercompany.push(d)}}}}})},add:function(){var e=this;""==this.form.company||""==this.form.name||""==this.form.sheng||""==this.form.shi||""==this.form.qu?this.open():this.axios.post("/crm.Customer/customer_update",{id:this.$route.params.id,company_id:this.form.company,name:this.form.name,department:this.form.Bumen,position:this.form.Zhiwei,gender:this.form.sex,level:this.form.level,headimg:this.form.headImg,idcard:this.form.card,working_phone:this.form.phone,family_phone:this.form.Homephone,telephone:this.form.Zphone,email:this.form.Email,wechatid:this.form.wx,province:this.form.sheng,city:this.form.shi,county:this.form.qu,address:this.form.address,birthday:this.form.brith}).then(function(t){2e3==t.data.code?(e.open1(t.data.msg,"success"),e.resetForm("form"),e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/crm/Customer/customer_list"})):e.open1(t.data.msg,"error")}).catch(function(e){this.open1("请联系管理员","error")})},open:function(){this.$message({showClose:!0,message:"请填写完整带*号的！",type:"warning"})},open1:function(e,t){this.$message({showClose:!0,message:e,type:t})},getDate:function(){var e=this;this.axios.get("/crm.Customer/customer_update?id="+this.$route.params.id).then(function(t){e.form.company=t.data.company_id,e.form.name=t.data.name,e.form.Bumen=t.data.department,e.form.Zhiwei=t.data.position,e.form.sex=t.data.gender,e.form.level=t.data.level,e.form.imageUrl=t.data.headimg,e.form.card=t.data.idcard,e.form.phone=t.data.working_phone,e.form.Homephone=t.data.family_phone,e.form.Zphone=t.data.telephone,e.form.Email=t.data.email,e.form.wx=t.data.wechatid,e.form.sheng=t.data.province,e.form.shi=t.data.city,e.form.qu=t.data.county,e.form.address=t.data.address,e.sheng=t.data.province,e.shi=t.data.city,e.qu=t.data.county,e.imageUrl=t.data.headimg,console.log(e.imageUrl)})}}),created:function(){this.getCityData(),this.getCustomer(),this.getDate()},mounted:function(){},watch:{$route:function(e){this.$route.params.id&&this.getDate()}}},dt=ct,ut=(i("35c6"),Object(d["a"])(dt,lt,nt,!1,null,"c9f29678",null)),pt=ut.exports,mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("label",[e._v("收货地址,默认第一个为收货地址")]),a("el-button",{staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("新增地址")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"收货人"}}),a("el-table-column",{attrs:{prop:"phone",label:"电话号码"}}),a("el-table-column",{attrs:{prop:"province",label:"省份"}}),a("el-table-column",{attrs:{prop:"city",label:"市区"}}),a("el-table-column",{attrs:{prop:"county",label:"地区"}}),a("el-table-column",{attrs:{prop:"address",label:"具体地址"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.modify(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"新增修改地址",visible:e.dialogFormModify},on:{"update:visible":function(t){e.dialogFormModify=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"收货人","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"电话号码","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"省份","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince},model:{value:e.sheng,callback:function(t){e.sheng=t},expression:"sheng"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"市区","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity},model:{value:e.shi,callback:function(t){e.shi=t},expression:"shi"}},e._l(e.shi1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"地区","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock},model:{value:e.qu,callback:function(t){e.qu=t},expression:"qu"}},e._l(e.qu1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"具体地址","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormModify=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addAddress}},[e._v("确 定")])],1)],1)],1)},ht=[],ft={data:function(){return{tableData:[],formLabelWidth:"120px",dialogFormModify:!1,form:{id:"",name:"",phone:"",sheng:"",shi:"",qu:"",address:""},province:"",city:"",block:"",sheng:"",shi:"",shi1:[],qu:"",qu1:[]}},created:function(){this.getCityData(),this.getData()},methods:{modify:function(e){console.log(e.id),this.dialogFormModify=!0,this.form.id=e.id,this.form.name=e.name,this.form.phone=e.phone,this.form.sheng=e.province,this.form.shi=e.city,this.form.qu=e.county,this.form.address=e.address,this.sheng=e.province,this.shi=e.city,this.qu=e.county},edit:function(e){var t=this;this.axios.post("/crm.Customer/customer_address_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.dialogFormModify=!1,t.getData()):t.open(e.data.msg,"error")})},add:function(){this.dialogFormModify=!0,this.form.id="",this.form.name="",this.form.phone="",this.form.sheng="",this.form.shi="",this.form.qu="",this.form.address="",this.sheng="",this.shi="",this.qu=""},getData:function(){var e=this;this.axios.get("/crm.Customer/customer_address_list?id="+this.$route.params.id).then(function(t){e.tableData=t.data.customer_address})},addAddress:function(){var e=this;""==this.form.id?this.axios.post("/crm.Customer/customer_address_add",{id:"",customer_id:this.$route.params.id,name:this.form.name,phone:this.form.phone,province:this.form.sheng,city:this.form.shi,county:this.form.qu,address:this.form.address}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.dialogFormModify=!1,e.getData()):e.open(t.data.msg,"error")}):this.axios.post("/crm.Customer/customer_address_update",{id:this.form.id,customer_id:this.$route.params.id,name:this.form.name,phone:this.form.phone,province:this.form.sheng,city:this.form.shi,county:this.form.qu,address:this.form.address}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.dialogFormModify=!1,e.getData()):e.open(t.data.msg,"error")})},getCityData:function(){var e=this;e.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in e.province=[],e.city=[],e.block=[],a)i.match(/0000$/)?e.province.push({id:i,value:a[i],children:[]}):i.match(/00$/)?e.city.push({id:i,value:a[i],children:[]}):e.block.push({id:i,value:a[i]});for(var r in e.province)for(var s in e.city)e.province[r].id.slice(0,2)===e.city[s].id.slice(0,2)&&e.province[r].children.push(e.city[s]);for(var o in e.city)for(var l in e.block)e.block[l].id.slice(0,4)===e.city[o].id.slice(0,4)&&e.city[o].children.push(e.block[l])}})},choseProvince:function(e){for(var t in this.province)e===this.province[t].id&&(this.shi1=this.province[t].children,this.shi=this.province[t].children[0].value,this.qu1=this.province[t].children[0].children,this.qu=this.province[t].children[0].children[0].value,this.E=this.qu1[0].value,this.form.sheng=this.province[t].value,this.form.shi=this.province[t].children[0].value,this.form.qu=this.province[t].children[0].children[0].value)},choseCity:function(e){for(var t in this.city)e===this.city[t].id&&(this.qu1=this.city[t].children,this.qu=this.city[t].children[0].value,this.E=this.qu1[0].id,this.form.shi=this.city[t].value)},choseBlock:function(e){for(var t in this.E=e,this.block)e===this.block[t].id&&(this.form.qu=this.block[t].value)},open:function(e,t){this.$message({showClose:!0,message:e,type:t})}},watch:{$route:function(e){this.$route.params.id&&this.getData()}}},_t=ft,gt=(i("b578"),Object(d["a"])(_t,mt,ht,!1,null,"28e8fab3",null)),bt=gt.exports,vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"router-template"},[a("div",{staticClass:"template-wrap"},[e._v("\n    "+e._s(e.$route.name)+"\n  ")])])},yt=[],xt={data:function(){return{}}},kt=xt,wt=(i("50d0"),Object(d["a"])(kt,vt,yt,!1,null,null,null)),St=wt.exports,At=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"router-template"},[a("div",{staticClass:"template-wrap"},[e._v("\n    "+e._s(e.$route.name)+"\n  ")])])},Ct=[],Ft={data:function(){return{}}},Pt=Ft,Dt=(i("9da6"),Object(d["a"])(Pt,At,Ct,!1,null,null,null)),$t=Dt.exports,It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"请输入内容"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"primary"},on:{click:e.addCompany}},[e._v("添加企业")]),a("el-button",{staticStyle:{float:"right"},on:{click:e.merge}},[e._v("合并")])],1),a("el-dialog",{attrs:{title:"添加企业",visible:e.dialogFormVisible,width:"70%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("div",{staticClass:"addqiyeContent"},[a("div",{staticClass:"addqiyeLeft"},[a("el-form",{ref:"addqiye",staticClass:"demo-ruleForm",attrs:{model:e.addqiye,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"公司名称",inline:!0}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入公司全称",autocomplete:"off"},model:{value:e.addqiye.company,callback:function(t){e.$set(e.addqiye,"company",t)},expression:"addqiye.company"}})],1),a("br"),a("el-form-item",{attrs:{label:"省",prop:"sheng"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince},model:{value:e.sheng,callback:function(t){e.sheng=t},expression:"sheng"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"市",prop:"shi"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity},model:{value:e.shi,callback:function(t){e.shi=t},expression:"shi"}},e._l(e.shi1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"地区",prop:"qu"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock},model:{value:e.qu,callback:function(t){e.qu=t},expression:"qu"}},e._l(e.qu1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"具体地址"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{autocomplete:"off",type:"textarea"},model:{value:e.addqiye.address,callback:function(t){e.$set(e.addqiye,"address",t)},expression:"addqiye.address"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{autocomplete:"off",type:"textarea"},model:{value:e.addqiye.remark,callback:function(t){e.$set(e.addqiye,"remark",t)},expression:"addqiye.remark"}})],1)],1)],1),a("div",{staticClass:"addqiyeRight"},[a("p",[e._v("请选择级别")]),a("p",{staticStyle:{"margin-top":"10px",color:"red"}},[e._v("当前选择级别是:"+e._s(e.level))]),a("el-tree",{ref:"tree",attrs:{data:e.data,props:e.defaultProps,"highlight-current":!0},on:{"node-click":e.handleNodeClick}})],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)]),a("div",{staticClass:"content_box"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.qiye.filter(function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}),"row-key":"id","tree-props":{children:"child"}},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"name",label:"公司名称",width:"420"}}),a("el-table-column",{attrs:{align:"center",prop:"province",label:"省"}}),a("el-table-column",{attrs:{align:"center",prop:"city",label:"市"}}),a("el-table-column",{attrs:{align:"center",prop:"county",label:"区"}}),a("el-table-column",{attrs:{width:"50",align:"right",label:"合并"}}),a("el-table-column",{attrs:{type:"selection",width:"55",label:"合并"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.updata(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.edit(t.row)}}},[e._v("删除")])]}}])})],1)],1)],1)},qt=[],Ot={data:function(){return{search:"",qiye:[],multipleSelection:[],foldList:[],addqiye:{id:"",company:"",sheng:"",shi:"",qu:"",address:"",remark:"",level:""},dialogFormVisible:!1,province:"",city:"",block:"",sheng:"",shi:"",shi1:[],qu:"",qu1:[],data:[],defaultProps:{children:"child",label:"name"},level:"",xuanzhong:0}},methods:{getData:function(){var e=this,t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get("/crm.Customer/company_list").then(function(a){e.data=a.data.company,e.qiye=a.data.company,t.close()})},handleSelectionChange:function(e){this.multipleSelection=e},add:function(){var e=this;""==this.addqiye.id?this.axios.post("/crm.Customer/company_add",{name:this.addqiye.company,province:this.addqiye.sheng,city:this.addqiye.shi,county:this.addqiye.qu,address:this.addqiye.address,remarks:this.addqiye.remark,pid:this.addqiye.level}).then(function(t){2e3==t.data.code?(e.open1(t.data.msg,"success"),e.getData(),e.$refs["addqiye"].resetFields(),e.dialogFormVisible=!1):e.open1(t.data.msg,"error")}):this.axios.post("/crm.Customer/company_update",{id:this.addqiye.id,name:this.addqiye.company,province:this.addqiye.sheng,city:this.addqiye.shi,county:this.addqiye.qu,address:this.addqiye.address,remarks:this.addqiye.remark,pid:this.addqiye.level}).then(function(t){2e3==t.data.code?(e.open1(t.data.msg,"success"),e.getData(),e.$refs["addqiye"].resetFields(),e.dialogFormVisible=!1):e.open1(t.data.msg,"error")})},merge:function(){var e=this;if(this.multipleSelection.length<2)this.open1("选中的节点低于两个或者没有选择","error");else{for(var t=[],a=[],i="",r=0;r<this.multipleSelection.length;r++)t.push(this.multipleSelection[r].name),a.push(this.multipleSelection[r].id),i+="".concat(this.multipleSelection[r].name,"ID为").concat(this.multipleSelection[r].id,"，");this.$confirm("确定将"+i+"并且以选择的第一个为主进行合并?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.post("/crm.Customer/company_hebing",{id:a}).then(function(t){2e3==t.data.code?(e.$message({type:"success",message:"合并成功!"}),e.$refs.multipleTable.clearSelection(),e.getData()):e.$message({type:"error",message:t.data.msg})})}).catch(function(){e.$message({type:"info",message:"已取消合并"})})}},addCompany:function(){this.dialogFormVisible=!0,this.addqiye.company="",this.addqiye.sheng="",this.addqiye.qu="",this.addqiye.remark="",this.addqiye.level="",this.sheng="",this.shi="",this.qu="",this.addqiye.id="",this.addqiye.address="",this.xuanzhong=0},handleNodeClick:function(e){this.addqiye.level=e.id},open:function(){this.$message.error("请填写完整，否则请取消！")},open1:function(e,t){this.$message({message:e,type:t})},updata:function(e){this.addqiye.id=e.id,this.addqiye.company=e.name,this.addqiye.sheng=e.province,this.addqiye.shi=e.city,this.addqiye.qu=e.county,this.sheng=e.province,this.shi=e.city,this.qu=e.county,this.addqiye.address=e.address,this.addqiye.remark=e.remarks,this.addqiye.level=e.pid,this.xuanzhong=e.pid,this.level=e.name,this.dialogFormVisible=!0},edit:function(e){var t=this;this.axios.post("/crm.Customer/company_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open1(e.data.msg,"success"),t.getData()):t.open1(e.data.msg,"error")})},getCityData:function(){var e=this;e.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in e.province=[],e.city=[],e.block=[],a)i.match(/0000$/)?e.province.push({id:i,value:a[i],children:[]}):i.match(/00$/)?e.city.push({id:i,value:a[i],children:[]}):e.block.push({id:i,value:a[i]});for(var r in e.province)for(var s in e.city)e.province[r].id.slice(0,2)===e.city[s].id.slice(0,2)&&e.province[r].children.push(e.city[s]);for(var o in e.city)for(var l in e.block)e.block[l].id.slice(0,4)===e.city[o].id.slice(0,4)&&e.city[o].children.push(e.block[l])}})},choseProvince:function(e){for(var t in this.province)e===this.province[t].id&&(this.shi1=this.province[t].children,this.shi=this.province[t].children[0].value,this.qu1=this.province[t].children[0].children,this.qu=this.province[t].children[0].children[0].value,this.E=this.qu1[0].value,this.addqiye.sheng=this.province[t].value,this.addqiye.shi=this.province[t].children[0].value,this.addqiye.qu=this.province[t].children[0].children[0].value)},choseCity:function(e){for(var t in this.city)e===this.city[t].id&&(0==this.city[t].children.length?(this.addqiye.qu=" ",this.qu="",this.qu1=[]):(this.qu1=this.city[t].children,this.qu=this.city[t].children[0].value),this.addqiye.shi=this.city[t].value)},choseBlock:function(e){for(var t in this.E=e,this.block)e===this.block[t].id&&(this.addqiye.qu=this.block[t].value)},resetForm:function(e){this.$refs[e].resetFields(),this.shi="",this.qu="",this.sheng=""}},created:function(){this.getData(),this.getCityData()}},Nt=Ot,zt=(i("894a"),Object(d["a"])(Nt,It,qt,!1,null,"82e87950",null)),Tt=zt.exports,jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-form",{ref:"form",staticStyle:{"margin-top":"20px"},attrs:{model:e.form,"label-width":"80px",rules:e.rules,inline:""}},[a("el-form-item",{attrs:{label:"企业",prop:"company"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择所在企业",filterable:""},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}},e._l(e.Customercompany,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"客户级别",prop:"level"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择客户级别"},model:{value:e.form.level,callback:function(t){e.$set(e.form,"level",t)},expression:"form.level"}},[a("el-option",{attrs:{label:"一级",value:"1"}}),a("el-option",{attrs:{label:"二级",value:"2"}}),a("el-option",{attrs:{label:"三级",value:"3"}})],1)],1),a("el-form-item",{attrs:{label:"身份证号",prop:"card"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.card,callback:function(t){e.$set(e.form,"card",t)},expression:"form.card"}})],1),a("el-form-item",{attrs:{label:"部门",prop:"Bumen"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.Bumen,callback:function(t){e.$set(e.form,"Bumen",t)},expression:"form.Bumen"}})],1),a("el-form-item",{attrs:{label:"职位",prop:"Zhiwei"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.Zhiwei,callback:function(t){e.$set(e.form,"Zhiwei",t)},expression:"form.Zhiwei"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-radio-group",{staticStyle:{width:"200px"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[a("el-radio",{attrs:{label:"1"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"}},[e._v("女")])],1)],1),a("el-form-item",{attrs:{label:"客户生日",prop:"brith"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期时间"},model:{value:e.form.brith,callback:function(t){e.$set(e.form,"brith",t)},expression:"form.brith"}})],1),a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"座机号",prop:"Zphone"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.Zphone,callback:function(t){e.$set(e.form,"Zphone",t)},expression:"form.Zphone"}})],1),a("el-form-item",{attrs:{label:"家庭电话",prop:"Homephone"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.Homephone,callback:function(t){e.$set(e.form,"Homephone",t)},expression:"form.Homephone"}})],1),a("el-form-item",{staticStyle:{float:"left","margin-left":"20px"},attrs:{label:"客户照片",prop:"imageUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{multiple:!0,accept:"image/jpeg,image/gif,image/png,image/bmp","show-file-list":!1,action:"/File/customer_headimg/","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"QQ",prop:"QQ"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.QQ,callback:function(t){e.$set(e.form,"QQ",t)},expression:"form.QQ"}})],1),a("el-form-item",{attrs:{label:"微信",prop:"wx"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.wx,callback:function(t){e.$set(e.form,"wx",t)},expression:"form.wx"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"Email"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:e.form.Email,callback:function(t){e.$set(e.form,"Email",t)},expression:"form.Email"}})],1),a("el-form-item",{attrs:{label:"省",prop:"sheng"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince},model:{value:e.sheng,callback:function(t){e.sheng=t},expression:"sheng"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"市",prop:"shi"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity},model:{value:e.shi,callback:function(t){e.shi=t},expression:"shi"}},e._l(e.shi1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"地区",prop:"qu"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock},model:{value:e.qu,callback:function(t){e.qu=t},expression:"qu"}},e._l(e.qu1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"具体地址",prop:"address"}},[a("el-input",{staticStyle:{width:"780px"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("br"),a("el-form-item",{attrs:{label:"备注信息",prop:"desc"}},[a("el-input",{staticStyle:{width:"780px"},attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),a("el-form-item",{staticStyle:{display:"block","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("立即创建")]),a("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)},Ut=[],Mt={data:function(){return{form:{name:"",company:"",level:"",card:"",Bumen:"",Zhiwei:"",sex:"",brith:"",phone:"",Zphone:"",Homephone:"",headImg:"",QQ:"",wx:"",Email:"",sheng:"",shi:"",qu:"",address:"",desc:"",regin:"",imageUrl:""},rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}],company:[{required:!0,message:"请选择公司",trigger:"blur"}],level:[{required:!0,message:"请选择级别",trigger:"blur"}],sheng:[{required:!0,trigger:"blur"}],shi:[{required:!0,trigger:"blur"}],qu:[{required:!0,trigger:"blur"}]},imageUrl:"",province:"",city:"",block:"",sheng:"",shi:"",shi1:[],qu:"",qu1:[],Customercompany:[]}},methods:{handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),console.log(e),this.form.headImg=e.src},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getCityData:function(){var e=this;e.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in e.province=[],e.city=[],e.block=[],a)i.match(/0000$/)?e.province.push({id:i,value:a[i],children:[]}):i.match(/00$/)?e.city.push({id:i,value:a[i],children:[]}):e.block.push({id:i,value:a[i]});for(var r in e.province)for(var s in e.city)e.province[r].id.slice(0,2)===e.city[s].id.slice(0,2)&&e.province[r].children.push(e.city[s]);for(var o in e.city)for(var l in e.block)e.block[l].id.slice(0,4)===e.city[o].id.slice(0,4)&&e.city[o].children.push(e.block[l])}})},choseProvince:function(e){for(var t in this.province)e===this.province[t].id&&(this.shi1=this.province[t].children,this.shi=this.province[t].children[0].value,this.qu1=this.province[t].children[0].children,this.qu=this.province[t].children[0].children[0].value,this.E=this.qu1[0].value,this.form.sheng=this.province[t].value,this.form.shi=this.province[t].children[0].value,this.form.qu=this.province[t].children[0].children[0].value)},choseCity:function(e){for(var t in this.city)e===this.city[t].id&&(0==this.city[t].children.length?(this.form.qu=" ",this.qu="",this.qu1=[]):(this.qu1=this.city[t].children,this.qu=this.city[t].children[0].value),this.form.shi=this.city[t].value)},choseBlock:function(e){for(var t in this.E=e,this.block)e===this.block[t].id&&(this.form.qu=this.block[t].value)},resetForm:function(e){this.$refs[e].resetFields(),this.shi="",this.qu="",this.sheng="",this.imageUrl=""},getCustomer:function(){var e=this;this.axios.get("/crm.Customer/company_list").then(function(t){for(var a=t.data.company,i=0;i<a.length;i++){var r={name:"└".concat(a[i].name),id:a[i].id};if(e.Customercompany.push(r),a[i].hasOwnProperty("child"))for(var s=0;s<a[i].child.length;s++){var o={name:"└└".concat(a[i].child[s].name),id:a[i].child[s].id};if(e.Customercompany.push(o),a[i].child[s].hasOwnProperty("child"))for(var l=0;l<a[i].child[s].child.length;l++){var n={name:"└└└".concat(a[i].child[s].child[l].name),id:a[i].child[s].child[l].id};if(e.Customercompany.push(n),a[i].child[s].child[l].hasOwnProperty("child"))for(var c=0;c<a[i].child[s].child.length;c++)if(void 0==a[i].child[s].child[l].child[c]);else{var d={name:"└└└└".concat(a[i].child[s].child[l].child[c].name),id:a[i].child[s].child[l].child[c].id};e.Customercompany.push(d)}}}}})},add:function(){var e=this;""==this.form.company||""==this.form.name||""==this.form.sheng||""==this.form.shi||""==this.form.qu?this.open():this.axios.post("/crm.Customer/customer_add",{company_id:this.form.company,name:this.form.name,department:this.form.Bumen,position:this.form.Zhiwei,gender:this.form.sex,level:this.form.level,headimg:this.form.headImg,idcard:this.form.card,working_phone:this.form.phone,family_phone:this.form.Homephone,telephone:this.form.Zphone,email:this.form.Email,wechatid:this.form.wx,province:this.form.sheng,city:this.form.shi,county:this.form.qu,address:this.form.address,birthday:this.form.brith}).then(function(t){2e3==t.data.code?(e.open1(t.data.msg,"success"),e.resetForm("form")):e.open1(t.data.msg,"error")}).catch(function(e){this.open1("请联系管理员","error")})},open:function(){this.$message({showClose:!0,message:"请填写完整带*号的！",type:"warning"})},open1:function(e,t){this.$message({showClose:!0,message:e,type:t})}},created:function(){this.getCityData(),this.getCustomer()}},Et=Mt,Rt=(i("ce1d"),Object(d["a"])(Et,jt,Ut,!1,null,"1a0d12b8",null)),Lt=Rt.exports,Ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"请输入内容"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seach}},[e._v("搜索")]),a("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"primary"},on:{click:e.addCompany}},[e._v("添加付款账号")])],1),a("div",{staticClass:"conten_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"公司",prop:"company_id"}}),a("el-table-column",{attrs:{label:"付款账号",prop:"payment_account"}}),a("el-table-column",{attrs:{label:"付款人",prop:"payment_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")])]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加企业付款人",visible:e.dialogNumber},on:{"update:visible":function(t){e.dialogNumber=t}}},[a("el-form",{attrs:{model:e.formNumbers}},[a("el-form-item",{attrs:{label:"公司","label-width":"90px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formNumbers.type,callback:function(t){e.$set(e.formNumbers,"type",t)},expression:"formNumbers.type"}},[e._v("企业")]),a("el-radio",{attrs:{label:"0"},model:{value:e.formNumbers.type,callback:function(t){e.$set(e.formNumbers,"type",t)},expression:"formNumbers.type"}},[e._v("个人")])],1),a("el-form-item",{attrs:{label:"公司","label-width":"90px"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.formNumbers.company_id,callback:function(t){e.$set(e.formNumbers,"company_id",t)},expression:"formNumbers.company_id"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"付款人","label-width":"90px"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.formNumbers.payment_name,callback:function(t){e.$set(e.formNumbers,"payment_name",t)},expression:"formNumbers.payment_name"}})],1),a("el-form-item",{attrs:{label:"付款账号","label-width":"90px"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.formNumbers.payment_account,callback:function(t){e.$set(e.formNumbers,"payment_account",t)},expression:"formNumbers.payment_account"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogNumber=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)],1)],1)},Bt=[],Wt={data:function(){return{search:"",tableData:[],dialogNumber:!1,formNumbers:{type:"",company_id:"",payment_name:"",payment_account:"",id:""},options:[],currentPage:"",total:"",per_page:"",last_page:""}},methods:{gettableData:function(){var e=this;this.axios.get("/crm.Customer/company_drawee_lists").then(function(t){e.tableData=t.data.company_drawee})},add:function(){var e=this;this.dialogNumber=!1,""==this.formNumbers.id?this.axios.post("/crm.Customer/company_drawee_add",{type:this.formNumbers.type,company_id:this.formNumbers.company_id,payment_name:this.formNumbers.payment_name,payment_account:this.formNumbers.payment_account}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.dialogNumber=!1,e.gettableData()):e.open(t.data.msg,"error")}):this.axios.post("/crm.Customer/company_drawee_update",{type:this.formNumbers.type,company_id:this.formNumbers.company_id,payment_name:this.formNumbers.payment_name,payment_account:this.formNumbers.payment_account,id:this.formNumbers.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.dialogNumber=!1,e.gettableData()):e.open(t.data.msg,"error")})},getoptions:function(){var e=this;this.axios.get("/crm.Customer/company_list").then(function(t){e.options=t.data.company})},addCompany:function(){this.getoptions(),this.dialogNumber=!0,this.formNumbers.type="",this.formNumbers.company_id="",this.formNumbers.payment_name="",this.formNumbers.payment_account="",this.formNumbers.id=""},edit:function(e){this.dialogNumber=!0,this.formNumbers.type=String(e.type),this.formNumbers.company_id=e.company_id,this.formNumbers.payment_name=e.payment_name,this.formNumbers.payment_account=e.payment_account,this.formNumbers.id=e.id},deteles:function(){},seach:function(){},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettableData()},watch:{$route:function(e){this.gettableData()}}},Vt=Wt,Gt=Object(d["a"])(Vt,Ht,Bt,!1,null,null,null),Qt=Gt.exports,Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("el-select",{attrs:{filterable:"",placeholder:"请输入公司关键词"},on:{change:e.kehuName},model:{value:e.state4,callback:function(t){e.state4=t},expression:"state4"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{filterable:"",placeholder:"请选择客户名称"},on:{change:e.xzaddress},model:{value:e.kehuValue,callback:function(t){e.kehuValue=t},expression:"kehuValue"}},e._l(e.listKuhuName,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("div",{staticClass:"riqi"},[a("div",{staticClass:"xiaohou"},[a("span",[e._v("销售日期")]),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{type:"date",disabled:"",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.starttime,callback:function(t){e.starttime=t},expression:"starttime"}})],1),a("div",{staticClass:"fahuo"},[a("span",[e._v("收货日期")]),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.endtime,callback:function(t){e.endtime=t},expression:"endtime"}})],1)]),a("div",{staticClass:"danxuan"},[a("div",{staticClass:"danxuan1",staticStyle:{float:"left"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("商品")]),a("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("农产品")]),a("el-radio",{attrs:{label:"3"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("服务")])],1),a("div",{staticClass:"danxuan1",staticStyle:{"margin-left":"100px",float:"left"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("传统")]),a("el-radio",{attrs:{label:"2"},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("线上")]),a("el-radio",{attrs:{label:"3"},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("京东")])],1),a("br"),a("div",{staticClass:"beizhu",staticStyle:{overflow:"hidden","margin-top":"20px"}},[a("span",{staticStyle:{float:"left","line-height":"40px","margin-right":"10px"}},[e._v("备注")]),a("el-input",{staticStyle:{float:"left",width:"90%"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),a("br"),a("div",{staticClass:"danxuan2"},[a("h4",[e._v("发票信息")]),e._l(e.InvoiceType[Number(e.radio)-1],function(t,i){return a("el-radio",{key:i,attrs:{label:t.id},model:{value:e.piao,callback:function(t){e.piao=t},expression:"piao"}},[e._v(e._s(t.name)+e._s(t.type)+e._s(t.percentile))])})],2)])],1),a("div",{staticClass:"content_box_product"},[a("el-button",{on:{click:e.addOrder}},[e._v("添加产品")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,"show-summary":""}},[a("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"80"}}),a("el-table-column",{attrs:{label:"数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],attrs:{size:"small",value:t.row.number},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.number))])]}}])}),a("el-table-column",{attrs:{label:"成本",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cost_price))])]}}])}),a("el-table-column",{attrs:{label:"单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],attrs:{size:"small",value:t.row.selling_price},model:{value:t.row.selling_price,callback:function(a){e.$set(t.row,"selling_price",a)},expression:"scope.row.selling_price"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.selling_price))])]}}])}),a("el-table-column",{attrs:{label:"总价",width:"80",prop:"total_price"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("keepTowNum")(Number(t.row.selling_price)*Number(t.row.number))))])]}}])}),a("el-table-column",{attrs:{label:"额外提成",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:t.row.commission}},[a("el-table-column",{attrs:{property:"user_name",label:"业务员"}}),a("el-table-column",{attrs:{property:"ratio",label:"提成系数"}}),a("el-table-column",{attrs:{label:"修改",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){return e.editRoyalty(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(a){return e.deleteRoyalty(t.row)}}},[e._v("删除")])]}}],null,!0)})],1),a("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("查看")])],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.addRoyalty(t.row)}}},[e._v("添加")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.commission_price))])]}}])}),a("el-table-column",{attrs:{label:"预计利润"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("keepTowNum")(Number(t.row.total_price)-Number(t.row.user_price)-Number(t.row.total_cost_price))))])]}}])}),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true "}],attrs:{size:"small",value:t.row.remarks},model:{value:t.row.remarks,callback:function(a){e.$set(t.row,"remarks",a)},expression:"scope.row.remarks"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.remarks))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}],attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.Editors(t.$index)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],attrs:{type:"success",size:"mini"},on:{click:function(a){return e.updata(t.row,t.$index)}}},[e._v("完成")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletep(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"产品库选择",visible:e.product,width:"65%"},on:{"update:visible":function(t){e.product=t}}},[a("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.tableProductSeach(t)}},model:{value:e.tableProductValue,callback:function(t){e.tableProductValue=t},expression:"tableProductValue"}}),a("el-button",{staticStyle:{"margin-left":"5%"},on:{click:e.tableProductSeach}},[e._v("筛选")]),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableProduct}},[a("el-table-column",{attrs:{label:"产品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"售价"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(a){return e.add(t.row)}}},[e._v("\n                添加\n              ")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"提成添加修改",visible:e.Royalty},on:{"update:visible":function(t){e.Royalty=t}}},[a("el-form",{attrs:{data:e.formRoyalty}},[a("el-form-item",{attrs:{label:"业务员","label-width":"100px"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{change:e.pickRatio},model:{value:e.formRoyalty.name,callback:function(t){e.$set(e.formRoyalty,"name",t)},expression:"formRoyalty.name"}},e._l(e.optionsSalesman,function(e){return a("el-option",{key:e.user_id,attrs:{label:""+e.dep_title+e.role_name+e.name,value:e.user_id}})}),1)],1),a("el-form-item",{attrs:{label:"提成系数","label-width":"100px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.formRoyalty.xishu,callback:function(t){e.$set(e.formRoyalty,"xishu",t)},expression:"formRoyalty.xishu"}})],1)],1),a("el-table",{attrs:{data:e.xianRoyalty}},[a("el-table-column",{attrs:{property:"user_name",label:"业务员"}}),a("el-table-column",{attrs:{property:"ratio",label:"提成系数"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(a){return e.deleteRoyalty(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.Royalty=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.pushRoyalty}},[e._v("确 定")])],1)],1),a("div",{staticClass:"content_box_address"},[a("div",{staticClass:"content_box_address_left"},[a("div",{staticClass:"content_box_address_head"},[a("el-button",{on:{click:e.changeAddress}},[e._v("选择地址")]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"success"},on:{click:function(t){e.dialogExcel=!0}}},[e._v("上传文件")])],1),a("el-form",{ref:"formAddress",attrs:{model:e.formAddress,inline:""}},[a("el-form-item",[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"名字"},model:{value:e.formAddress.name,callback:function(t){e.$set(e.formAddress,"name",t)},expression:"formAddress.name"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"电话"},model:{value:e.formAddress.phone,callback:function(t){e.$set(e.formAddress,"phone",t)},expression:"formAddress.phone"}})],1),a("br"),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"付款方式"},model:{value:e.formAddress.payment,callback:function(t){e.$set(e.formAddress,"payment",t)},expression:"formAddress.payment"}},[a("el-option",{attrs:{label:"到付",value:"1"}}),a("el-option",{attrs:{label:"现付",value:"2"}})],1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"物流方式"},model:{value:e.formAddress.delivery,callback:function(t){e.$set(e.formAddress,"delivery",t)},expression:"formAddress.delivery"}},[a("el-option",{attrs:{label:"上门",value:"1"}}),a("el-option",{attrs:{label:"上楼",value:"2"}}),a("el-option",{attrs:{label:"自提",value:"3"}})],1)],1),a("br"),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince},model:{value:e.sheng,callback:function(t){e.sheng=t},expression:"sheng"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity},model:{value:e.shi,callback:function(t){e.shi=t},expression:"shi"}},e._l(e.shi1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock},model:{value:e.qu,callback:function(t){e.qu=t},expression:"qu"}},e._l(e.qu1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("br"),a("el-form-item",[a("el-input",{staticStyle:{width:"590px"},attrs:{placeholder:"具体地址"},model:{value:e.formAddress.address,callback:function(t){e.$set(e.formAddress,"address",t)},expression:"formAddress.address"}})],1),a("br"),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.tijiao}},[e._v("保存地址配货信息")])],1)],1)],1),a("div",{staticClass:"content_box_address_right"},[a("h4",[e._v("配货数量填写")]),e._l(e.distributeProduct,function(t){return a("div",{key:t.id,staticClass:"content_box_address_right_inner"},[a("p",{staticStyle:{float:"left",width:"90px",height:"40px","line-height":"40px"}},[e._v(e._s(t.name)+e._s(t.sku_name))]),a("el-input",{staticStyle:{float:"left",width:"100px"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}})],1)})],2)]),a("el-dialog",{attrs:{title:"地址选择",visible:e.address},on:{"update:visible":function(t){e.address=t}}},[a("div",{staticClass:"ChoiceAddress",staticStyle:{height:"400px","overflow-y":"scroll"}},e._l(e.ChoiceAddress,function(t){return a("div",{key:t.id,staticClass:"ChoiceAddressInner"},[a("div",{staticClass:"ChoiceAddressInnerLeft"},[a("p",[e._v("收货人："+e._s(t.name)+"  收货电话："+e._s(t.phone))]),a("p",[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.address))])])]),a("div",{staticClass:"ChoiceAddressInnerRight"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.addAddress(t)}}},[e._v("选择")])],1)])}),0)]),a("div",{staticClass:"generatedAddress"},[a("label",[e._v("地址配货信息")]),a("hr"),e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v("付款方式:"+e._s(1==t.payment?"到付":"现付"))]),1==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上门")]):e._e(),2==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上楼")]):e._e(),3==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:自提")]):e._e()]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n              "),e._l(t.product,function(t){return a("span",{key:t.pid,staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2)]),a("div",{staticClass:"generatedAddressInnerRight"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.generatedAddressgengxin(t)}}},[e._v("更新")]),a("br"),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"danger"},on:{click:function(a){return e.generatedAddressshanchu(t)}}},[e._v("删除")])],1)])})],2),a("el-dialog",{attrs:{title:"更新地址配货信息",visible:e.gengxinfixedAddress,width:"65%"},on:{"update:visible":function(t){e.gengxinfixedAddress=t}}},[a("el-form",{attrs:{model:e.fixedAddressform,inline:""}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.fixedAddressform.name,callback:function(t){e.$set(e.fixedAddressform,"name",t)},expression:"fixedAddressform.name"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.fixedAddressform.phone,callback:function(t){e.$set(e.fixedAddressform,"phone",t)},expression:"fixedAddressform.phone"}})],1),a("el-form-item",{attrs:{label:"物流"}},[a("el-input",{model:{value:e.fixedAddressform.wuliu,callback:function(t){e.$set(e.fixedAddressform,"wuliu",t)},expression:"fixedAddressform.wuliu"}})],1),a("br"),a("el-form-item",{attrs:{label:"省"}},[a("el-input",{model:{value:e.fixedAddressform.sheng,callback:function(t){e.$set(e.fixedAddressform,"sheng",t)},expression:"fixedAddressform.sheng"}})],1),a("el-form-item",{attrs:{label:"市"}},[a("el-input",{model:{value:e.fixedAddressform.shi,callback:function(t){e.$set(e.fixedAddressform,"shi",t)},expression:"fixedAddressform.shi"}})],1),a("el-form-item",{attrs:{label:"区"}},[a("el-input",{model:{value:e.fixedAddressform.qu,callback:function(t){e.$set(e.fixedAddressform,"qu",t)},expression:"fixedAddressform.qu"}})],1),a("br"),a("el-form-item",{attrs:{label:"具体地址"}},[a("el-input",{staticStyle:{width:"260%"},model:{value:e.fixedAddressform.address,callback:function(t){e.$set(e.fixedAddressform,"address",t)},expression:"fixedAddressform.address"}})],1)],1),a("div",e._l(e.distributeProduct1,function(t){return a("div",{key:t.product_sku_id,staticClass:"content_box_address_right_inner"},[a("p",{staticStyle:{float:"left",width:"90px",height:"40px","line-height":"40px"}},[e._v(e._s(t.name)+e._s(t.sku_name))]),a("el-input",{staticStyle:{float:"left",width:"100px"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}})],1)}),0),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.gengxinfixedAddress=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.pushgengxinfixedAddress}},[e._v("确 定")])],1)],1),a("div",{staticClass:"contract"},[a("label",[e._v("上传合同")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"contractInnerLeft"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:"image/jpeg,image/gif,image/png,image/bmp",action:"/file/customer_order_img","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrlstate,expression:"imageUrlstate"}],staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.deleteimg(t.src)}}})])])}),0)])]),a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认提交")]),a("el-dialog",{attrs:{title:"文件",visible:e.dialogExcel,width:"1000px"},on:{"update:visible":function(t){e.dialogExcel=t}}},[a("excel",{attrs:{distributeProduct:e.distributeProduct,customer_order_id:e.customer_order_id},on:{chuan:e.getchildmsg}})],1)],1)},Jt=[],Zt=(i("7514"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-button",{attrs:{type:"primary"},on:{click:e.dao}},[e._v("导入")]),a("el-button",{attrs:{type:"success"},on:{click:e.xiazai}},[e._v("下载模板")]),a("input",{staticStyle:{display:"none"},attrs:{id:"upload",type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:function(t){return e.importfxx(this)}}}),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData,width:"1000px"}},e._l(e.keys,function(t,i){return a("el-table-column",{key:i,attrs:{label:e.keys[i],prop:e.keys[i]}})}),1),0!=e.tableData.length?a("el-button",{staticStyle:{"margin-top":"20px",float:"right"},attrs:{type:"primary"},on:{click:e.add}},[e._v("确认提交数据")]):e._e()],1)],1)}),Yt=[],Xt=(i("6762"),i("2fdb"),i("34ef"),{data:function(){return{tableData:[],keys:[],province:[],city:[],block:[],map:[]}},props:["distributeProduct","customer_order_id"],methods:{xiazai:function(){var e=this;i.e("chunk-39257bb2").then(function(){for(var t=i("b10a"),a=t.export_json_to_excel,r=["收货人","电话","具体地址","省","付款方式","送货方式"],s=["name","phone","address","province"],o=0;o<e.distributeProduct.length;o++)r.unshift("".concat(e.distributeProduct[o].name).concat(e.distributeProduct[o].sku_name).concat(e.distributeProduct[o].class_name));var l=e.tableData,n=e.formatJson(s,l);a(r,n,"模板")}.bind(null,i)).catch(i.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},dao:function(){document.getElementById("upload").click(),this.tableData=[],this.keys=[]},importfxx:function(e){var t=this;this.$refs.inputer;this.file=event.currentTarget.files[0];var a=!1,r=this.file,s=new FileReader,o=t.$loading({lock:!0,text:"数据正在处理中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){o.close()},3e3),FileReader.prototype.readAsBinaryString=function(e){var a,r,s="",o=!1,l=new FileReader;l.onload=function(e){for(var n=new Uint8Array(l.result),c=n.byteLength,d=0;d<c;d++)s+=String.fromCharCode(n[d]);var u=i("1146");a=o?u.read(btoa(fixdata(s)),{type:"base64"}):u.read(s,{type:"binary"}),r=u.utils.sheet_to_json(a.Sheets[a.SheetNames[0]]);for(var p=function(e){t.province.filter(function(a){a.value==r[e]["省"]&&(t.map=a.children,0!=t.map.length?(t.map.filter(function(a){r[e]["具体地址"].includes(a.value)&&(r[e]["市"]=a.value,r[e]["区"]=" ",t.map=a.children,console.log(a))}),0!=t.map.length&&t.map.filter(function(a){r[e]["具体地址"].includes(a.value)&&(r[e]["区"]=a.value,t.map=[])})):t.$message({message:"表格请写入省份",type:"error"}))})},m=0;m<r.length;m++)p(m);for(var h in t.tableData=r,r[0])r[0].hasOwnProperty(h)&&t.keys.push(h)},l.readAsArrayBuffer(e)},a?s.readAsArrayBuffer(r):s.readAsBinaryString(r)},analyzeData:function(e){return e},dealFile:function(e){console.log(e),this.imFile.value="",this.fullscreenLoading=!1,e.length<=0?(this.errorDialog=!0,this.errorMsg="请导入正确信息"):this.excelData=e},add:function(){var e=this;this.axios.post("/crm.Order/customer_order_address_add",{arr:this.tableData,param:"import",customer_order_id:this.customer_order_id}).then(function(t){2e3==t.data.code?e.$emit("chuan","1"):e.$message({message:t.data.msg,type:"error"})})}},created:function(){var e=this;this.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in a)i.match(/0000$/)?e.province.push({id:i,value:a[i],children:[]}):i.match(/00$/)?e.city.push({id:i,value:a[i],children:[]}):e.block.push({id:i,value:a[i]});for(var r in e.province)for(var s in e.city)e.province[r].id.slice(0,2)===e.city[s].id.slice(0,2)&&e.province[r].children.push(e.city[s]);for(var o in e.city)for(var l in e.block)e.block[l].id.slice(0,4)===e.city[o].id.slice(0,4)&&e.city[o].children.push(e.block[l])}})}}),ea=Xt,ta=(i("ee51"),Object(d["a"])(ea,Zt,Yt,!1,null,"35272296",null)),aa=ta.exports,ia={components:{excel:aa},data:function(){var e;return e={InvoiceType:[[{id:"a1",type:"专票",name:"湖南可为文化传播有限公司",percentile:"13%"},{id:"a2",type:"专票",name:"湖南润家润科技有限公司",percentile:"13%"},{id:"a3",type:"专票",name:"长沙市芙蓉区日升文化用品商行",percentile:"3%"},{id:"a4",type:"专票",name:"长沙吾福田信息咨询合伙企业（有限合伙）",percentile:"3%"},{id:"a5",type:"普票",name:"湖南可为文化传播有限公司",percentile:"13%"},{id:"a6",type:"普票",name:"湖南润家润科技有限公司",percentile:"13%"},{id:"a7",type:"普票",name:"长沙市芙蓉区日升文化用品商行",percentile:"3%"},{id:"a8",type:"普票",name:"长沙吾福田信息咨询合伙企业（有限合伙）",percentile:"3%"},{id:"a9",type:"其他",name:"",percentile:"0%"}],[{id:"b1",type:"专票",name:"湖南可为文化传播有限公司",percentile:"9%"},{id:"b2",type:"专票",name:"湖南润家润科技有限公司",percentile:"9%"},{id:"b3",type:"普票",name:"湖南可为文化传播有限公司",percentile:"9%"},{id:"b4",type:"普票",name:"湖南润家润科技有限公司",percentile:"9%"},{id:"b5",type:"其他",name:"",percentile:"0%"}],[{id:"c1",type:"专票",name:"湖南可为文化传播有限公司",percentile:"6%"},{id:"c2",type:"专票",name:"湖南润家润科技有限公司",percentile:"6%"},{id:"c3",type:"专票",name:"长沙市芙蓉区日升文化用品商行",percentile:"3%"},{id:"c4",type:"专票",name:"长沙吾福田信息咨询合伙企业（有限合伙）",percentile:"3%"},{id:"c5",type:"普票",name:"湖南可为文化传播有限公司",percentile:"6%"},{id:"c6",type:"普票",name:"湖南润家润科技有限公司",percentile:"6%"},{id:"c7",type:"普票",name:"长沙市芙蓉区日升文化用品商行",percentile:"3%"},{id:"c8",type:"普票",name:"长沙吾福田信息咨询合伙企业（有限合伙）",percentile:"3%"},{id:"c9",type:"其他",name:"",percentile:"0%"}]],options:[],state4:"",kehuValue:"",starttime:"",endtime:"",radio:"1",piao:"",class_id:"1",remarks:"",tableProduct:[],loading:!1,currentPage:"",total:"",per_page:"",last_page:"",product:!1,tableProductValue:"",Royalty:!1,customer_order_id:"",tableData:[],edit:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],formRoyalty:{name:"",bumen:"",xishu:"",product_sku_id:"",id:""},xianRoyalty:[],optionsSalesman:[],address:!1,formAddress:{name:"",phone:"",sheng:"",shi:"",qu:"",payment:"",delivery:"",address:"",id:""},province:"",city:"",block:"",sheng:"",shi:"",shi1:[],qu:"",qu1:[],ChoiceAddress:[],distributeProduct:[],fixedAddress:[],fixedAddressform:{id:null,name:"",phone:"",wuliu:"",sheng:"",shi:"",qu:"",address:"",customer_address_id:""},distributeProduct1:[],addressProduct:[],gengxinfixedAddress:!1},Object(k["a"])(e,"loading",!1),Object(k["a"])(e,"list",[]),Object(k["a"])(e,"listKuhuName",[]),Object(k["a"])(e,"imageUrl",[]),Object(k["a"])(e,"imageUrlType",[]),Object(k["a"])(e,"imageUrlstate",!1),Object(k["a"])(e,"dialogExcel",!1),e},filters:{keepTowNum:function(e){return e=Number(e),e.toFixed(2)}},methods:{getoptions:function(){var e=this;this.axios.get("/crm.Customer/company_list").then(function(t){for(var a=t.data.company,i=0;i<a.length;i++){var r={name:"└".concat(a[i].name),id:a[i].id};if(e.options.push(r),a[i].hasOwnProperty("child"))for(var s=0;s<a[i].child.length;s++){var o={name:"└└".concat(a[i].child[s].name),id:a[i].child[s].id};if(e.options.push(o),a[i].child[s].hasOwnProperty("child"))for(var l=0;l<a[i].child[s].child.length;l++){var n={name:"└└└".concat(a[i].child[s].child[l].name),id:a[i].child[s].child[l].id};if(e.options.push(n),a[i].child[s].child[l].hasOwnProperty("child"))for(var c=0;c<a[i].child[s].child.length;c++)if(void 0==a[i].child[s].child[l].child[c]);else{var d={name:"└└└└".concat(a[i].child[s].child[l].child[c].name),id:a[i].child[s].child[l].child[c].id};e.options.push(d)}}}}})},kehuName:function(e){var t=this;t.axios.post("/crm.Customer/customer_select",{company_id:e}).then(function(e){0==e.data.customer.length&&(t.kehuValue=""),t.listKuhuName=e.data.customer})},xzaddress:function(e){var t=this;this.listKuhuName.filter(function(a){a.id==e&&(t.sheng=a.province,t.shi=a.city,t.qu=a.county,t.formAddress.address=a.address,t.formAddress.name=a.name,t.formAddress.phone=a.working_phone,t.formAddress.sheng=a.province,t.formAddress.shi=a.city,t.formAddress.qu=a.county,t.formAddress.id=a.company_id)})},addOrder:function(){""==this.customer_order_id?""==this.endtime||""==this.state4||""==this.starttime||""==this.kehuValue||""==this.piao?this.open("请把客户信息下单时间类型勾选完整","error"):this.PostaddOrder():(this.getProduct(),this.getChoiceAddress(this.kehuValue),this.product=!0)},PostaddOrder:function(){var e,t=this;this.InvoiceType[0].filter(function(a){a.id==t.piao&&(e=a)}),this.InvoiceType[1].filter(function(a){a.id==t.piao&&(e=a)}),this.InvoiceType[2].filter(function(a){a.id==t.piao&&(e=a)}),this.axios.post("/crm.Order/order_add",{customer_id:this.kehuValue,sales_time:this.starttime,delivery_time:this.endtime,type_id:this.radio,invoice_name:e.name,invoice_type:e.type,invoice_tax:e.percentile.substring(0,e.percentile.length-1),class_id:this.class_id,remarks:this.remarks}).then(function(e){2e3==e.data.code?(t.getProduct(),t.getChoiceAddress(t.kehuValue),t.customer_order_id=e.data.id,t.product=!0):t.open(e.data.msg,"error")})},getProduct:function(){var e=this;this.axios.get("/erp.product/product_sku_select").then(function(t){e.tableProduct=t.data.product.data,e.currentPage=t.data.product.current_page,e.total=t.data.product.total,e.per_page=t.data.product.per_page,e.last_page=t.data.product.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.product/product_sku_select",{page:e}).then(function(e){t.tableProduct=e.data.product.data,t.currentPage=e.data.product.current_page,a.close()})},tableProductSeach:function(){var e=this;this.axios.post("/erp.product/product_sku_select",{name:this.tableProductValue}).then(function(t){e.tableProduct=t.data.product.data,e.currentPage=t.data.product.current_page,e.total=t.data.product.total,e.per_page=t.data.product.per_page,e.last_page=t.data.product.last_page})},add:function(e){var t=this;this.axios.post("/crm.Order/customer_order_product_sku_add",{customer_order_id:this.customer_order_id,product_sku_id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData(t.customer_order_id),t.gettableData1(t.customer_order_id)):t.open(e.data.msg,"error")})},gettableData:function(e){var t=this;this.axios.get("/crm.Order/customer_order_product_sku_select?customer_order_id="+e).then(function(e){t.tableData=e.data.product_sku})},gettableData1:function(e){var t=this;this.axios.get("/crm.Order/customer_order_product_sku_select?customer_order_id="+e).then(function(e){t.distributeProduct=e.data.product_sku})},Editors:function(e){var t=this;this.loading=!0,this.edit[e]=!0,setTimeout(function(){t.loading=!1},3e3),this.getcaogao()},updata:function(e,t){var a=this;""==e.number?this.open("数量不能为空","error"):""==e.selling_price?this.open("单价不能为空","error"):this.axios.post("/crm.Order/customer_order_product_sku_update",{id:e.id,number:e.number,unit_price:e.unit_price,selling_price:e.selling_price,remarks:e.remarks}).then(function(e){2e3==e.data.code?(a.edit[t]=!1,a.open(e.data.msg,"success"),a.gettableData(a.customer_order_id),a.gettableData1(a.customer_order_id)):a.open(e.data.msg,"error")})},deletep:function(e){var t=this;this.axios.post("/crm.Order/customer_order_product_sku_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData(t.customer_order_id),t.gettableData1(t.customer_order_id)):t.open(e.data.msg,"error")})},addRoyalty:function(e){this.formRoyalty.name="",this.formRoyalty.xishu="",this.formRoyalty.id="",this.formRoyalty.product_sku_id=e.id,this.xianRoyalty=e.commission,this.Royalty=!0},editRoyalty:function(e){this.formRoyalty.name=e.user_id,this.formRoyalty.xishu=e.ratio,this.formRoyalty.id=e.id,this.Royalty=!0},deleteRoyalty:function(e){var t=this;this.axios.post("/crm.Order/customer_order_commission_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData(t.customer_order_id),t.Royalty=!1):t.open(e.data.msg,"error")})},pickRatio:function(e){var t={};t=this.optionsSalesman.find(function(t){return t.user_id===e}),this.formRoyalty.xishu=t.ratio},pushRoyalty:function(){var e=this;""==this.formRoyalty.id?this.axios.post("/crm.Order/customer_order_commission_add",{customer_order_product_id:this.formRoyalty.product_sku_id,user_id:this.formRoyalty.name,ratio:this.formRoyalty.xishu,profit:"",customer_order_id:this.customer_order_id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.gettableData(e.customer_order_id),e.Royalty=!1):e.open(t.data.msg,"error")}):this.axios.post("/crm.Order/customer_order_commission_update",{id:this.formRoyalty.id,user_id:this.formRoyalty.name,ratio:this.formRoyalty.xishu,profit:"",customer_order_id:this.customer_order_id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.gettableData(e.customer_order_id),e.Royalty=!1):e.open(t.data.msg,"error")})},changeAddress:function(){this.address=!0,this.getChoiceAddress(this.kehuValue)},getChoiceAddress:function(e){var t=this;this.axios.get("/crm.Customer/customer_address_list?id="+e).then(function(e){t.ChoiceAddress=e.data.customer_address})},addAddress:function(e){this.sheng=e.province,this.shi=e.city,this.qu=e.county,this.formAddress.address=e.address,this.formAddress.name=e.name,this.formAddress.phone=e.phone,this.formAddress.sheng=e.province,this.formAddress.shi=e.city,this.formAddress.qu=e.county,this.formAddress.id=e.id,this.address=!1},tijiao:function(){var e=this;""==this.formAddress.id?""==this.formAddress.address||""==this.formAddress.name||""==this.formAddress.phone||""==this.formAddress.sheng||""==this.formAddress.shi||""==this.formAddress.qu?this.open("请填写完整客户收货地址","error"):this.axios.post("/crm.Customer/customer_address_add",{customer_id:this.kehuValue,name:this.formAddress.name,phone:this.formAddress.phone,province:this.formAddress.sheng,city:this.formAddress.shi,county:this.formAddress.qu,address:this.formAddress.address,payment:this.formAddress.payment,delivery:this.formAddress.delivery}).then(function(t){2e3==t.data.code?e.posttijiao(t.data.id):e.open(t.data.msg,"error")}):this.posttijiao(this.formAddress.id)},posttijiao:function(e){for(var t=this,a=[],i=0;i<this.distributeProduct.length;i++){var r={number:this.distributeProduct[i].number,customer_order_product_sku_id:this.distributeProduct[i].id};a.push(r)}""==a[0].number?this.open("配货数量不能为空"):this.axios.post("/crm.Order/customer_order_address_add",{customer_order_id:this.customer_order_id,customer_address_id:e,name:this.formAddress.name,phone:this.formAddress.phone,province:this.formAddress.sheng,city:this.formAddress.shi,county:this.formAddress.qu,address:this.formAddress.address,payment:this.formAddress.payment,delivery:this.formAddress.delivery,product:a}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.formAddress.address="",t.formAddress.name="",t.formAddress.phone="",t.formAddress.sheng="",t.formAddress.shi="",t.formAddress.qu="",t.formAddress.payment="",t.formAddress.delivery="",t.formAddress.id="",t.sheng="",t.shi="",t.qu="",a=[],t.getfixedAddress(),t.getChoiceAddress(kehuValue)):t.open(e.data.msg,"error")})},getfixedAddress:function(){var e=this;this.axios.get("/crm.Order/customer_order_address_select?customer_order_id="+this.customer_order_id).then(function(t){e.fixedAddress=t.data.address})},generatedAddressgengxin:function(e){this.gengxinfixedAddress=!0,this.fixedAddressform.id=e.id,this.fixedAddressform.name=e.name,this.fixedAddressform.phone=e.phone,this.fixedAddressform.wuliu=e.type,this.fixedAddressform.sheng=e.province,this.fixedAddressform.shi=e.city,this.fixedAddressform.qu=e.county,this.fixedAddressform.address=e.address,this.fixedAddressform.customer_address_id=e.customer_address_id,this.distributeProduct1=e.product},pushgengxinfixedAddress:function(){for(var e=this,t=[],a=0;a<this.distributeProduct1.length;a++){var i={number:this.distributeProduct1[a].number,customer_order_product_sku_id:this.distributeProduct1[a].customer_order_product_sku_id};t.push(i)}this.axios.post("/crm.Order/customer_order_address_update",{id:this.fixedAddressform.id,customer_order_id:this.customer_order_id,customer_address_id:this.fixedAddressform.customer_address_id,name:this.fixedAddressform.name,phone:this.fixedAddressform.phone,province:this.fixedAddressform.sheng,city:this.fixedAddressform.shi,county:this.fixedAddressform.qu,address:this.fixedAddressform.address,type:this.fixedAddressform.wuliu,product:t}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getfixedAddress(),e.gengxinfixedAddress=!1):e.open(t.data.msg,"error")})},generatedAddressshanchu:function(e){var t=this;this.axios.post("/crm.Order/customer_order_address_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getfixedAddress()):t.open(e.data.msg,"error")})},getCityData:function(){var e=this;e.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in e.province=[],e.city=[],e.block=[],a)i.match(/0000$/)?e.province.push({id:i,value:a[i],children:[]}):i.match(/00$/)?e.city.push({id:i,value:a[i],children:[]}):e.block.push({id:i,value:a[i]});for(var r in e.province)for(var s in e.city)e.province[r].id.slice(0,2)===e.city[s].id.slice(0,2)&&e.province[r].children.push(e.city[s]);for(var o in e.city)for(var l in e.block)e.block[l].id.slice(0,4)===e.city[o].id.slice(0,4)&&e.city[o].children.push(e.block[l])}})},choseProvince:function(e){for(var t in this.province)e===this.province[t].id&&(this.shi1=this.province[t].children,this.shi=this.province[t].children[0].value,this.qu1=this.province[t].children[0].children,this.qu=this.province[t].children[0].children[0].value,this.E=this.qu1[0].value,this.formAddress.sheng=this.province[t].value,this.formAddress.shi=this.province[t].children[0].value,this.formAddress.qu=this.province[t].children[0].children[0].value)},choseCity:function(e){for(var t in this.city)e===this.city[t].id&&(0==this.city[t].children.length?(this.formAddress.qu=" ",this.qu="",this.qu1=[]):(this.qu1=this.city[t].children,this.qu=this.city[t].children[0].value),this.formAddress.shi=this.city[t].value)},choseBlock:function(e){for(var t in this.E=e,this.block)e===this.block[t].id&&(this.formAddress.qu=this.block[t].value)},handleAvatarSuccess:function(){this.getimgUrl(this.customer_order_id)},beforeAvatarUpload:function(e){var t=e.type;this.imageUrlType.push(t);var a="image/jpeg"===e.type||"image/png"===e.type,i=e.size/1024/1024<2;return a||this.$message.error("上传图片必须是JPG/PNG格式!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&i},getimgUrl:function(e){var t=this;this.axios.get("/crm.Order/customer_order_file_select?id="+e+"&class=customer_order").then(function(e){null!=e.data?(t.imageUrlstate=!0,t.imageUrl=e.data.customer_order):(t.imageUrlstate=!1,t.imageUrl=[])})},deleteimg:function(e){var t=this;this.axios.post("/file/customer_order_delete",{src:e,class:"customer_order"}).then(function(e){2e3==e.data.code&&t.getimgUrl(t.customer_order_id)})},confirm:function(){var e,t=this;0!==this.imageUrl.length?(this.InvoiceType[0].filter(function(a){a.id==t.piao&&(e=a)}),this.InvoiceType[1].filter(function(a){a.id==t.piao&&(e=a)}),this.InvoiceType[2].filter(function(a){a.id==t.piao&&(e=a)}),this.axios.post("/crm.Order/order_update",{id:this.customer_order_id,status:"1",customer_id:this.kehuValue,sales_time:this.starttime,delivery_time:this.endtime,invoice_name:e.name,invoice_type:e.type,invoice_tax:e.percentile.substring(0,e.percentile.length-1),type_id:this.radio}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.state4="",t.listKuhuName="",t.kehuValue="",t.starttime="",t.endtime="",t.piao="",t.radio="",t.customer_order_id="",t.tableProduct=[],t.currentPage="",t.total="",t.per_page="",t.last_page="",t.tableData=[],t.ChoiceAddress=[],t.distributeProduct=[],t.fixedAddress=[],t.distributeProduct1=[],t.addressProduct=[],t.imageUrl=[],t.imageUrlType=[],t.imageUrlstate=!1):t.open(e.data.msg,"error")})):this.open("合同没有上传！","error")},open:function(e,t){this.$message({message:e,type:t})},getcaogao:function(){var e=this;this.axios.get("/crm.Order/order_update?id=0").then(function(t){var a;void 0===t.data.order&&(e.state4=t.data.company_name,e.kehuName(t.data.company_id),e.kehuValue=t.data.customer_id,e.starttime=t.data.sales_time,e.endtime=t.data.delivery_time,e.radio=String(t.data.type_id),e.remarks=t.data.remarks,e.customer_order_id=t.data.id,e.gettableData(t.data.id),e.gettableData1(t.data.id),e.getChoiceAddress(t.data.customer_id),e.getfixedAddress(t.data.id),e.getimgUrl(t.data.id),e.InvoiceType[t.data.type_id-1].filter(function(e){"".concat(e.name).concat(e.type)=="".concat(t.data.invoice_name).concat(t.data.invoice_type)&&(a=e)}),e.piao=a.id,e.class_id=String(t.data.class_id));e.optionsSalesman=t.data.user})},getchildmsg:function(e){1==e&&(this.getfixedAddress(),this.dialogExcel=!1,this.open("上传成功","success"))},change:function(e){return e<10?"0"+e:e}},activated:function(){var e=new Date,t=e.getFullYear(),a=this.change(e.getMonth()+1),i=this.change(e.getDate()),r=this.change(e.getHours()),s=this.change(e.getMinutes()),o=this.change(e.getSeconds());this.starttime=t+"-"+a+"-"+i+" "+r+":"+s+":"+o,this.getCityData(),this.getcaogao(),this.getoptions()}},ra=ia,sa=(i("6429"),Object(d["a"])(ra,Kt,Jt,!1,null,"64b0dc7c",null)),oa=sa.exports,la=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("el-select",{attrs:{filterable:"",disabled:10==e.status,placeholder:"请输入公司关键词"},on:{change:e.kehuName},model:{value:e.state4,callback:function(t){e.state4=t},expression:"state4"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{disabled:10==e.status,filterable:"",placeholder:"请选择客户名称"},on:{change:e.xzaddress},model:{value:e.kehuValue,callback:function(t){e.kehuValue=t},expression:"kehuValue"}},e._l(e.listKuhuName,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("div",{staticClass:"riqi"},[a("div",{staticClass:"xiaohou"},[a("span",[e._v("销售日期")]),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{disabled:"",type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.starttime,callback:function(t){e.starttime=t},expression:"starttime"}})],1),a("div",{staticClass:"fahuo"},[a("span",[e._v("收货日期")]),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{disabled:10==e.status,type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.endtime,callback:function(t){e.endtime=t},expression:"endtime"}})],1)]),a("div",{staticClass:"danxuan"},[a("div",{staticClass:"danxuan1",staticStyle:{float:"left"}},[a("el-radio",{attrs:{disabled:10==e.status,label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("商品")]),a("el-radio",{attrs:{disabled:10==e.status,label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("农产品")]),a("el-radio",{attrs:{disabled:10==e.status,label:"3"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("服务")])],1),a("div",{staticClass:"danxuan1",staticStyle:{"margin-left":"100px",float:"left"}},[a("el-radio",{attrs:{label:"1",disabled:10==e.status},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("传统")]),a("el-radio",{attrs:{label:"2",disabled:10==e.status},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("线上")]),a("el-radio",{attrs:{label:"3",disabled:10==e.status},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("京东")])],1),a("br"),a("div",{staticClass:"beizhu",staticStyle:{overflow:"hidden","margin-top":"20px"}},[a("span",{staticStyle:{float:"left","line-height":"40px","margin-right":"10px"}},[e._v("备注")]),a("el-input",{staticStyle:{float:"left",width:"90%"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),a("br"),a("div",{staticClass:"danxuan2"},[a("h4",[e._v("发票信息")]),e._l(e.InvoiceType[Number(e.radio)-1],function(t,i){return a("el-radio",{key:i,attrs:{disabled:10==e.status,label:t.id},model:{value:e.piao,callback:function(t){e.piao=t},expression:"piao"}},[e._v(e._s(t.name)+e._s(t.type)+e._s(t.percentile))])})],2)])],1),a("div",{staticClass:"content_box_product"},[a("el-button",{attrs:{disabled:10==e.status},on:{click:e.addOrder}},[e._v("添加产品")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,"show-summary":""}},[a("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"80"}}),a("el-table-column",{attrs:{label:"数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],attrs:{size:"small",value:t.row.number},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.number))])]}}])}),a("el-table-column",{attrs:{label:"成本",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cost_price))])]}}])}),a("el-table-column",{attrs:{label:"单价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true "}],attrs:{size:"small",value:t.row.selling_price},model:{value:t.row.selling_price,callback:function(a){e.$set(t.row,"selling_price",a)},expression:"scope.row.selling_price"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.selling_price))])]}}])}),a("el-table-column",{attrs:{label:"总价",prop:"total_price",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("keepTowNum")(t.row.selling_price*t.row.number)))])]}}])}),a("el-table-column",{attrs:{label:"额外提成",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true "}],attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:t.row.commission}},[a("el-table-column",{attrs:{property:"user_name",label:"业务员"}}),a("el-table-column",{attrs:{property:"ratio",label:"提成系数"}}),a("el-table-column",{attrs:{label:"修改",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{disabled:10==e.status,type:"danger",size:"mini"},nativeOn:{click:function(a){return e.editRoyalty(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{disabled:10==e.status,type:"warning",size:"mini"},nativeOn:{click:function(a){return e.deleteRoyalty(t.row)}}},[e._v("删除")])]}}],null,!0)})],1),a("el-button",{attrs:{slot:"reference",disabled:10==e.status,type:"text",size:"mini"},slot:"reference"},[e._v("查看")])],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true "}],staticStyle:{"margin-left":"5px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.addRoyalty(t.row)}}},[e._v("添加")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.commission_price))])]}}])}),a("el-table-column",{attrs:{label:"预计利润"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("keepTowNum")(Number(t.row.total_price)-Number(t.row.user_price)-Number(t.row.total_cost_price))))])]}}])}),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true "}],attrs:{size:"small",value:t.row.remarks},model:{value:t.row.remarks,callback:function(a){e.$set(t.row,"remarks",a)},expression:"scope.row.remarks"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.remarks))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}],attrs:{disabled:10==e.status,type:"warning",size:"mini"},on:{click:function(a){return e.Editors(t.$index)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],attrs:{disabled:10==e.status,type:"success",size:"mini"},on:{click:function(a){return e.updata(t.row,t.$index)}}},[e._v("完成")]),a("el-button",{attrs:{type:"danger",disabled:10==e.status,size:"mini"},on:{click:function(a){return e.deletep(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"产品库选择",visible:e.product,width:"65%"},on:{"update:visible":function(t){e.product=t}}},[a("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.tableProductSeach(t)}},model:{value:e.tableProductValue,callback:function(t){e.tableProductValue=t},expression:"tableProductValue"}}),a("el-button",{staticStyle:{"margin-left":"5%"},on:{click:e.tableProductSeach}},[e._v("筛选")]),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableProduct}},[a("el-table-column",{attrs:{label:"产品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"售价"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(a){return e.add(t.row)}}},[e._v("\n                添加\n              ")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"提成添加修改",visible:e.Royalty},on:{"update:visible":function(t){e.Royalty=t}}},[a("el-form",{attrs:{data:e.formRoyalty}},[a("el-form-item",{attrs:{label:"业务员","label-width":"100px"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},on:{change:e.pickRatio},model:{value:e.formRoyalty.name,callback:function(t){e.$set(e.formRoyalty,"name",t)},expression:"formRoyalty.name"}},e._l(e.optionsSalesman,function(e){return a("el-option",{key:e.user_id,attrs:{label:""+e.dep_title+e.role_name+e.name,value:e.user_id}})}),1)],1),a("el-form-item",{attrs:{label:"提成系数","label-width":"100px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.formRoyalty.xishu,callback:function(t){e.$set(e.formRoyalty,"xishu",t)},expression:"formRoyalty.xishu"}})],1)],1),a("el-table",{attrs:{data:e.xianRoyalty}},[a("el-table-column",{attrs:{property:"user_name",label:"业务员"}}),a("el-table-column",{attrs:{property:"ratio",label:"提成系数"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",size:"mini"},nativeOn:{click:function(a){return e.deleteRoyalty(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.Royalty=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.pushRoyalty}},[e._v("确 定")])],1)],1),a("div",{staticClass:"content_box_address"},[a("div",{staticClass:"content_box_address_left"},[a("div",{staticClass:"content_box_address_head"},[a("el-button",{on:{click:function(t){e.address=!0}}},[e._v("选择地址")]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"success"},on:{click:function(t){e.dialogExcel=!0}}},[e._v("上传文件")])],1),a("el-form",{ref:"formAddress",attrs:{model:e.formAddress,inline:""}},[a("el-form-item",[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"名字"},model:{value:e.formAddress.name,callback:function(t){e.$set(e.formAddress,"name",t)},expression:"formAddress.name"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"电话"},model:{value:e.formAddress.phone,callback:function(t){e.$set(e.formAddress,"phone",t)},expression:"formAddress.phone"}})],1),a("br"),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"付款方式"},model:{value:e.formAddress.payment,callback:function(t){e.$set(e.formAddress,"payment",t)},expression:"formAddress.payment"}},[a("el-option",{attrs:{label:"到付",value:"1"}}),a("el-option",{attrs:{label:"现付",value:"2"}})],1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"物流方式"},model:{value:e.formAddress.delivery,callback:function(t){e.$set(e.formAddress,"delivery",t)},expression:"formAddress.delivery"}},[a("el-option",{attrs:{label:"上门",value:"1"}}),a("el-option",{attrs:{label:"上楼",value:"2"}}),a("el-option",{attrs:{label:"自提",value:"3"}})],1)],1),a("br"),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince},model:{value:e.sheng,callback:function(t){e.sheng=t},expression:"sheng"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity},model:{value:e.shi,callback:function(t){e.shi=t},expression:"shi"}},e._l(e.shi1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock},model:{value:e.qu,callback:function(t){e.qu=t},expression:"qu"}},e._l(e.qu1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("br"),a("el-form-item",[a("el-input",{staticStyle:{width:"590px"},attrs:{placeholder:"具体地址"},model:{value:e.formAddress.address,callback:function(t){e.$set(e.formAddress,"address",t)},expression:"formAddress.address"}})],1),a("br"),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.tijiao}},[e._v("保存地址配货信息")])],1)],1)],1),a("div",{staticClass:"content_box_address_right"},[a("h4",[e._v("配货数量填写")]),e._l(e.distributeProduct,function(t){return a("div",{key:t.id,staticClass:"content_box_address_right_inner"},[a("p",{staticStyle:{float:"left",width:"90px",height:"40px","line-height":"40px"}},[e._v(e._s(t.name)+e._s(t.sku_name))]),a("el-input",{staticStyle:{float:"left",width:"100px"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}})],1)})],2)]),a("el-dialog",{attrs:{title:"地址选择",visible:e.address},on:{"update:visible":function(t){e.address=t}}},[a("div",{staticClass:"ChoiceAddress",staticStyle:{height:"400px","overflow-y":"scroll"}},e._l(e.ChoiceAddress,function(t){return a("div",{key:t.id,staticClass:"ChoiceAddressInner"},[a("div",{staticClass:"ChoiceAddressInnerLeft"},[a("p",[e._v("收货人："+e._s(t.name)+"  收货电话："+e._s(t.phone))]),a("p",[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.address))])])]),a("div",{staticClass:"ChoiceAddressInnerRight"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return e.addAddress(t)}}},[e._v("选择")])],1)])}),0)]),a("div",{staticClass:"generatedAddress"},[a("label",[e._v("地址配货信息")]),a("hr"),e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v("付款方式:"+e._s(1==t.payment?"到付":"现付"))]),1==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上门")]):e._e(),2==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上楼")]):e._e(),3==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:自提")]):e._e()]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n              "),e._l(t.product,function(t){return a("span",{key:t.pid,staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2)]),a("div",{staticClass:"generatedAddressInnerRight"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.generatedAddressgengxin(t)}}},[e._v("更新")]),a("br"),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"danger"},on:{click:function(a){return e.generatedAddressshanchu(t)}}},[e._v("删除")])],1)])})],2),a("el-dialog",{attrs:{title:"更新地址配货信息",visible:e.gengxinfixedAddress,width:"65%"},on:{"update:visible":function(t){e.gengxinfixedAddress=t}}},[a("el-form",{attrs:{model:e.fixedAddressform,inline:""}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.fixedAddressform.name,callback:function(t){e.$set(e.fixedAddressform,"name",t)},expression:"fixedAddressform.name"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.fixedAddressform.phone,callback:function(t){e.$set(e.fixedAddressform,"phone",t)},expression:"fixedAddressform.phone"}})],1),a("el-form-item",{attrs:{label:"物流"}},[a("el-input",{model:{value:e.fixedAddressform.wuliu,callback:function(t){e.$set(e.fixedAddressform,"wuliu",t)},expression:"fixedAddressform.wuliu"}})],1),a("br"),a("el-form-item",{attrs:{label:"省"}},[a("el-input",{model:{value:e.fixedAddressform.sheng,callback:function(t){e.$set(e.fixedAddressform,"sheng",t)},expression:"fixedAddressform.sheng"}})],1),a("el-form-item",{attrs:{label:"市"}},[a("el-input",{model:{value:e.fixedAddressform.shi,callback:function(t){e.$set(e.fixedAddressform,"shi",t)},expression:"fixedAddressform.shi"}})],1),a("el-form-item",{attrs:{label:"区"}},[a("el-input",{model:{value:e.fixedAddressform.qu,callback:function(t){e.$set(e.fixedAddressform,"qu",t)},expression:"fixedAddressform.qu"}})],1),a("br"),a("el-form-item",{attrs:{label:"具体地址"}},[a("el-input",{staticStyle:{width:"260%"},model:{value:e.fixedAddressform.address,callback:function(t){e.$set(e.fixedAddressform,"address",t)},expression:"fixedAddressform.address"}})],1)],1),a("div",e._l(e.distributeProduct1,function(t){return a("div",{key:t.product_sku_id,staticClass:"content_box_address_right_inner"},[a("p",{staticStyle:{float:"left",width:"90px",height:"40px","line-height":"40px"}},[e._v(e._s(t.name)+e._s(t.sku_name))]),a("el-input",{staticStyle:{float:"left",width:"100px"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}})],1)}),0),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.gengxinfixedAddress=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.pushgengxinfixedAddress}},[e._v("确 定")])],1)],1),a("div",{staticClass:"contract"},[a("label",[e._v("上传合同")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"contractInnerLeft"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:10==e.status,accept:"image/jpeg,image/gif,image/png,image/bmp",action:"/file/customer_order_img","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrlstate,expression:"imageUrlstate"}],staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.deleteimg(t.src)}}})])])}),0)])]),a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",disabled:10==e.status},on:{click:e.confirm}},[e._v("确认提交")]),a("el-dialog",{attrs:{title:"文件",visible:e.dialogExcel,width:"1000px"},on:{"update:visible":function(t){e.dialogExcel=t}}},[a("excel",{attrs:{distributeProduct:e.distributeProduct,customer_order_id:e.customer_order_id},on:{chuan:e.getchildmsg}})],1)],1)},na=[],ca={components:{excel:aa},data:function(){var e;return e={InvoiceType:[[{id:"a1",type:"专票",name:"湖南可为文化传播有限公司",percentile:"13%"},{id:"a2",type:"专票",name:"湖南润家润科技有限公司",percentile:"13%"},{id:"a3",type:"专票",name:"长沙市芙蓉区日升文化用品商行",percentile:"3%"},{id:"a4",type:"专票",name:"长沙吾福田信息咨询合伙企业（有限合伙）",percentile:"3%"},{id:"a5",type:"普票",name:"湖南可为文化传播有限公司",percentile:"13%"},{id:"a6",type:"普票",name:"湖南润家润科技有限公司",percentile:"13%"},{id:"a7",type:"普票",name:"长沙市芙蓉区日升文化用品商行",percentile:"3%"},{id:"a8",type:"普票",name:"长沙吾福田信息咨询合伙企业（有限合伙）",percentile:"3%"},{id:"a9",type:"其他",name:"",percentile:"0%"}],[{id:"b1",type:"专票",name:"湖南可为文化传播有限公司",percentile:"9%"},{id:"b2",type:"专票",name:"湖南润家润科技有限公司",percentile:"9%"},{id:"b3",type:"普票",name:"湖南可为文化传播有限公司",percentile:"9%"},{id:"b4",type:"普票",name:"湖南润家润科技有限公司",percentile:"9%"},{id:"b5",type:"其他",name:"",percentile:"0%"}],[{id:"c1",type:"专票",name:"湖南可为文化传播有限公司",percentile:"6%"},{id:"c2",type:"专票",name:"湖南润家润科技有限公司",percentile:"6%"},{id:"c3",type:"专票",name:"长沙市芙蓉区日升文化用品商行",percentile:"3%"},{id:"c4",type:"专票",name:"长沙吾福田信息咨询合伙企业（有限合伙）",percentile:"3%"},{id:"c5",type:"普票",name:"湖南可为文化传播有限公司",percentile:"6%"},{id:"c6",type:"普票",name:"湖南润家润科技有限公司",percentile:"6%"},{id:"c7",type:"普票",name:"长沙市芙蓉区日升文化用品商行",percentile:"3%"},{id:"c8",type:"普票",name:"长沙吾福田信息咨询合伙企业（有限合伙）",percentile:"3%"},{id:"c9",type:"其他",name:"",percentile:"0%"}]],options:[],state4:"",kehuValue:"",starttime:"",endtime:"",radio:"",piao:"",class_id:"",remarks:"",tableProduct:[],loading:!1,currentPage:"",total:"",per_page:"",last_page:"",product:!1,tableProductValue:"",Royalty:!1,customer_order_id:"",tableData:[],status:"",edit:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],formRoyalty:{name:"",bumen:"",xishu:"",product_sku_id:"",id:""},xianRoyalty:[],optionsSalesman:[],address:!1,formAddress:{name:"",phone:"",sheng:"",shi:"",qu:"",payment:"",delivery:"",address:"",id:""},province:"",city:"",block:"",sheng:"",shi:"",shi1:[],qu:"",qu1:[],ChoiceAddress:[],distributeProduct:[],fixedAddress:[],fixedAddressform:{id:null,name:"",phone:"",wuliu:"",sheng:"",shi:"",qu:"",address:"",customer_address_id:""},distributeProduct1:[],addressProduct:[],gengxinfixedAddress:!1},Object(k["a"])(e,"loading",!1),Object(k["a"])(e,"list",[]),Object(k["a"])(e,"listKuhuName",[]),Object(k["a"])(e,"imageUrl",[]),Object(k["a"])(e,"imageUrlType",[]),Object(k["a"])(e,"imageUrlstate",!1),Object(k["a"])(e,"dialogExcel",!1),e},filters:{keepTowNum:function(e){return e=Number(e),e.toFixed(2)}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{getoptions:function(){var e=this;this.axios.get("/crm.Customer/company_list").then(function(t){for(var a=t.data.company,i=0;i<a.length;i++){var r={name:"└".concat(a[i].name),id:a[i].id};if(e.options.push(r),a[i].hasOwnProperty("child"))for(var s=0;s<a[i].child.length;s++){var o={name:"└└".concat(a[i].child[s].name),id:a[i].child[s].id};if(e.options.push(o),a[i].child[s].hasOwnProperty("child"))for(var l=0;l<a[i].child[s].child.length;l++){var n={name:"└└└".concat(a[i].child[s].child[l].name),id:a[i].child[s].child[l].id};if(e.options.push(n),a[i].child[s].child[l].hasOwnProperty("child"))for(var c=0;c<a[i].child[s].child.length;c++)if(void 0==a[i].child[s].child[l].child[c]);else{var d={name:"└└└└".concat(a[i].child[s].child[l].child[c].name),id:a[i].child[s].child[l].child[c].id};e.options.push(d)}}}}})},kehuName:function(e){var t=this;t.axios.post("/crm.Customer/customer_select",{company_id:e}).then(function(e){0==e.data.customer.length&&(t.kehuValue=""),t.listKuhuName=e.data.customer})},addOrder:function(){this.getProduct(),this.getChoiceAddress(this.kehuValue),this.product=!0},getProduct:function(){var e=this;this.axios.get("/erp.product/product_sku_select").then(function(t){e.tableProduct=t.data.product.data,e.currentPage=t.data.product.current_page,e.total=t.data.product.total,e.per_page=t.data.product.per_page,e.last_page=t.data.product.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.product/product_sku_select",{page:e}).then(function(e){t.tableProduct=e.data.product.data,t.currentPage=e.data.product.current_page,a.close()})},xzaddress:function(e){var t=this;this.listKuhuName.filter(function(a){a.id==e&&(t.sheng=a.province,t.shi=a.city,t.qu=a.county,t.formAddress.address=a.address,t.formAddress.name=a.name,t.formAddress.phone=a.working_phone,t.formAddress.sheng=a.province,t.formAddress.shi=a.city,t.formAddress.qu=a.county,t.formAddress.id=a.company_id)})},tableProductSeach:function(){var e=this;this.axios.post("/erp.product/product_sku_select",{name:this.tableProductValue}).then(function(t){e.tableProduct=t.data.product.data,e.currentPage=t.data.product.current_page,e.total=t.data.product.total,e.per_page=t.data.product.per_page,e.last_page=t.data.product.last_page})},add:function(e){var t=this;this.axios.post("/crm.Order/customer_order_product_sku_add",{customer_order_id:this.customer_order_id,product_sku_id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData(t.customer_order_id),t.gettableData1(t.customer_order_id)):t.open(e.data.msg,"error")})},gettableData:function(e){var t=this;this.axios.get("/crm.Order/customer_order_product_sku_select?customer_order_id="+e).then(function(e){t.tableData=e.data.product_sku})},gettableData1:function(e){var t=this;this.axios.get("/crm.Order/customer_order_product_sku_select?customer_order_id="+e).then(function(e){t.distributeProduct=e.data.product_sku})},Editors:function(e){var t=this;this.loading=!0,this.edit[e]=!0,setTimeout(function(){t.loading=!1},3e3),this.getcaogao()},updata:function(e,t){var a=this;this.axios.post("/crm.Order/customer_order_product_sku_update",{id:e.id,number:e.number,unit_price:e.unit_price,selling_price:e.selling_price,remarks:e.remarks}).then(function(e){2e3==e.data.code?(a.edit[t]=!1,a.open(e.data.msg,"success"),a.gettableData(a.customer_order_id),a.gettableData1(a.customer_order_id)):a.open(e.data.msg,"error")})},deletep:function(e){var t=this;this.axios.post("/crm.Order/customer_order_product_sku_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData(t.customer_order_id),t.gettableData1(t.customer_order_id)):t.open(e.data.msg,"error")})},addRoyalty:function(e){this.formRoyalty.name="",this.formRoyalty.xishu="",this.formRoyalty.id="",this.formRoyalty.product_sku_id=e.id,this.xianRoyalty=e.commission,this.Royalty=!0},editRoyalty:function(e){this.formRoyalty.name=e.user_id,this.formRoyalty.xishu=e.ratio,this.formRoyalty.id=e.id,this.Royalty=!0},deleteRoyalty:function(e){var t=this;this.axios.post("/crm.Order/customer_order_commission_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData(t.customer_order_id),t.Royalty=!1):t.open(e.data.msg,"error")})},pickRatio:function(e){var t={};t=this.optionsSalesman.find(function(t){return t.user_id===e}),this.formRoyalty.xishu=t.ratio},pushRoyalty:function(){var e=this;""==this.formRoyalty.id?this.axios.post("/crm.Order/customer_order_commission_add",{customer_order_product_id:this.formRoyalty.product_sku_id,user_id:this.formRoyalty.name,ratio:this.formRoyalty.xishu,profit:"",customer_order_id:this.customer_order_id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.gettableData(e.customer_order_id),e.Royalty=!1):e.open(t.data.msg,"error")}):this.axios.post("/crm.Order/customer_order_commission_update",{id:this.formRoyalty.id,user_id:this.formRoyalty.name,ratio:this.formRoyalty.xishu,profit:"",customer_order_id:this.customer_order_id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.gettableData(e.customer_order_id),e.Royalty=!1):e.open(t.data.msg,"error")})},getChoiceAddress:function(e){var t=this;this.axios.get("/crm.Customer/customer_address_list?id="+e).then(function(e){t.ChoiceAddress=e.data.customer_address})},addAddress:function(e){this.sheng=e.province,this.shi=e.city,this.qu=e.county,this.formAddress.address=e.address,this.formAddress.name=e.name,this.formAddress.phone=e.phone,this.formAddress.sheng=e.province,this.formAddress.shi=e.city,this.formAddress.qu=e.county,this.formAddress.id=e.id,this.address=!1},tijiao:function(){var e=this;""==this.formAddress.id?""==this.formAddress.address||""==this.formAddress.name||""==this.formAddress.phone||""==this.formAddress.sheng||""==this.formAddress.shi||""==this.formAddress.qu?this.open("请填写完整客户收货地址","error"):this.axios.post("/crm.Customer/customer_address_add",{customer_id:this.kehuValue,name:this.formAddress.name,phone:this.formAddress.phone,province:this.formAddress.sheng,city:this.formAddress.shi,county:this.formAddress.qu,address:this.formAddress.address}).then(function(t){2e3==t.data.code?e.posttijiao(t.data.id):open(t.data.msg,"error")}):this.posttijiao(this.formAddress.id)},posttijiao:function(e){for(var t=this,a=[],i=0;i<this.distributeProduct.length;i++){var r={number:this.distributeProduct[i].number,customer_order_product_sku_id:this.distributeProduct[i].id};a.push(r),this.distributeProduct[i].number=""}""==a[0].number?this.open("配货数量不能为空"):this.axios.post("/crm.Order/customer_order_address_add",{customer_order_id:this.customer_order_id,customer_address_id:e,name:this.formAddress.name,phone:this.formAddress.phone,province:this.formAddress.sheng,city:this.formAddress.shi,county:this.formAddress.qu,address:this.formAddress.address,payment:this.formAddress.payment,delivery:this.formAddress.delivery,product:a}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.formAddress.address="",t.formAddress.name="",t.formAddress.phone="",t.formAddress.sheng="",t.formAddress.shi="",t.formAddress.qu="",t.formAddress.payment="",t.formAddress.delivery="",t.sheng="",t.shi="",t.qu="",a=[],t.getfixedAddress()):t.open(e.data.msg,"error")})},getfixedAddress:function(){var e=this;this.axios.get("/crm.Order/customer_order_address_select?customer_order_id="+this.customer_order_id).then(function(t){e.fixedAddress=t.data.address})},generatedAddressgengxin:function(e){this.gengxinfixedAddress=!0,this.fixedAddressform.id=e.id,this.fixedAddressform.name=e.name,this.fixedAddressform.phone=e.phone,this.fixedAddressform.wuliu=e.type,this.fixedAddressform.sheng=e.province,this.fixedAddressform.shi=e.city,this.fixedAddressform.qu=e.county,this.fixedAddressform.address=e.address,this.fixedAddressform.customer_address_id=e.customer_address_id,this.distributeProduct1=e.product},pushgengxinfixedAddress:function(){for(var e=this,t=[],a=0;a<this.distributeProduct1.length;a++){var i={number:this.distributeProduct1[a].number,customer_order_product_sku_id:this.distributeProduct1[a].customer_order_product_sku_id};t.push(i)}this.axios.post("/crm.Order/customer_order_address_update",{id:this.fixedAddressform.id,customer_order_id:this.customer_order_id,customer_address_id:this.fixedAddressform.customer_address_id,name:this.fixedAddressform.name,phone:this.fixedAddressform.phone,province:this.fixedAddressform.sheng,city:this.fixedAddressform.shi,county:this.fixedAddressform.qu,address:this.fixedAddressform.address,type:this.fixedAddressform.wuliu,product:t}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getfixedAddress(),e.gengxinfixedAddress=!1):e.open(t.data.msg,"error")})},generatedAddressshanchu:function(e){var t=this;this.axios.post("/crm.Order/customer_order_address_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getfixedAddress()):t.open(e.data.msg,"error")})},getCityData:function(){var e=this;e.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in e.province=[],e.city=[],e.block=[],a)i.match(/0000$/)?e.province.push({id:i,value:a[i],children:[]}):i.match(/00$/)?e.city.push({id:i,value:a[i],children:[]}):e.block.push({id:i,value:a[i]});for(var r in e.province)for(var s in e.city)e.province[r].id.slice(0,2)===e.city[s].id.slice(0,2)&&e.province[r].children.push(e.city[s]);for(var o in e.city)for(var l in e.block)e.block[l].id.slice(0,4)===e.city[o].id.slice(0,4)&&e.city[o].children.push(e.block[l])}})},choseProvince:function(e){for(var t in this.province)e===this.province[t].id&&(this.shi1=this.province[t].children,this.shi=this.province[t].children[0].value,this.qu1=this.province[t].children[0].children,this.qu=this.province[t].children[0].children[0].value,this.E=this.qu1[0].value,this.formAddress.sheng=this.province[t].value,this.formAddress.shi=this.province[t].children[0].value,this.formAddress.qu=this.province[t].children[0].children[0].value)},choseCity:function(e){for(var t in this.city)e===this.city[t].id&&(this.qu1=this.city[t].children,this.qu=this.city[t].children[0].value,this.E=this.qu1[0].id,this.formAddress.shi=this.city[t].value)},choseBlock:function(e){for(var t in this.E=e,this.block)e===this.block[t].id&&(this.formAddress.qu=this.block[t].value)},handleAvatarSuccess:function(){this.getimgUrl(this.customer_order_id)},beforeAvatarUpload:function(e){var t=e.type;this.imageUrlType.push(t);var a="image/jpeg"===e.type||"image/png"===e.type,i=e.size/1024/1024<2;return a||this.$message.error("上传图片必须是JPG/PNG格式!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),a&&i},getimgUrl:function(e){var t=this;this.axios.get("/crm.Order/customer_order_file_select?id="+e+"&data_table=temporary_file").then(function(e){null!=e.data?(t.imageUrlstate=!0,t.imageUrl=e.data.customer_order):(t.imageUrlstate=!1,t.imageUrl=[])})},deleteimg:function(e){var t=this;this.axios.post("/file/customer_order_delete",{src:e,class:"customer_order"}).then(function(e){2e3==e.data.code&&t.getimgUrl(t.customer_order_id)})},confirm:function(){var e,t=this;this.InvoiceType[0].filter(function(a){a.id==t.piao&&(e=a)}),this.InvoiceType[1].filter(function(a){a.id==t.piao&&(e=a)}),this.InvoiceType[2].filter(function(a){a.id==t.piao&&(e=a)}),this.axios.post("/crm.Order/order_update",{id:this.customer_order_id,status:"1",customer_id:this.kehuValue,sales_time:this.starttime,delivery_time:this.endtime,type_id:this.radio,class_id:this.class_id,invoice_name:e.name,invoice_type:e.type,invoice_tax:e.percentile.substring(0,e.percentile.length-1),remarks:this.remarks}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.state4="",t.listKuhuName="",t.kehuValue="",t.starttime="",t.endtime="",t.piao="",t.radio="",t.remarks="",t.customer_order_id="",t.tableProduct=[],t.currentPage="",t.total="",t.per_page="",t.last_page="",t.tableData=[],t.ChoiceAddress=[],t.distributeProduct=[],t.fixedAddress=[],t.distributeProduct1=[],t.addressProduct=[],t.imageUrl=[],t.imageUrlType=[],t.imageUrlstate=!1,t.triggerDeleteTabs(t.$route.path),t.$router.push({path:"/crm/Order/order_list"})):t.open(e.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})},getcaogao:function(){var e=this;this.axios.get("/crm.Order/order_update?id="+this.$route.params.id).then(function(t){var a;void 0===t.data.order&&(e.state4=t.data.company_name,e.kehuName(t.data.company_id),e.kehuValue=t.data.customer_id,e.starttime=t.data.sales_time,e.endtime=t.data.delivery_time,e.radio=String(t.data.type_id),e.class_id=String(t.data.class_id),e.remarks=t.data.remarks,e.customer_order_id=t.data.id,e.status=t.data.status,e.gettableData(t.data.id),e.gettableData1(t.data.id),e.getChoiceAddress(t.data.customer_id),e.getfixedAddress(t.data.id),e.getimgUrl(t.data.id),e.InvoiceType[t.data.type_id-1].filter(function(e){"".concat(e.name).concat(e.type)=="".concat(t.data.invoice_name).concat(t.data.invoice_type)&&(a=e)}),e.piao=a.id,e.optionsSalesman=t.data.user)})},getchildmsg:function(e){1==e&&(this.getfixedAddress(),this.dialogExcel=!1,this.open("上传成功","success"))}}),mounted:function(){var e=this;this.axios.get("/crm.Customer/company_select").then(function(t){for(var a=t.data.company,i=0;i<a.length;i++){var r={id:a[i].id,name:a[i].name};e.list.push(r)}})},activated:function(){this.getCityData(),this.getoptions(),this.$route.params.id&&this.getcaogao()}},da=ca,ua=(i("3df3"),Object(d["a"])(da,la,na,!1,null,"2300b650",null)),pa=ua.exports,ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入公司关键词","remote-method":e.remoteMethod,loading:e.loading,disabled:""},on:{change:e.kehuName},model:{value:e.state4,callback:function(t){e.state4=t},expression:"state4"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{disabled:"",filterable:"",placeholder:"请选择客户名称"},model:{value:e.kehuValue,callback:function(t){e.kehuValue=t},expression:"kehuValue"}},e._l(e.listKuhuName,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("div",{staticClass:"riqi"},[a("div",{staticClass:"xiaohou"},[a("span",[e._v("销售日期")]),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{disabled:"",type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.starttime,callback:function(t){e.starttime=t},expression:"starttime"}})],1),a("div",{staticClass:"fahuo"},[a("span",[e._v("收货日期")]),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{disabled:"",type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.endtime,callback:function(t){e.endtime=t},expression:"endtime"}})],1)]),a("div",{staticClass:"danxuan"},[a("div",{staticClass:"danxuan1"},[a("el-radio",{attrs:{label:"1",disabled:""},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("商品")]),a("el-radio",{attrs:{label:"2",disabled:""},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("农产品")]),a("el-radio",{attrs:{label:"3",disabled:""},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("服务")])],1),a("div",{staticClass:"danxuan1",staticStyle:{"margin-top":"20px"}},[a("el-radio",{attrs:{label:"1",disabled:""},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("传统")]),a("el-radio",{attrs:{label:"2",disabled:""},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("线上")]),a("el-radio",{attrs:{label:"3",disabled:""},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("京东")])],1),a("br"),a("p",[e._v("备注："+e._s(e.remarks))]),a("br"),a("div",{staticClass:"danxuan2"},[a("h4",[e._v("发票信息:"),a("span",[e._v(e._s(e.invoice_name)+e._s(e.invoice_tax)+e._s(e.invoice_type)+"%")])])])]),a("div",{staticClass:"lirun"},[a("span",[e._v("总销售额:"+e._s(e.totalprice))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("产品成本:"+e._s(e.totalcostprice))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("销售提成:"+e._s(e.userprice))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("额外提成:"+e._s(e.commissionprice))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("物流费用:"+e._s(e.logisticsprice))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("额外费用:"+e._s(e.extraprice))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("开票费用:"+e._s(e.invoiceprice))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("售后费用:"+e._s(e.aftersalesprice))]),a("br"),a("span",{staticStyle:{"margin-top":"15px",color:"#F56C6C"}},[e._v("利润:"+e._s(e._f("toFixed")(Number(e.totalprice)-Number(e.totalcostprice)-Number(e.userprice)-Number(e.logisticsprice)-Number(e.extraprice)-Number(e.invoiceprice)-Number(e.aftersalesprice),3)))])])],1),a("div",{staticClass:"content_box_product"},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,"show-summary":""}},[a("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"产品名称",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{label:"单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.unit))])]}}])}),a("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.number))])]}}])}),a("el-table-column",{attrs:{label:"成本"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.cost_price))])]}}])}),a("el-table-column",{attrs:{label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.selling_price))])]}}])}),a("el-table-column",{attrs:{label:"总价",prop:"total_price"}}),a("el-table-column",{attrs:{label:"业务提成"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:t.row.commission}},[a("el-table-column",{attrs:{property:"user_name",label:"业务员"}}),a("el-table-column",{attrs:{property:"ratio",label:"提成系数"}}),a("el-table-column",{attrs:{label:"总提成"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("span",[e._v(" \n                        ￥"+e._s(e._f("toFixed")((t.row.selling_price*t.row.number-t.row.cost_price*t.row.number)*i.row.ratio,3))+" \n                        ")])]}}],null,!0)})],1),a("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("查看")])],1)]}}])}),a("el-table-column",{attrs:{label:"总提成"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.user_price))])]}}])}),a("el-table-column",{attrs:{label:"预计利润"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("toFixed")((Number(t.row.selling_price)-Number(t.row.cost_price))*t.row.number-Number(t.row.user_price),3)))])]}}])}),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.remarks))])]}}])})],1)],1),a("div",{staticClass:"generatedAddress"},[a("label",[e._v("地址配货信息")]),a("hr"),e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v("付款方式:"+e._s(1==t.payment?"到付":"现付"))]),1==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上门")]):e._e(),2==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上楼")]):e._e(),3==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:自提")]):e._e()]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n              "),e._l(t.product,function(t){return a("span",{key:t.pid,staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2)]),a("div",{staticClass:"caigou"},[a("label",[e._v("配货物流信息")]),a("hr"),void 0!=t.purchase?e._l(t.purchase,function(i){return a("div",{key:i.id,staticClass:"caigouInnerbox"},[a("el-table",{staticStyle:{"margin-bottom":"10px"},attrs:{data:i.product}},[a("el-table-column",{attrs:{label:"产品",width:"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"供应商",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"成本价(每个)",prop:"purchase_price"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[t.status<90?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.shouhou(i.row)}}},[e._v("售后")]):e._e()]}}],null,!0)})],1),e._l(i.product,function(t){return a("div",{key:t.id},[null==t.supplier_after_sales?[a("h4",[e._v("无售后信息")])]:[a("label",[e._v("售后信息")]),a("el-table",{attrs:{data:t.supplier_after_sales}},[a("el-table-column",{attrs:{label:"添加时间",prop:"add_time"}}),a("el-table-column",{attrs:{label:"金额",prop:"money"}}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.delete_sh(t.row)}}},[e._v("删除")]):e._e(),1==t.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.confirm_sh(t.row)}}},[e._v("完成")]):e._e(),2==t.row.status?a("span",[e._v("已完成")]):e._e()]}}],null,!0)})],1)],a("el-table",{staticStyle:{"margin-top":"10px"},attrs:{data:t.express,border:""}},[a("el-table-column",{attrs:{label:"物流公司",prop:"express_name"}}),a("el-table-column",{attrs:{label:"物流电话",prop:"express_phone"}}),a("el-table-column",{attrs:{label:"数量",prop:"express_numbers"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.status?"已收货":"运输中"))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.seewuliu(t.row)}}},[e._v("查看")])]}}],null,!0)})],1)],2)})],2)}):e._e()],2)])})],2),a("div",{staticClass:"contract"},[a("label",[e._v("合同")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),e._m(0,!0)])}),0)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.img1,expression:"img1 == true"}],staticClass:"contract"},[a("label",[e._v("预付款凭证")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"img"},e._l(e.imageUrl1,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),e._m(1,!0)])}),0)])]),a("el-dialog",{attrs:{title:"物流信息",visible:e.dialogwuliu},on:{"update:visible":function(t){e.dialogwuliu=t}}},[a("el-timeline",{attrs:{reverse:"false"}},e._l(e.express_tracking,function(t,i){return a("el-timeline-item",{key:i,attrs:{timestamp:t.tracking_time}},[e._v("\n                "+e._s(t.tracking_txt)+"   "+e._s(t.user_name)+"\n            ")])}),1)],1),a("el-dialog",{attrs:{title:"售后",visible:e.dialogshouhou},on:{"update:visible":function(t){e.dialogshouhou=t}}},[a("el-form",{ref:"formShouhou",attrs:{model:e.formShouhou}},[a("el-form-item",{attrs:{label:"类型","label-width":"90px",prop:"type"}},[a("el-checkbox-group",{model:{value:e.formShouhou.type,callback:function(t){e.$set(e.formShouhou,"type",t)},expression:"formShouhou.type"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[e._v("补货")]),a("el-checkbox",{attrs:{label:"2",name:"type"}},[e._v("换货")]),a("el-checkbox",{attrs:{label:"3",name:"type"}},[e._v("退货")]),a("el-checkbox",{attrs:{label:"4",name:"type"}},[e._v("退单")]),a("el-checkbox",{attrs:{label:"5",name:"type"}},[e._v("其他")])],1)],1),a("el-form-item",{attrs:{label:"费用","label-width":"90px",prop:"money"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"可以为负数"},model:{value:e.formShouhou.money,callback:function(t){e.$set(e.formShouhou,"money",t)},expression:"formShouhou.money"}})],1),a("el-form-item",{attrs:{label:"数量","label-width":"90px",prop:"number"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.formShouhou.number,callback:function(t){e.$set(e.formShouhou,"number",t)},expression:"formShouhou.number"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"90px",prop:"remarks"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{type:"textarea"},model:{value:e.formShouhou.remarks,callback:function(t){e.$set(e.formShouhou,"remarks",t)},expression:"formShouhou.remarks"}})],1),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{on:{click:e.addShouhou}},[e._v("提交")])],1)],1)],1),a("el-dialog",{attrs:{title:"完成售后",visible:e.dialogconfirm},on:{"update:visible":function(t){e.dialogconfirm=t}}},[a("h3",[e._v("确认售后已结束 确定订单产生费用")]),a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{model:e.confirmForm}},[a("el-form-item",{attrs:{label:"费用","label-width":"100px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.confirmForm.money,callback:function(t){e.$set(e.confirmForm,"money",t)},expression:"confirmForm.money"}})],1),a("el-form-item",{attrs:{label:"","label-width":"100px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addconfirm}},[e._v("确认提交")])],1)],1)],1)],1)},ha=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"}})])}],fa=(i("3e8f"),{data:function(){return{options:[],state4:"",kehuValue:"",starttime:"",endtime:"",radio:"",class_id:"",invoice_name:"",invoice_tax:"",invoice_type:"",remarks:"",listKuhuName:[],totalprice:0,totalcostprice:0,userprice:0,commissionprice:0,logisticsprice:0,extraprice:0,invoiceprice:0,aftersalesprice:0,customer_order_id:"",tableData:[],fixedAddress:[],distributeProduct1:[],addressProduct:[],loading:!1,wuliuList:[],dialogwuliu:!1,express_tracking:[],dialogconfirm:!1,confirmForm:{money:"",id:""},imageUrl:[],imageUrlType:[],imageUrl1:[],img1:!1,dialogshouhou:!1,formShouhou:{type:[],number:"",money:"",remarks:"",customer_order_id:"",customer_order_purchase_product_id:"",supplier_id:"",product_sku_id:""}}},methods:{remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout(function(){t.loading=!1,t.options=t.list.filter(function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1})},200)):this.options=[]},kehuName:function(e){var t=this;t.axios.post("/crm.Customer/customer_select",{company_id:e}).then(function(e){0==e.data.customer.length&&(t.kehuValue=""),t.listKuhuName=e.data.customer})},gettableData:function(e){var t=this;this.axios.get("/crm.Order/customer_order_product_sku_select?customer_order_id="+e).then(function(e){t.tableData=e.data.product_sku})},getfixedAddress:function(e){var t=this;this.axios.get("/crm.Order/order_find?customer_order_id="+e).then(function(e){t.fixedAddress=e.data.address})},seewuliu:function(e){var t=this;this.axios.get("/crm.Order/order_express_find?customer_order_express_id="+e.id).then(function(e){t.express_tracking=e.data}),this.dialogwuliu=!0},seewuliuList:function(e){var t=this;this.axios.get("/crm.Order/order_express_select?customer_order_id="+e).then(function(e){t.wuliuList=e.data.express})},shouhou:function(e){this.formShouhou.customer_order_id=e.customer_order_id,this.formShouhou.customer_order_purchase_product_id=e.id,this.formShouhou.supplier_id=e.supplier_id,this.formShouhou.product_sku_id=e.product_sku_id,this.formShouhou.type=[],this.formShouhou.number="",this.formShouhou.money="",this.formShouhou.remarks="",this.dialogshouhou=!0},addShouhou:function(){var e=this;this.axios.post("/crm.Order/order_supplier_after_sales_add",{type:this.formShouhou.type,customer_order_id:this.formShouhou.customer_order_id,customer_order_purchase_product_id:this.formShouhou.customer_order_purchase_product_id,supplier_id:this.formShouhou.supplier_id,product_sku_id:this.formShouhou.product_sku_id,number:this.formShouhou.number,money:this.formShouhou.money,remarks:this.formShouhou.remarks}).then(function(t){2e3==t.data.code?(e.getcaogao(),e.open(t.data.msg,"success")):e.open(t.data.msg,"error")})},delete_sh:function(e){var t=this;this.axios.post("/crm.Order/order_supplier_after_sales_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.getcaogao(),t.open(e.data.msg,"success")):t.open(e.data.msg,"error")})},confirm_sh:function(e){this.dialogconfirm=!0,this.confirmForm.id=e.id,this.confirmForm.money=e.money},addconfirm:function(){var e=this;this.axios.post("/crm.Order/order_supplier_after_sales_update",{id:this.confirmForm.id,money:this.confirmForm.money}).then(function(t){2e3==t.data.code?(e.dialogconfirm=!1,e.getcaogao(),e.open(t.data.msg,"success")):e.open(t.data.msg,"error")})},getimgUrl:function(e){var t=this;this.axios.get("/crm.Order/customer_order_file_select?id="+e).then(function(e){null!=e.data&&(t.imageUrlstate=!0,t.imageUrl=e.data.customer_order,void 0!==e.data.customer_order_advance_charge&&(t.img1=!0,t.imageUrl1=e.data.customer_order_advance_charge))})},open:function(e,t){this.$message({message:e,type:t})},getcaogao:function(){var e=this;this.axios.get("/crm.Order/order_update?id="+this.$route.params.id+"&param=chakan").then(function(t){null!=t.data&&e.$nextTick(function(){this.gettableData(t.data.id),this.getfixedAddress(t.data.id),this.seewuliuList(t.data.id),this.getimgUrl(t.data.id),this.state4=t.data.company_name,this.kehuName(t.data.company_id),this.kehuValue=t.data.customer_id,this.starttime=t.data.sales_time,this.endtime=t.data.delivery_time,this.class_id=String(t.data.class_id),this.radio=String(t.data.type_id),this.remarks=t.data.remarks,this.totalprice=t.data.total_price,this.totalcostprice=t.data.total_cost_price,this.userprice=t.data.user_price,this.commissionprice=t.data.commission_price,this.logisticsprice=t.data.logistics_price,this.extraprice=t.data.extra_price,this.invoiceprice=t.data.invoice_price,this.aftersalesprice=t.data.after_sales_price,this.invoice_name=t.data.invoice_name,this.invoice_tax=t.data.invoice_tax,this.invoice_type=t.data.invoice_type})})}},created:function(){this.getcaogao()},watch:{$route:function(e){this.getcaogao()}}}),_a=fa,ga=(i("7ac5"),Object(d["a"])(_a,ma,ha,!1,null,"e4c090ac",null)),ba=ga.exports,va=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_head"},[a("el-select",{staticStyle:{"margin-left":"10px",width:"217px"},attrs:{placeholder:"公司查询",filterable:"",clearable:""},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-input",{staticStyle:{"margin-left":"20px",width:"217px"},attrs:{placeholder:"客户名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.seach(t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),a("el-button",{staticStyle:{"margin-left":"30px"},on:{click:e.seach}},[e._v("搜索")])],1),a("div",{staticClass:"box_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"订单编号"}}),a("el-table-column",{attrs:{prop:"customer_name",label:"客户姓名"}}),a("el-table-column",{attrs:{prop:"customer_working_phone",label:"客户电话",width:"110px"}}),a("el-table-column",{attrs:{prop:"sales_time",label:"销售日期",width:"95"}}),a("el-table-column",{attrs:{prop:"total_price",label:"总销售额"}}),a("el-table-column",{attrs:{prop:"user_name",label:"销售员"}}),a("el-table-column",{attrs:{prop:"user_price",label:"销售提成"}}),a("el-table-column",{attrs:{label:"利润"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("keepTowNum")(Number(t.row.total_price)-Number(t.row.total_cost_price)-Number(t.row.user_price)-Number(t.row.logistics_price)-Number(t.row.extra_price))))])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("草稿")]):e._e(),1==t.row.status?a("span",[e._v("已提交订单")]):e._e(),9==t.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.status_txt,placement:"top-start"}},[a("span",{staticStyle:{color:"#409EFF"}},[e._v("审核拒绝")])]):e._e(),10==t.row.status?a("span",[e._v("财务通过")]):e._e(),20==t.row.status?a("span",[e._v("采购完成")]):e._e(),30==t.row.status?a("span",[e._v("预付款处理")]):e._e(),40==t.row.status?a("span",[e._v("等待发货")]):e._e(),50==t.row.status?a("span",[e._v("全部收到货等开票")]):e._e(),60==t.row.status?a("span",[e._v("开过票")]):e._e(),70==t.row.status?a("span",[e._v("认过款项")]):e._e(),90==t.row.status?a("span",[e._v("结束")]):e._e(),999==t.row.status?a("span",[e._v("作废")]):e._e(),a("br"),9!=t.row.status?a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.status_txt))]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.See(t.row)}}},[e._v("查看")]),t.row.status<=10?a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")]):e._e(),t.row.status<=10?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deletes(t.row)}}},[e._v("作废")]):e._e(),t.row.status>30?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.afterSale(t.row)}}},[e._v("售后")]):e._e(),t.row.status>=10?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.additional(t.row)}}},[e._v("额外费用")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"额外费用",visible:e.dialogAdditional},on:{"update:visible":function(t){e.dialogAdditional=t}}},[a("el-form",{attrs:{model:e.AdditionalForm}},[a("el-form-item",{attrs:{label:"费用","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.AdditionalForm.money,callback:function(t){e.$set(e.AdditionalForm,"money",t)},expression:"AdditionalForm.money"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{type:"textarea"},model:{value:e.AdditionalForm.remark,callback:function(t){e.$set(e.AdditionalForm,"remark",t)},expression:"AdditionalForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogAdditional=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.AddAdditional}},[e._v("确 定")])],1)],1)],1)},ya=[],xa={filters:{keepTowNum:function(e){return e=Number(e),e.toFixed(2)}},data:function(){return{value:"",value1:"",value2:"",options:[],tableData:[],currentPage:0,total:0,per_page:0,last_page:0,AdditionalForm:{money:"",remark:"",id:""},dialogAdditional:!1}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{seach:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});null==this.value1?this.axios.post("/crm.Order/order_list",{name:this.value,company_id:this.value2,start_time:"",end_time:""}).then(function(a){e.tableData=a.data.order.data,e.currentPage=a.data.order.current_page,e.total=a.data.order.total,e.per_page=a.data.order.per_page,e.last_page=a.data.order.last_page,t.close()}):this.axios.post("/crm.Order/order_list",{name:this.value,company_id:this.value2,start_time:this.value1[0],end_time:this.value1[1]}).then(function(a){e.tableData=a.data.order.data,e.currentPage=a.data.order.current_page,e.total=a.data.order.total,e.per_page=a.data.order.per_page,e.last_page=a.data.order.last_page,t.close()})},edit:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/crm/Order/editOrder/".concat(e.id),params:{userId:e.id,name:"/crm/Order/editOrder/".concat(e.id)}});var t={route:"/crm/Order/editOrder/".concat(e.id),name:"修改订单",id:e.id},a="/crm/Order/editOrder/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},See:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/crm/Order/seeOrder/".concat(e.id),params:{userId:e.id}});var t={route:"/crm/Order/seeOrder/".concat(e.id),name:"查看订单",id:e.id},a="/crm/Order/seeOrder/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},deletes:function(e){var t=this;this.axios.post("/crm.Order/order_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getOrderList()):t.open(e.data.msg,"error")})},getOrderList:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中……",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get("/crm.Order/order_list").then(function(a){e.options=a.data.company,e.tableData=a.data.order.data,e.currentPage=a.data.order.current_page,e.total=a.data.order.total,e.per_page=a.data.order.per_page,e.last_page=a.data.order.last_page,t.close()})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/crm.Order/order_list",{name:this.value,company_id:this.value2,start_time:this.value1[0],end_time:this.value1[1],page:e}).then(function(e){t.tableData=e.data.order.data,t.currentPage=e.data.order.current_page,t.total=e.data.order.total,t.per_page=e.data.order.per_page,t.last_page=e.data.order.last_page,a.close()})},afterSale:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/crm/Order/afterSale/".concat(e.id),params:{userId:e.id}});var t={route:"/crm/Order/afterSale/".concat(e.id),name:"售后",id:e.id},a="/crm/Order/afterSale/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},additional:function(e){this.dialogAdditional=!0,this.AdditionalForm.money="",this.AdditionalForm.remark="",this.AdditionalForm.id=e.id},AddAdditional:function(){var e=this;this.axios.post("/crm.Order/order_list_extra_add",{money:this.AdditionalForm.money,remarks:this.AdditionalForm.remark,customer_order_id:this.AdditionalForm.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getOrderList(),e.dialogAdditional=!1):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}}),activated:function(){this.getOrderList()}},ka=xa,wa=(i("1b71"),Object(d["a"])(ka,va,ya,!1,null,"71205682",null)),Sa=wa.exports,Aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("h3",{staticStyle:{color:"red","margin-bottom":"10px"}},[e._v("\n        整体订单需要额外增加售后成本,在此处填写如果是单独供应商发货补货售后请点击按钮选择对应的处理地址,填写售后\n    ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.s_sh}},[e._v("供应商售后")]),a("el-form",{ref:"dataForm",attrs:{model:e.dataForm}},[a("el-form-item",{attrs:{label:"方式","label-width":"90px",prop:"type"}},[a("el-checkbox-group",{model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},[a("el-checkbox",{attrs:{label:"1",name:"type"}},[e._v("补货")]),a("el-checkbox",{attrs:{label:"2",name:"type"}},[e._v("换货")]),a("el-checkbox",{attrs:{label:"3",name:"type"}},[e._v("退货")]),a("el-checkbox",{attrs:{label:"4",name:"type"}},[e._v("退单")]),a("el-checkbox",{attrs:{label:"5",name:"type"}},[e._v("其他")])],1)],1),a("el-form-item",{attrs:{label:"费用","label-width":"90px",prop:"feiyong"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"可以为负数"},model:{value:e.dataForm.feiyong,callback:function(t){e.$set(e.dataForm,"feiyong",t)},expression:"dataForm.feiyong"}})],1),a("el-form-item",{attrs:{label:"产品","label-width":"90px",prop:"product"}},[a("el-checkbox-group",{model:{value:e.dataForm.product,callback:function(t){e.$set(e.dataForm,"product",t)},expression:"dataForm.product"}},e._l(e.product,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id,name:"product"}},[e._v(e._s(t.name)+e._s(t.sku_name))])}),1)],1),a("el-form-item",{attrs:{label:"备注","label-width":"90px",prop:"remark"}},[a("el-input",{staticStyle:{width:"317px"},attrs:{type:"textarea"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1),a("el-form-item",{attrs:{label:"上传附件","label-width":"90px"}},[a("div",{staticClass:"contractInner"},[a("div",{staticClass:"contractInnerLeft"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:"image/jpeg,image/gif,image/png,image/bmp",action:"/file/customer_order_after_sales_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrlstate,expression:"imageUrlstate"}],staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.deleteimg(t.src)}}})])])}),0)],1)])]),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("提 交")])],1)],1)],1)},Ca=[],Fa={data:function(){return{dataForm:{type:[],feiyong:"",product:[],remark:""},imageUrl:[],imageUrlstate:!1,product:""}},props:["expressid","orderid"],methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex","triggerDeleteTabs"]),{getproduct:function(){var e=this;this.axios.get("/crm.Order/customer_order_product_sku_select?customer_order_id="+this.$route.params.id).then(function(t){e.product=t.data.product_sku})},handleAvatarSuccess:function(){this.getimgUrl(this.id)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getimgUrl:function(e){var t=this;this.axios.get("/crm.Order/customer_order_file_select?id="+e+"&class=customer_order_after_sales").then(function(e){void 0!==e.data.customer_order_after_sales?(t.imageUrlstate=!0,t.imageUrl=e.data.customer_order_after_sales):t.imageUrlstate=!1})},deleteimg:function(e){var t=this;this.axios.post("/file/customer_order_delete",{src:e,class:"customer_order"}).then(function(e){2e3==e.data.code?(t.getimgUrl(t.$route.params.id),t.open(e.data.msg,"success")):t.open(e.data.msg,"error")})},add:function(){for(var e=this,t=[],a=0;a<this.imageUrl.length;a++){var i=this.imageUrl[a].src;t.push(i)}this.axios.post("/crm.Order/order_list_after_sales_add",{customer_order_id:this.$route.params.id,type:this.dataForm.type,fee:this.dataForm.feiyong,remarks:this.dataForm.remark,customer_order_product_sku:this.dataForm.product,src:t}).then(function(t){2e3==t.data.code?(e.$refs["dataForm"].resetFields(),e.imageUrlstate=!1,e.imageUrl=[],e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/crm/Order/order_list"})):e.open(t.data.msg,"error")})},s_sh:function(){this.triggerReplaceId(this.$route.params.id),this.$router.push({path:"/crm/Order/seeOrder/".concat(this.$route.params.id),params:{userId:this.$route.params.id}});var e={route:"/crm/Order/seeOrder/".concat(this.$route.params.id),name:"查看订单",id:this.$route.params.id},t="/crm/Order/seeOrder/".concat(this.$route.params.id);this.triggerAddTabs(e),this.triggerSetActiveIndex(t)},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){this.getproduct()},watch:{$route:function(e){this.$route.params.id&&this.getproduct()}}},Pa=Fa,Da=(i("1f9c"),Object(d["a"])(Pa,Aa,Ca,!1,null,"cad9f17e",null)),$a=Da.exports,Ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seachName}},[e._v("搜索")]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("添加发票")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"类型",prop:"type"}}),a("el-table-column",{attrs:{label:"发票抬头",prop:"rise"}}),a("el-table-column",{attrs:{label:"票号",prop:"tax_number"}}),a("el-table-column",{attrs:{label:"金额",prop:"money"}}),a("el-table-column",{attrs:{label:"品类",prop:"category"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("\n                        待开票\n                    ")]):e._e(),3==t.row.status?a("span",[e._v("\n                        已开票\n                    ")]):e._e(),5==t.row.status?a("span",[e._v("\n                        待审核\n                    ")]):e._e(),t.row.status>=9?a("span",[e._v("\n                        已审核\n                    ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v("删除")]):e._e(),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.Send(t.row)}}},[e._v("快递")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"发票信息",visible:e.dialogInvoice},on:{"update:visible":function(t){e.dialogInvoice=t}}},[a("el-form",{attrs:{model:e.InvoiceForm,inline:""}},[a("el-form-item",{attrs:{label:"开票抬头","label-width":"90px"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.InvoiceForm.rise,callback:function(t){e.$set(e.InvoiceForm,"rise",t)},expression:"InvoiceForm.rise"}})],1),a("br"),a("el-form-item",{attrs:{label:"发票税号","label-width":"90px"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.InvoiceForm.tax_number,callback:function(t){e.$set(e.InvoiceForm,"tax_number",t)},expression:"InvoiceForm.tax_number"}})],1),a("br"),a("el-form-item",{attrs:{label:"品类","label-width":"80px"}},[a("el-input",{staticStyle:{width:"120px"},model:{value:e.InvoiceForm.category,callback:function(t){e.$set(e.InvoiceForm,"category",t)},expression:"InvoiceForm.category"}})],1),a("el-form-item",{attrs:{label:"发票类型","label-width":"80px"}},[a("el-input",{staticStyle:{width:"120px"},model:{value:e.InvoiceForm.type,callback:function(t){e.$set(e.InvoiceForm,"type",t)},expression:"InvoiceForm.type"}})],1),a("el-form-item",{attrs:{label:"发票金额","label-width":"80px"}},[a("el-input",{staticStyle:{width:"120px"},model:{value:e.InvoiceForm.money,callback:function(t){e.$set(e.InvoiceForm,"money",t)},expression:"InvoiceForm.money"}})],1)],1),a("label",[e._v("产品信息")]),a("div",{staticClass:"box_product"},e._l(e.tableProduct,function(t){return a("div",{key:t.id,staticClass:"product_inner"},[a("p",{staticStyle:{"padding-bottom":"10px"}},[a("span",[e._v("客户名称："+e._s(t.customer_name)+" ")]),a("span",[e._v("客户电话："+e._s(t.customer_working_phone))]),a("span",[e._v("总销售额："+e._s(t.total_price)+" ")])]),a("el-checkbox-group",{model:{value:e.checkboxGroup,callback:function(t){e.checkboxGroup=t},expression:"checkboxGroup"}},[a("el-checkbox",{attrs:{label:t}},[e._v("选择")]),a("el-table",{attrs:{data:t.product_sku}},[a("el-table-column",{attrs:{label:"订单产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.class_name)+e._s(t.row.sku_name))])]}}],null,!0)}),a("el-table-column",{attrs:{prop:"total_price",label:"销售金额"}}),a("el-table-column",{attrs:{label:"认款金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:t.row.total_price},model:{value:t.row.money,callback:function(a){e.$set(t.row,"money",a)},expression:"scope.row.money"}})]}}],null,!0)})],1)],1)],1)}),0),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogInvoice=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addInvoice}},[e._v("提 交")])],1)],1),a("el-dialog",{attrs:{title:"快递",visible:e.dialogSend,width:"60%"},on:{"update:visible":function(t){e.dialogSend=t}}},[a("el-form",{ref:"SendForm",attrs:{model:e.SendForm}},[a("el-form-item",{attrs:{label:"快递公司","label-width":"90px",prop:"company"}},[a("el-select",{staticStyle:{width:"317px"},attrs:{placeholder:"请选择"},model:{value:e.SendForm.company,callback:function(t){e.$set(e.SendForm,"company",t)},expression:"SendForm.company"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"快递编号","label-width":"90px",prop:"numbers"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.SendForm.numbers,callback:function(t){e.$set(e.SendForm,"numbers",t)},expression:"SendForm.numbers"}})],1),a("el-form-item",{attrs:{label:"快递费用","label-width":"90px",prop:"money"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.SendForm.money,callback:function(t){e.$set(e.SendForm,"money",t)},expression:"SendForm.money"}})],1)],1),a("el-table",{attrs:{data:e.tableExpres}},[a("el-table-column",{attrs:{label:"快递公司",prop:"express_name"}}),a("el-table-column",{attrs:{label:"快递编号",prop:"numbers"}}),a("el-table-column",{attrs:{label:"快递费用",prop:"money"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("\n                        待开票\n                    ")]):e._e(),3==t.row.status?a("span",[e._v("\n                        已开票\n                    ")]):e._e(),5==t.row.status?a("span",[e._v("\n                        运费待审核\n                    ")]):e._e(),t.row.status>=9?a("span",[e._v("\n                        已审核\n                    ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editExpres(t.row)}}},[e._v("修改")]):e._e(),0==t.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deleteExpres(t.row)}}},[e._v("删除")]):e._e(),0!=t.row.status?a("span",[e._v("无法操作")]):e._e()]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSend=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addSend}},[e._v("提 交")])],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},qa=[],Oa={data:function(){return{seach:"",tableData:[],dialogInvoice:!1,InvoiceForm:{rise:"",tax_number:"",category:"",type:"",money:"",id:""},tableProduct:[],checkboxGroup:[],currentPage:0,total:0,per_page:0,last_page:0,dialogSend:!1,SendForm:{money:"",company:"",numbers:"",invoice_id:"",id:""},options:[],tableExpres:[]}},methods:{seachName:function(){var e=this;this.axios.post("/crm.Order/invoice_list",{rise:this.seach}).then(function(t){e.tabledata=t.data.invoice.data,e.currentPage=t.data.invoice.current_page,e.total=t.data.invoice.total,e.per_page=t.data.invoice.per_page,e.last_page=t.data.invoice.last_page})},add:function(){this.InvoiceForm.id="",this.InvoiceForm.rise="",this.InvoiceForm.tax_number="",this.InvoiceForm.category="",this.InvoiceForm.type="",this.InvoiceForm.money="",this.dialogInvoice=!0},gettableData:function(){var e=this;this.axios.get("/crm.Order/invoice_list").then(function(t){e.tableData=t.data.invoice.data,e.tableProduct=t.data.order,e.currentPage=t.data.invoice.current_page,e.total=t.data.invoice.total,e.per_page=t.data.invoice.per_page,e.last_page=t.data.invoice.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/crm.Order/invoice_list",{page:e}).then(function(e){t.tableData=e.data.invoice.data,t.currentPage=e.data.invoice.current_page,a.close()})},addInvoice:function(){var e=this,t=[];if(0!==this.checkboxGroup.length){for(var a=0;a<this.checkboxGroup.length;a++){for(var i=this.checkboxGroup[a],r=i.product_sku,s=[],o=0;o<r.length;o++){var l={customer_order_product_sku_id:r[o].id,money:r[o].money};s.push(l)}var n={customer_order_id:i.id,product_sku:s};t.push(n)}""==this.InvoiceForm.id&&this.axios.post("/crm.Order/invoice_add",{rise:this.InvoiceForm.rise,tax_number:this.InvoiceForm.tax_number,category:this.InvoiceForm.category,type:this.InvoiceForm.type,money:this.InvoiceForm.money,order:t}).then(function(a){2e3==a.data.code?(e.checkboxGroup=[],t=[],e.open(a.data.msg,"success"),e.dialogInvoice=!1,e.gettableData()):e.open(a.data.msg,"error")})}else this.open("勾选产品","error")},edit:function(e){var t=this;this.axios.post("/crm.Order/invoice_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData()):t.open(e.data.msg,"error")})},Send:function(e){var t=this;this.SendForm.id="",this.SendForm.invoice_id=e.id,this.SendForm.company="",this.SendForm.money="",this.SendForm.numbers="",this.dialogSend=!0,this.axios.get("/crm.Order/invoice_list").then(function(e){t.options=e.data.express}),this.axios.get("/crm.Order/invoice_express_update?id="+e.id).then(function(e){t.tableExpres=e.data})},addSend:function(){var e=this;""==this.SendForm.id?""!=this.SendForm.company&&""!=this.SendForm.money&&""!=this.SendForm.numbers?this.axios.post("/crm.Order/invoice_express_add",{express_id:this.SendForm.company,money:this.SendForm.money,numbers:this.SendForm.numbers,invoice_id:this.SendForm.invoice_id}).then(function(t){2e3==t.data.code?(e.axios.get("/crm.Order/invoice_express_update?id="+e.SendForm.invoice_id).then(function(t){e.tableExpres=t.data}),e.open(t.data.msg,"success"),e.$refs["SendForm"].resetFields()):e.open(t.data.msg,"error")}):this.open("填写完整","error"):""!=this.SendForm.company&&""!=this.SendForm.money&&""!=this.SendForm.numbers?this.axios.post("/crm.Order/invoice_express_update",{express_id:this.SendForm.company,money:this.SendForm.money,numbers:this.SendForm.numbers,invoice_id:this.SendForm.invoice_id,id:this.SendForm.id}).then(function(t){2e3==t.data.code?(e.axios.get("/crm.Order/invoice_express_update?id="+e.SendForm.invoice_id).then(function(t){e.tableExpres=t.data}),e.open(t.data.msg,"success"),e.$refs["SendForm"].resetFields()):e.open(t.data.msg,"error")}):this.open("填写完整","error")},editExpres:function(e){this.SendForm.company=e.express_id,this.SendForm.money=e.money,this.SendForm.numbers=e.numbers,this.SendForm.invoice_id=e.invoice_id,this.SendForm.id=e.id},deleteExpres:function(e){var t=this;this.axios.post("/crm.Order/invoice_express_delete",{id:e.id}).then(function(a){2e3==a.data.code?(t.axios.get("/crm.Order/invoice_express_update?id="+e.invoice_id).then(function(e){t.tableExpres=e.data}),t.open(a.data.msg,"success")):t.open(a.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettableData()},watch:{$route:function(e){this.gettableData()}}},Na=Oa,za=(i("11e4"),Object(d["a"])(Na,Ia,qa,!1,null,"1de80fe7",null)),Ta=za.exports,ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_head"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"}},[e._v("搜索")])],1),a("div",{staticClass:"box_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"payment_time",label:"汇款时间",width:"150px"}}),a("el-table-column",{attrs:{prop:"source",label:"渠道"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.status[t.row.source]))])]}}])}),a("el-table-column",{attrs:{label:"接收帐号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receiving_name)+":"+e._s(t.row.receiving_account))])]}}])}),a("el-table-column",{attrs:{prop:"payment_amount",label:"金额"}}),a("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),a("el-table-column",{attrs:{prop:"user_name",label:"录入人"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("认款中")]):e._e(),5==t.row.status?a("span",[e._v("已认款")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(a){return e.renkuan(t.row)}}},[e._v("认款")]):e._e(),5==t.row.status?a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(a){return e.seekuan(t.row)}}},[e._v("查看认款")]):e._e()]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)])},Ua=[],Ma={data:function(){return{status:["支付宝","微信","银行卡"],tableData:[],currentPage:0,total:0,per_page:0,last_page:0}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{renkuan:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/crm/Order/order_receivables_lists_details/".concat(e.id),params:{userId:e.id,name:"/crm/Order/order_receivables_lists_details/".concat(e.id)}});var t={route:"/crm/Order/order_receivables_lists_details/".concat(e.id),name:"认款详情",id:e.id},a="/crm/Order/order_receivables_lists_details/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},seekuan:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/crm/Order/order_receivables_see/".concat(e.id),params:{userId:e.id,name:"/crm/Order/order_receivables_see/".concat(e.id)}});var t={route:"/crm/Order/order_receivables_see/".concat(e.id),name:"查看认款详情",id:e.id},a="/crm/Order/order_receivables_see/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},gettableData:function(){var e=this;this.axios.get("/crm.Order/order_receivables_lists").then(function(t){e.tableData=t.data.receivables.data,e.currentPage=t.data.receivables.current_page,e.total=t.data.receivables.total,e.per_page=t.data.receivables.per_page,e.last_page=t.data.receivables.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_receivables_lists",{page:e}).then(function(e){t.tableData=e.data.receivables.data,t.currentPage=e.data.receivables.current_page,a.close()})}}),created:function(){this.gettableData()},watch:{$route:function(e){this.gettableData()}}},Ea=Ma,Ra=(i("c8fc"),Object(d["a"])(Ea,ja,Ua,!1,null,"568649da",null)),La=Ra.exports,Ha=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"payment_time",label:"汇款时间"}}),a("el-table-column",{attrs:{prop:"source",label:"渠道"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.status[t.row.source]))])]}}])}),a("el-table-column",{attrs:{label:"接收帐号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receiving_name)+":"+e._s(t.row.receiving_account))])]}}])}),a("el-table-column",{attrs:{prop:"payment_amount",label:"金额"}}),a("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),a("el-table-column",{attrs:{prop:"user_name",label:"录入人"}})],1)],1),a("label",[e._v("产品信息")]),a("div",{staticStyle:{"margin-top":"20px"}},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{clearable:"",placeholder:"客户名称"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{clearable:"",placeholder:"金额"},model:{value:e.money,callback:function(t){e.money=t},expression:"money"}}),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{clearable:"",placeholder:"请选择公司"},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}},e._l(e.option,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:e.seach}},[e._v("确定")])],1),a("div",{staticClass:"box_product"},e._l(e.tableProduct,function(t){return a("div",{key:t.id,staticClass:"product_inner"},[a("p",{staticStyle:{"padding-bottom":"10px"}},[a("span",[e._v("客户名称："+e._s(t.customer_name)+" ")])]),a("p",{staticStyle:{"padding-bottom":"10px"}},[a("span",[e._v("总销售额："+e._s(t.total_price)+" ")]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("额外费用："+e._s(t.extra_price)+" ")]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("认款额："+e._s(Number(t.total_price)+Number(t.extra_price))+" ")])]),a("el-checkbox-group",{model:{value:e.checkboxGroup,callback:function(t){e.checkboxGroup=t},expression:"checkboxGroup"}},[a("el-checkbox",{attrs:{label:t}},[e._v("选择         "),a("span",[e._v("已认款金额:"+e._s(t.receivables_money))])]),a("el-table",{attrs:{data:t.product_sku}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.receivables?a("el-form",{staticClass:"demo-table-expand",attrs:{inline:""}},e._l(t.row.receivables,function(t,i){return a("el-form-item",{key:t.id,attrs:{label:i+1}},[a("span",[e._v(e._s(t.add_time)+"已经认款"+e._s(t.money)+"元")])])}),1):a("el-form",[a("el-form-item",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("span",[e._v("暂无认款记录")])])],1)]}}],null,!0)}),a("el-table-column",{attrs:{label:"订单产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.class_name)+e._s(t.row.sku_name))])]}}],null,!0)}),a("el-table-column",{attrs:{prop:"total_price",label:"销售金额"}}),a("el-table-column",{attrs:{label:"认款金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:t.row.total_price},model:{value:t.row.money,callback:function(a){e.$set(t.row,"money",a)},expression:"scope.row.money"}})]}}],null,!0)})],1)],1)],1)}),0),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px","padding-bottom":"20px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确认提交")])],1)},Ba=[],Wa={data:function(){return{status:["支付宝","微信","银行卡"],tableData:[],tableProduct:[],checkboxGroup:[],currentPage:0,total:0,per_page:0,last_page:0,option:[],name:"",money:"",company:""}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex","triggerDeleteTabs"]),{getshuju:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get("/crm.Order/order_receivables_add?id="+this.$route.params.id).then(function(a){e.tableData=[a.data.receivables],e.tableProduct=a.data.order.data,e.currentPage=a.data.order.current_page,e.total=a.data.order.total,e.per_page=a.data.order.per_page,e.last_page=a.data.order.last_page,e.option=a.data.company,t.close()})},seach:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get("/crm.Order/order_receivables_add?id="+this.$route.params.id+"&name="+this.name+"&money="+this.money+"&supplier_id="+this.company).then(function(a){e.tableProduct=a.data.order.data,e.currentPage=Number(a.data.order.current_page),e.total=Number(a.data.order.total),e.per_page=Number(a.data.order.per_page),e.last_page=Number(a.data.order.last_page),t.close()})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get("/crm.Order/order_receivables_add?id="+this.$route.params.id+"&page="+e+"&name="+this.name+"&money="+this.money+"&supplier_id="+this.company).then(function(e){t.tableProduct=e.data.order.data,t.currentPage=Number(e.data.order.current_page),t.total=Number(e.data.order.total),t.per_page=Number(e.data.order.per_page),t.last_page=Number(e.data.order.last_page),a.close()})},add:function(){var e=this,t=[];if(0!==this.checkboxGroup.length){for(var a=0;a<this.checkboxGroup.length;a++){for(var i=this.checkboxGroup[a],r=i.product_sku,s=[],o=0;o<r.length;o++){var l={customer_order_product_sku_id:r[o].id,money:r[o].money};s.push(l)}var n={customer_order_id:i.id,product_sku:s};t.push(n)}this.axios.post("/crm.Order/order_receivables_add",{id:this.tableData[0].id,order:t}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/crm/Order/order_receivables_lists"})):e.open(t.data.msg,"error")})}else this.open("勾选产品","error")},handleSelectionChange:function(e){this.multipleSelection=e},open:function(e,t){this.$message({message:e,type:t})}}),activated:function(){this.$route.params.id&&this.getshuju()}},Va=Wa,Ga=(i("743a"),Object(d["a"])(Va,Ha,Ba,!1,null,"9e6038c6",null)),Qa=Ga.exports,Ka=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"payment_time",label:"汇款时间"}}),a("el-table-column",{attrs:{prop:"source",label:"渠道"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.status[t.row.source]))])]}}])}),a("el-table-column",{attrs:{label:"接收帐号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receiving_name)+":"+e._s(t.row.receiving_account))])]}}])}),a("el-table-column",{attrs:{prop:"payment_amount",label:"金额"}}),a("el-table-column",{attrs:{prop:"remarks",label:"备注"}}),a("el-table-column",{attrs:{prop:"user_name",label:"录入人"}})],1)],1),a("div",{staticClass:"box_piao"},[a("label",[e._v("发票信息")]),a("el-table",{ref:"multipleTable",attrs:{data:e.tableProduct}},[a("el-table-column",{attrs:{prop:"rise",label:"抬头"}}),a("el-table-column",{attrs:{prop:"tax_number",label:"票号"}}),a("el-table-column",{attrs:{prop:"money",label:"金额"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"}})],1)],1),a("label",[e._v("产品信息")]),a("div",{staticClass:"box_product"},e._l(e.tableProduct,function(t){return a("div",{key:t.id,staticClass:"product_inner"},[a("p",{staticStyle:{"padding-bottom":"10px"}},[a("span",[e._v("客户名称："+e._s(t.customer_name)+" ")]),a("span",[e._v("客户电话："+e._s(t.customer_working_phone))]),a("span",[e._v("总销售额："+e._s(t.total_price)+" ")])]),a("el-table",{attrs:{data:t.product_sku}},[a("el-table-column",{attrs:{label:"订单产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.class_name)+e._s(t.row.sku_name))])]}}],null,!0)}),a("el-table-column",{attrs:{prop:"total_price",label:"销售金额"}}),a("el-table-column",{attrs:{label:"认款金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.money))])]}}],null,!0)})],1)],1)}),0)])},Ja=[],Za={data:function(){return{status:["支付宝","微信","银行卡"],tableData:[],tablePiao:[],multipleSelection:[],tableProduct:[],checkboxGroup:[]}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex","triggerDeleteTabs"]),{getshuju:function(){var e=this;this.axios.get("/crm.Order/order_receivables_find?id="+this.$route.params.id).then(function(t){e.tableData.push(t.data),e.tableProduct=t.data.order})},handleSelectionChange:function(e){this.multipleSelection=e},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){this.getshuju()},watch:{$route:function(e){this.$route.params.id&&this.getshuju()}}},Ya=Za,Xa=(i("79c9"),Object(d["a"])(Ya,Ka,Ja,!1,null,"a089f146",null)),ei=Xa.exports,ti=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"beizhu",staticStyle:{overflow:"hidden","margin-top":"20px"}},[a("span",{staticStyle:{float:"left","line-height":"40px","margin-right":"10px"}},[e._v("备注")]),a("el-input",{staticStyle:{float:"left",width:"95%"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),a("div",{staticClass:"content_box_product"},[a("el-button",{on:{click:e.addOrder}},[e._v("添加产品")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"80"}}),a("el-table-column",{attrs:{label:"数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],attrs:{size:"small",value:t.row.number},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.number))])]}}])}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本",width:"80"}}),a("el-table-column",{attrs:{label:"总价",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("keepTowNum")(Number(t.row.cost_price)*Number(t.row.number))))])]}}])}),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true "}],attrs:{size:"small",value:t.row.remarks},model:{value:t.row.remarks,callback:function(a){e.$set(t.row,"remarks",a)},expression:"scope.row.remarks"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.remarks))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}],attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.Editors(t.$index)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],attrs:{type:"success",size:"mini"},on:{click:function(a){return e.updata(t.row,t.$index)}}},[e._v("完成")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletep(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"产品库选择",visible:e.product,width:"65%"},on:{"update:visible":function(t){e.product=t}}},[a("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.tableProductSeach(t)}},model:{value:e.tableProductValue,callback:function(t){e.tableProductValue=t},expression:"tableProductValue"}}),a("el-button",{staticStyle:{"margin-left":"5%"},on:{click:e.tableProductSeach}},[e._v("筛选")]),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableProduct}},[a("el-table-column",{attrs:{label:"产品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"售价"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(a){return e.add(t.row)}}},[e._v("\n                添加\n              ")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("div",{staticClass:"content_box_address"},[a("div",{staticClass:"content_box_address_left"},[a("div",{staticClass:"content_box_address_head"},[a("el-select",{attrs:{filterable:"",placeholder:"请输入公司关键词"},on:{change:e.kehuName},model:{value:e.conmpany,callback:function(t){e.conmpany=t},expression:"conmpany"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{filterable:"",placeholder:"请选择客户名称"},on:{change:e.xzaddress},model:{value:e.kehuValue,callback:function(t){e.kehuValue=t},expression:"kehuValue"}},e._l(e.listKuhuName,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form",{ref:"formAddress",attrs:{model:e.formAddress,inline:""}},[a("el-form-item",[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"名字"},model:{value:e.formAddress.name,callback:function(t){e.$set(e.formAddress,"name",t)},expression:"formAddress.name"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"电话"},model:{value:e.formAddress.phone,callback:function(t){e.$set(e.formAddress,"phone",t)},expression:"formAddress.phone"}})],1),a("br"),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince},model:{value:e.sheng,callback:function(t){e.sheng=t},expression:"sheng"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity},model:{value:e.shi,callback:function(t){e.shi=t},expression:"shi"}},e._l(e.shi1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock},model:{value:e.qu,callback:function(t){e.qu=t},expression:"qu"}},e._l(e.qu1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("br"),a("el-form-item",[a("el-input",{staticStyle:{width:"590px"},attrs:{placeholder:"具体地址"},model:{value:e.formAddress.address,callback:function(t){e.$set(e.formAddress,"address",t)},expression:"formAddress.address"}})],1),a("br"),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.tijiao}},[e._v("保存地址配货信息")])],1)],1)],1),a("div",{staticClass:"content_box_address_right"},[a("h4",[e._v("配货数量填写")]),e._l(e.distributeProduct,function(t){return a("div",{key:t.id,staticClass:"content_box_address_right_inner"},[a("p",{staticStyle:{float:"left",width:"90px",height:"40px","line-height":"40px"}},[e._v(e._s(t.name)+e._s(t.sku_name))]),a("el-input",{staticStyle:{float:"left",width:"100px"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}})],1)})],2)]),a("div",{staticClass:"generatedAddress"},[a("label",[e._v("地址配货信息")]),a("hr"),e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v("付款方式:"+e._s(1==t.payment?"到付":"现付"))]),1==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上门")]):e._e(),2==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上楼")]):e._e(),3==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:自提")]):e._e()]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n              "),e._l(t.product,function(t){return a("span",{key:t.pid,staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2)]),a("div",{staticClass:"generatedAddressInnerRight"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.generatedAddressgengxin(t)}}},[e._v("更新")]),a("br"),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"danger"},on:{click:function(a){return e.generatedAddressshanchu(t)}}},[e._v("删除")])],1)])})],2),a("el-dialog",{attrs:{title:"更新地址配货信息",visible:e.gengxinfixedAddress,width:"65%"},on:{"update:visible":function(t){e.gengxinfixedAddress=t}}},[a("el-form",{attrs:{model:e.fixedAddressform,inline:""}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.fixedAddressform.name,callback:function(t){e.$set(e.fixedAddressform,"name",t)},expression:"fixedAddressform.name"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.fixedAddressform.phone,callback:function(t){e.$set(e.fixedAddressform,"phone",t)},expression:"fixedAddressform.phone"}})],1),a("br"),a("el-form-item",{attrs:{label:"省"}},[a("el-input",{model:{value:e.fixedAddressform.sheng,callback:function(t){e.$set(e.fixedAddressform,"sheng",t)},expression:"fixedAddressform.sheng"}})],1),a("el-form-item",{attrs:{label:"市"}},[a("el-input",{model:{value:e.fixedAddressform.shi,callback:function(t){e.$set(e.fixedAddressform,"shi",t)},expression:"fixedAddressform.shi"}})],1),a("el-form-item",{attrs:{label:"区"}},[a("el-input",{model:{value:e.fixedAddressform.qu,callback:function(t){e.$set(e.fixedAddressform,"qu",t)},expression:"fixedAddressform.qu"}})],1),a("br"),a("el-form-item",{attrs:{label:"具体地址"}},[a("el-input",{staticStyle:{width:"260%"},model:{value:e.fixedAddressform.address,callback:function(t){e.$set(e.fixedAddressform,"address",t)},expression:"fixedAddressform.address"}})],1)],1),a("div",e._l(e.distributeProduct1,function(t){return a("div",{key:t.product_sku_id,staticClass:"content_box_address_right_inner"},[a("p",{staticStyle:{float:"left",width:"90px",height:"40px","line-height":"40px"}},[e._v(e._s(t.name)+e._s(t.sku_name))]),a("el-input",{staticStyle:{float:"left",width:"100px"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}})],1)}),0),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.gengxinfixedAddress=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.pushgengxinfixedAddress}},[e._v("确 定")])],1)],1),a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认提交")])],1)},ai=[],ii={data:function(){return Object(k["a"])({remarks:"",tableProduct:[],loading:!1,currentPage:0,total:0,per_page:0,last_page:0,product:!1,tableProductValue:"",Royalty:!1,customer_order_id:"",tableData:[],edit:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],formRoyalty:{name:"",bumen:"",xishu:"",product_sku_id:"",id:""},conmpany:"",options:[],kehuValue:"",listKuhuName:[],address:!1,formAddress:{name:"",phone:"",sheng:"",shi:"",qu:"",payment:"",delivery:"",address:"",id:""},province:"",city:"",block:"",sheng:"",shi:"",shi1:[],qu:"",qu1:[],ChoiceAddress:[],distributeProduct:[],fixedAddress:[],fixedAddressform:{id:null,name:"",phone:"",sheng:"",shi:"",qu:"",address:"",customer_address_id:""},distributeProduct1:[],gengxinfixedAddress:!1,list:[]},"listKuhuName",[])},filters:{keepTowNum:function(e){return e=Number(e),e.toFixed(2)}},methods:{addOrder:function(){var e=this;console.log(this.customer_order_id),""==this.customer_order_id?this.axios.post("/crm.Sample/sample_add",{remarks:this.remarks}).then(function(t){2e3==t.data.code?(e.getProduct(),e.customer_order_id=t.data.id,e.product=!0):e.open(t.data.msg,"error")}):(this.getProduct(),this.product=!0)},getProduct:function(){var e=this;this.axios.get("/erp.product/product_sku_select").then(function(t){e.tableProduct=t.data.product.data,e.currentPage=t.data.product.current_page,e.total=t.data.product.total,e.per_page=t.data.product.per_page,e.last_page=t.data.product.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.product/product_sku_select",{page:e}).then(function(e){t.tableProduct=e.data.product.data,t.currentPage=e.data.product.current_page,t.total=e.data.product.total,t.per_page=e.data.product.per_page,t.last_page=e.data.product.last_page,a.close()})},tableProductSeach:function(){var e=this;this.axios.post("/erp.product/product_sku_select",{name:this.tableProductValue}).then(function(t){e.tableProduct=t.data.product.data,e.currentPage=t.data.product.current_page,e.total=t.data.product.total,e.per_page=t.data.product.per_page,e.last_page=t.data.product.last_page})},add:function(e){var t=this;this.axios.post("/crm.Sample/customer_sample_product_sku_add",{customer_sample_id:this.customer_order_id,product_sku_id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData(t.customer_order_id),t.gettableData1(t.customer_order_id)):t.open(e.data.msg,"error")})},gettableData:function(e){var t=this;this.axios.get("/crm.Sample/customer_sample_product_sku_select?customer_sample_id="+e).then(function(e){t.tableData=e.data.product_sku})},gettableData1:function(e){var t=this;this.axios.get("/crm.Sample/customer_sample_product_sku_select?customer_sample_id="+e).then(function(e){t.distributeProduct=e.data.product_sku})},Editors:function(e){var t=this;this.loading=!0,this.edit[e]=!0,setTimeout(function(){t.loading=!1},3e3),this.getcaogao()},updata:function(e,t){var a=this;""==e.number?this.open("数量不能为空","error"):""==e.selling_price?this.open("单价不能为空","error"):this.axios.post("/crm.Sample/customer_sample_product_sku_update",{id:e.id,number:e.number,unit_price:e.unit_price,selling_price:e.selling_price,remarks:e.remarks}).then(function(e){2e3==e.data.code?(a.edit[t]=!1,a.open(e.data.msg,"success"),a.gettableData(a.customer_order_id),a.gettableData1(a.customer_order_id)):a.open(e.data.msg,"error")})},deletep:function(e){var t=this;this.axios.post("/crm.Sample/customer_sample_product_sku_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData(t.customer_order_id),t.gettableData1(t.customer_order_id)):t.open(e.data.msg,"error")})},xzaddress:function(e){var t=this;this.listKuhuName.filter(function(a){a.id==e&&(t.sheng=a.province,t.shi=a.city,t.qu=a.county,t.formAddress.address=a.address,t.formAddress.name=a.name,t.formAddress.phone=a.working_phone,t.formAddress.sheng=a.province,t.formAddress.shi=a.city,t.formAddress.qu=a.county,t.formAddress.id=a.id)})},getoptions:function(){var e=this;this.axios.get("/crm.Customer/company_list").then(function(t){for(var a=t.data.company,i=0;i<a.length;i++){var r={name:"└".concat(a[i].name),id:a[i].id};if(e.options.push(r),a[i].hasOwnProperty("child"))for(var s=0;s<a[i].child.length;s++){var o={name:"└└".concat(a[i].child[s].name),id:a[i].child[s].id};if(e.options.push(o),a[i].child[s].hasOwnProperty("child"))for(var l=0;l<a[i].child[s].child.length;l++){var n={name:"└└└".concat(a[i].child[s].child[l].name),id:a[i].child[s].child[l].id};if(e.options.push(n),a[i].child[s].child[l].hasOwnProperty("child"))for(var c=0;c<a[i].child[s].child.length;c++)if(void 0==a[i].child[s].child[l].child[c]);else{var d={name:"└└└└".concat(a[i].child[s].child[l].child[c].name),id:a[i].child[s].child[l].child[c].id};e.options.push(d)}}}}})},kehuName:function(e){var t=this;t.axios.post("/crm.Customer/customer_select",{company_id:e}).then(function(e){0==e.data.customer.length&&(t.kehuValue=""),t.listKuhuName=e.data.customer})},getChoiceAddress:function(e){var t=this;this.axios.get("/crm.Customer/customer_address_list?id="+e).then(function(e){t.ChoiceAddress=e.data.customer_address})},addAddress:function(e){this.sheng=e.province,this.shi=e.city,this.qu=e.county,this.formAddress.address=e.address,this.formAddress.name=e.name,this.formAddress.phone=e.phone,this.formAddress.sheng=e.province,this.formAddress.shi=e.city,this.formAddress.qu=e.county,this.formAddress.id=e.id,this.address=!1},tijiao:function(){var e=this;""==this.formAddress.id?""==this.formAddress.address||""==this.formAddress.name||""==this.formAddress.phone||""==this.formAddress.sheng||""==this.formAddress.shi||""==this.formAddress.qu||""==this.kehuValue?this.open("请填写完整客户收货地址","error"):this.axios.post("/crm.Customer/customer_address_add",{customer_id:this.kehuValue,name:this.formAddress.name,phone:this.formAddress.phone,province:this.formAddress.sheng,city:this.formAddress.shi,county:this.formAddress.qu,address:this.formAddress.address,payment:this.formAddress.payment,delivery:this.formAddress.delivery}).then(function(t){2e3==t.data.code?e.posttijiao(t.data.id):e.open(t.data.msg,"error")}):this.posttijiao(this.formAddress.id)},posttijiao:function(e){for(var t=this,a=[],i=0;i<this.distributeProduct.length;i++){var r={number:this.distributeProduct[i].number,customer_sample_product_sku_id:this.distributeProduct[i].id};a.push(r)}""==a[0].number?this.open("配货数量不能为空","error"):this.axios.post("/crm.Sample/customer_sample_customer_add",{customer_sample_id:this.customer_order_id,customer_id:e,name:this.formAddress.name,phone:this.formAddress.phone,province:this.formAddress.sheng,city:this.formAddress.shi,county:this.formAddress.qu,address:this.formAddress.address,payment:this.formAddress.payment,delivery:this.formAddress.delivery,product:a}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.formAddress.address="",t.formAddress.name="",t.formAddress.phone="",t.formAddress.sheng="",t.formAddress.shi="",t.formAddress.qu="",t.formAddress.payment="",t.formAddress.delivery="",t.formAddress.id="",t.sheng="",t.shi="",t.qu="",a=[],t.getfixedAddress()):t.open(e.data.msg,"error")})},getfixedAddress:function(){var e=this;this.axios.get("/crm.Sample/customer_sample_customer_select?customer_sample_id="+this.customer_order_id).then(function(t){e.fixedAddress=t.data.customer})},generatedAddressgengxin:function(e){this.gengxinfixedAddress=!0,this.fixedAddressform.id=e.id,this.fixedAddressform.name=e.name,this.fixedAddressform.phone=e.phone,this.fixedAddressform.sheng=e.province,this.fixedAddressform.shi=e.city,this.fixedAddressform.qu=e.county,this.fixedAddressform.address=e.address,this.fixedAddressform.customer_address_id=e.customer_address_id,this.distributeProduct1=e.product},pushgengxinfixedAddress:function(){var e=this;console.log(this.distributeProduct1);for(var t=[],a=0;a<this.distributeProduct1.length;a++){var i={number:this.distributeProduct1[a].number,customer_sample_product_sku_id:this.distributeProduct1[a].customer_order_product_sku_id};t.push(i)}this.axios.post("/crm.Sample/customer_sample_customer_update",{id:this.fixedAddressform.id,customer_sample_id:this.customer_order_id,customer_address_id:this.fixedAddressform.customer_address_id,name:this.fixedAddressform.name,phone:this.fixedAddressform.phone,province:this.fixedAddressform.sheng,city:this.fixedAddressform.shi,county:this.fixedAddressform.qu,address:this.fixedAddressform.address,product:t}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getfixedAddress(),e.gengxinfixedAddress=!1):e.open(t.data.msg,"error")})},generatedAddressshanchu:function(e){var t=this;this.axios.post("/crm.Sample/customer_sample_customer_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getfixedAddress()):t.open(e.data.msg,"error")})},getCityData:function(){var e=this;e.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in e.province=[],e.city=[],e.block=[],a)i.match(/0000$/)?e.province.push({id:i,value:a[i],children:[]}):i.match(/00$/)?e.city.push({id:i,value:a[i],children:[]}):e.block.push({id:i,value:a[i]});for(var r in e.province)for(var s in e.city)e.province[r].id.slice(0,2)===e.city[s].id.slice(0,2)&&e.province[r].children.push(e.city[s]);for(var o in e.city)for(var l in e.block)e.block[l].id.slice(0,4)===e.city[o].id.slice(0,4)&&e.city[o].children.push(e.block[l])}})},choseProvince:function(e){for(var t in this.province)e===this.province[t].id&&(this.shi1=this.province[t].children,this.shi=this.province[t].children[0].value,this.qu1=this.province[t].children[0].children,this.qu=this.province[t].children[0].children[0].value,this.E=this.qu1[0].value,this.formAddress.sheng=this.province[t].value,this.formAddress.shi=this.province[t].children[0].value,this.formAddress.qu=this.province[t].children[0].children[0].value)},choseCity:function(e){for(var t in this.city)e===this.city[t].id&&(0==this.city[t].children.length?(this.formAddress.qu=" ",this.qu="",this.qu1=[]):(this.qu1=this.city[t].children,this.qu=this.city[t].children[0].value),this.formAddress.shi=this.city[t].value)},choseBlock:function(e){for(var t in this.E=e,this.block)e===this.block[t].id&&(this.formAddress.qu=this.block[t].value)},confirm:function(){var e=this;""!=this.customer_order_id?this.axios.post("/crm.Sample/sample_update",{id:this.customer_order_id,status:"1",remarks:this.remarks}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.customer_order_id="",e.tableProduct=[],e.currentPage=0,e.total=0,e.per_page=0,e.last_page=0,e.tableData=[],e.ChoiceAddress=[],e.distributeProduct=[],e.fixedAddress=[],e.distributeProduct1=[]):e.open(t.data.msg,"error")}):this.open("请选择产品",error)},open:function(e,t){this.$message({message:e,type:t})},getcaogao:function(){var e=this;this.axios.get("/crm.Sample/sample_update?id=0").then(function(t){void 0===t.data.sample&&(e.remarks=t.data.remarks,e.customer_order_id=t.data.id,console.log(t.data.id),e.gettableData(t.data.id),e.gettableData1(t.data.id),e.getfixedAddress(t.data.id)),e.optionsSalesman=t.data.user})},getchildmsg:function(e){1==e&&(this.getfixedAddress(),this.dialogExcel=!1,this.open("上传成功","success"))},change:function(e){return e<10?"0"+e:e}},created:function(){var e=new Date,t=e.getFullYear(),a=this.change(e.getMonth()+1),i=this.change(e.getDate()),r=this.change(e.getHours()),s=this.change(e.getMinutes()),o=this.change(e.getSeconds());this.starttime=t+"-"+a+"-"+i+" "+r+":"+s+":"+o,this.getCityData(),this.getcaogao(),this.getoptions()},watch:{$route:function(e){var t=new Date,a=t.getFullYear(),i=this.change(t.getMonth()+1),r=this.change(t.getDate()),s=this.change(t.getHours()),o=this.change(t.getMinutes()),l=this.change(t.getSeconds());this.starttime=a+"-"+i+"-"+r+" "+s+":"+o+":"+l,this.getCityData(),this.getcaogao(),this.getoptions()}}},ri=ii,si=(i("25d0"),Object(d["a"])(ri,ti,ai,!1,null,"f308eec8",null)),oi=si.exports,li=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"}},[e._v("确认")])],1),a("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"寄送客户数",prop:"customer_count"}}),a("el-table-column",{attrs:{label:"寄送样品数",prop:"product_sku_count"}}),a("el-table-column",{attrs:{label:"寄出日期",prop:"add_time",width:"160"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"业务员",prop:"user_name"}}),a("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("草稿")]):e._e(),1==t.row.status?a("span",[e._v("等待采购配货")]):e._e(),10==t.row.status?a("span",[e._v("等待财务审核")]):e._e(),20==t.row.status?a("span",[e._v("等待财务审核")]):e._e(),30==t.row.status?a("span",[e._v("等待发货")]):e._e(),40==t.row.status?a("span",[e._v("已经发货")]):e._e(),50==t.row.status?a("span",[e._v("已经收到货")]):e._e(),90==t.row.status?a("span",[e._v("结束")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"210"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.status<10,expression:"scope.row.status < 10"}],attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updata(t.row)}}},[e._v("修改")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=t.row.status,expression:"scope.row.status != 0"}],attrs:{type:"info",size:"mini"},on:{click:function(a){return e.see(t.row)}}},[e._v("查看")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.status<10,expression:"scope.row.status < 10"}],attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletes(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},ni=[],ci={data:function(){return{seach:"",tableData:[],currentPage:0,total:0,per_page:0,last_page:0}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{gettableData:function(){var e=this;this.axios.get("/crm.Sample/sample_lists").then(function(t){e.tableData=t.data.sample.data,e.currentPage=t.data.sample.current_page,e.total=t.data.sample.total,e.per_page=t.data.sample.per_page,e.last_page=t.data.sample.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/crm.Sample/sample_lists",{page:e,company_id:this.value,user_name:this.value1,customer_name:this.value2}).then(function(e){t.tableData=e.data.sample.data,t.currentPage=e.data.sample.current_page,t.total=e.data.sample.total,t.per_page=e.data.sample.per_page,t.last_page=e.data.sample.last_page,a.close()})},updata:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/crm/Sample/updata_sample/".concat(e.id),params:{userId:e.id,name:"/crm/Sample/updata_sample/".concat(e.id)}});var t={route:"/crm/Sample/updata_sample/".concat(e.id),name:"样品修改"},a="/crm/Sample/updata_sample/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},deletes:function(e){var t=this;this.axios.post("/crm.Sample/sample_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.gettableData(),t.open(e.data.msg,"success")):t.open(e.data.msg,"error")})},see:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/crm/Sample/seeSample/".concat(e.id),params:{userId:e.id,name:"/crm/Sample/seeSample/".concat(e.id)}});var t={route:"/crm/Sample/seeSample/".concat(e.id),name:"样品查看"},a="/crm/Sample/seeSample/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},open:function(e,t){this.$message({message:e,type:t})}}),activated:function(){this.gettableData()}},di=ci,ui=Object(d["a"])(di,li,ni,!1,null,null,null),pi=ui.exports,mi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"beizhu",staticStyle:{overflow:"hidden","margin-top":"20px"}},[a("span",{staticStyle:{float:"left","line-height":"40px","margin-right":"10px"}},[e._v("备注")]),a("el-input",{staticStyle:{float:"left",width:"95%"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),a("div",{staticClass:"content_box_product"},[a("el-button",{on:{click:e.addOrder}},[e._v("添加产品")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"80"}}),a("el-table-column",{attrs:{label:"数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],attrs:{size:"small",value:t.row.number},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.number))])]}}])}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本",width:"80"}}),a("el-table-column",{attrs:{label:"总价",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("keepTowNum")(Number(t.row.cost_price)*Number(t.row.number))))])]}}])}),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true "}],attrs:{size:"small",value:t.row.remarks},model:{value:t.row.remarks,callback:function(a){e.$set(t.row,"remarks",a)},expression:"scope.row.remarks"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}]},[e._v(e._s(t.row.remarks))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.edit[t.$index],expression:"edit[scope.$index] == false"}],attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.Editors(t.$index)}}},[e._v("编辑")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.edit[t.$index],expression:"edit[scope.$index] == true"}],attrs:{type:"success",size:"mini"},on:{click:function(a){return e.updata(t.row,t.$index)}}},[e._v("完成")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletep(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"产品库选择",visible:e.product,width:"65%"},on:{"update:visible":function(t){e.product=t}}},[a("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"名称搜索"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.tableProductSeach(t)}},model:{value:e.tableProductValue,callback:function(t){e.tableProductValue=t},expression:"tableProductValue"}}),a("el-button",{staticStyle:{"margin-left":"5%"},on:{click:e.tableProductSeach}},[e._v("筛选")]),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableProduct}},[a("el-table-column",{attrs:{label:"产品图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"售价"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(a){return e.add(t.row)}}},[e._v("\n                添加\n              ")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("div",{staticClass:"content_box_address"},[a("div",{staticClass:"content_box_address_left"},[a("div",{staticClass:"content_box_address_head"},[a("el-select",{attrs:{filterable:"",placeholder:"请输入公司关键词"},on:{change:e.kehuName},model:{value:e.conmpany,callback:function(t){e.conmpany=t},expression:"conmpany"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{filterable:"",placeholder:"请选择客户名称"},on:{change:e.xzaddress},model:{value:e.kehuValue,callback:function(t){e.kehuValue=t},expression:"kehuValue"}},e._l(e.listKuhuName,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form",{ref:"formAddress",attrs:{model:e.formAddress,inline:""}},[a("el-form-item",[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"名字"},model:{value:e.formAddress.name,callback:function(t){e.$set(e.formAddress,"name",t)},expression:"formAddress.name"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"电话"},model:{value:e.formAddress.phone,callback:function(t){e.$set(e.formAddress,"phone",t)},expression:"formAddress.phone"}})],1),a("br"),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince},model:{value:e.sheng,callback:function(t){e.sheng=t},expression:"sheng"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity},model:{value:e.shi,callback:function(t){e.shi=t},expression:"shi"}},e._l(e.shi1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock},model:{value:e.qu,callback:function(t){e.qu=t},expression:"qu"}},e._l(e.qu1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("br"),a("el-form-item",[a("el-input",{staticStyle:{width:"590px"},attrs:{placeholder:"具体地址"},model:{value:e.formAddress.address,callback:function(t){e.$set(e.formAddress,"address",t)},expression:"formAddress.address"}})],1),a("br"),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.tijiao}},[e._v("保存地址配货信息")])],1)],1)],1),a("div",{staticClass:"content_box_address_right"},[a("h4",[e._v("配货数量填写")]),e._l(e.distributeProduct,function(t){return a("div",{key:t.id,staticClass:"content_box_address_right_inner"},[a("p",{staticStyle:{float:"left",width:"90px",height:"40px","line-height":"40px"}},[e._v(e._s(t.name)+e._s(t.sku_name))]),a("el-input",{staticStyle:{float:"left",width:"100px"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}})],1)})],2)]),a("el-dialog",{attrs:{title:"客户选择",visible:e.address},on:{"update:visible":function(t){e.address=t}}},[a("div",{staticClass:"ChoiceAddress",staticStyle:{height:"400px","overflow-y":"scroll"}})]),a("div",{staticClass:"generatedAddress"},[a("label",[e._v("地址配货信息")]),a("hr"),e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v("付款方式:"+e._s(1==t.payment?"到付":"现付"))]),1==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上门")]):e._e(),2==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上楼")]):e._e(),3==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:自提")]):e._e()]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n              "),e._l(t.product,function(t){return a("span",{key:t.pid,staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2)]),a("div",{staticClass:"generatedAddressInnerRight"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.generatedAddressgengxin(t)}}},[e._v("更新")]),a("br"),a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"danger"},on:{click:function(a){return e.generatedAddressshanchu(t)}}},[e._v("删除")])],1)])})],2),a("el-dialog",{attrs:{title:"更新地址配货信息",visible:e.gengxinfixedAddress,width:"65%"},on:{"update:visible":function(t){e.gengxinfixedAddress=t}}},[a("el-form",{attrs:{model:e.fixedAddressform,inline:""}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.fixedAddressform.name,callback:function(t){e.$set(e.fixedAddressform,"name",t)},expression:"fixedAddressform.name"}})],1),a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.fixedAddressform.phone,callback:function(t){e.$set(e.fixedAddressform,"phone",t)},expression:"fixedAddressform.phone"}})],1),a("br"),a("el-form-item",{attrs:{label:"省"}},[a("el-input",{model:{value:e.fixedAddressform.sheng,callback:function(t){e.$set(e.fixedAddressform,"sheng",t)},expression:"fixedAddressform.sheng"}})],1),a("el-form-item",{attrs:{label:"市"}},[a("el-input",{model:{value:e.fixedAddressform.shi,callback:function(t){e.$set(e.fixedAddressform,"shi",t)},expression:"fixedAddressform.shi"}})],1),a("el-form-item",{attrs:{label:"区"}},[a("el-input",{model:{value:e.fixedAddressform.qu,callback:function(t){e.$set(e.fixedAddressform,"qu",t)},expression:"fixedAddressform.qu"}})],1),a("br"),a("el-form-item",{attrs:{label:"具体地址"}},[a("el-input",{staticStyle:{width:"260%"},model:{value:e.fixedAddressform.address,callback:function(t){e.$set(e.fixedAddressform,"address",t)},expression:"fixedAddressform.address"}})],1)],1),a("div",e._l(e.distributeProduct1,function(t){return a("div",{key:t.product_sku_id,staticClass:"content_box_address_right_inner"},[a("p",{staticStyle:{float:"left",width:"90px",height:"40px","line-height":"40px"}},[e._v(e._s(t.name)+e._s(t.sku_name))]),a("el-input",{staticStyle:{float:"left",width:"100px"},model:{value:t.number,callback:function(a){e.$set(t,"number",a)},expression:"item.number"}})],1)}),0),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.gengxinfixedAddress=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.pushgengxinfixedAddress}},[e._v("确 定")])],1)],1),a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认提交")])],1)},hi=[],fi={data:function(){return Object(k["a"])({remarks:"",tableProduct:[],loading:!1,currentPage:0,total:0,per_page:0,last_page:0,product:!1,tableProductValue:"",Royalty:!1,customer_order_id:"",tableData:[],edit:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],formRoyalty:{name:"",bumen:"",xishu:"",product_sku_id:"",id:""},conmpany:"",options:[],kehuValue:"",listKuhuName:[],address:!1,formAddress:{name:"",phone:"",sheng:"",shi:"",qu:"",payment:"",delivery:"",address:"",id:""},province:"",city:"",block:"",sheng:"",shi:"",shi1:[],qu:"",qu1:[],ChoiceAddress:[],distributeProduct:[],fixedAddress:[],fixedAddressform:{id:null,name:"",phone:"",sheng:"",shi:"",qu:"",address:"",customer_address_id:""},distributeProduct1:[],gengxinfixedAddress:!1,list:[]},"listKuhuName",[])},filters:{keepTowNum:function(e){return e=Number(e),e.toFixed(2)}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{addOrder:function(){var e=this;""==this.customer_order_id?this.axios.post("/crm.Sample/sample_add",{remarks:this.remarks}).then(function(t){2e3==t.data.code?(e.getProduct(),e.customer_order_id=t.data.id,e.product=!0):e.open(t.data.msg,"error")}):(this.getProduct(),this.product=!0)},getProduct:function(){var e=this;this.axios.get("/erp.product/product_sku_select").then(function(t){e.tableProduct=t.data.product.data,e.currentPage=t.data.product.current_page,e.total=t.data.product.total,e.per_page=t.data.product.per_page,e.last_page=t.data.product.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.product/product_sku_select",{page:e}).then(function(e){t.tableProduct=e.data.product.data,t.currentPage=e.data.product.current_page,t.total=e.data.product.total,t.per_page=e.data.product.per_page,t.last_page=e.data.product.last_page,a.close()})},tableProductSeach:function(){var e=this;this.axios.post("/erp.product/product_sku_select",{name:this.tableProductValue}).then(function(t){e.tableProduct=t.data.product.data,e.currentPage=t.data.product.current_page,e.total=t.data.product.total,e.per_page=t.data.product.per_page,e.last_page=t.data.product.last_page})},add:function(e){var t=this;this.axios.post("/crm.Sample/customer_sample_product_sku_add",{customer_sample_id:this.customer_order_id,product_sku_id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData(t.customer_order_id),t.gettableData1(t.customer_order_id)):t.open(e.data.msg,"error")})},gettableData:function(e){var t=this;this.axios.get("/crm.Sample/customer_sample_product_sku_select?customer_sample_id="+e).then(function(e){t.tableData=e.data.product_sku})},gettableData1:function(e){var t=this;this.axios.get("/crm.Sample/customer_sample_product_sku_select?customer_sample_id="+e).then(function(e){t.distributeProduct=e.data.product_sku})},Editors:function(e){var t=this;this.loading=!0,this.edit[e]=!0,setTimeout(function(){t.loading=!1},3e3),this.getcaogao()},updata:function(e,t){var a=this;""==e.number?this.open("数量不能为空","error"):""==e.selling_price?this.open("单价不能为空","error"):this.axios.post("/crm.Sample/customer_sample_product_sku_update",{id:e.id,number:e.number,unit_price:e.unit_price,selling_price:e.selling_price,remarks:e.remarks}).then(function(e){2e3==e.data.code?(a.edit[t]=!1,a.open(e.data.msg,"success"),a.gettableData(a.customer_order_id),a.gettableData1(a.customer_order_id)):a.open(e.data.msg,"error")})},deletep:function(e){var t=this;this.axios.post("/crm.Sample/customer_sample_product_sku_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData(t.customer_order_id),t.gettableData1(t.customer_order_id)):t.open(e.data.msg,"error")})},xzaddress:function(e){var t=this;this.listKuhuName.filter(function(a){a.id==e&&(t.sheng=a.province,t.shi=a.city,t.qu=a.county,t.formAddress.address=a.address,t.formAddress.name=a.name,t.formAddress.phone=a.working_phone,t.formAddress.sheng=a.province,t.formAddress.shi=a.city,t.formAddress.qu=a.county,t.formAddress.id=a.id)})},getoptions:function(){var e=this;this.axios.get("/crm.Customer/company_list").then(function(t){for(var a=t.data.company,i=0;i<a.length;i++){var r={name:"└".concat(a[i].name),id:a[i].id};if(e.options.push(r),a[i].hasOwnProperty("child"))for(var s=0;s<a[i].child.length;s++){var o={name:"└└".concat(a[i].child[s].name),id:a[i].child[s].id};if(e.options.push(o),a[i].child[s].hasOwnProperty("child"))for(var l=0;l<a[i].child[s].child.length;l++){var n={name:"└└└".concat(a[i].child[s].child[l].name),id:a[i].child[s].child[l].id};if(e.options.push(n),a[i].child[s].child[l].hasOwnProperty("child"))for(var c=0;c<a[i].child[s].child.length;c++)if(void 0==a[i].child[s].child[l].child[c]);else{var d={name:"└└└└".concat(a[i].child[s].child[l].child[c].name),id:a[i].child[s].child[l].child[c].id};e.options.push(d)}}}}})},kehuName:function(e){var t=this;t.axios.post("/crm.Customer/customer_select",{company_id:e}).then(function(e){0==e.data.customer.length&&(t.kehuValue=""),t.listKuhuName=e.data.customer})},getChoiceAddress:function(e){var t=this;this.axios.get("/crm.Customer/customer_address_list?id="+e).then(function(e){t.ChoiceAddress=e.data.customer_address})},addAddress:function(e){this.sheng=e.province,this.shi=e.city,this.qu=e.county,this.formAddress.address=e.address,this.formAddress.name=e.name,this.formAddress.phone=e.phone,this.formAddress.sheng=e.province,this.formAddress.shi=e.city,this.formAddress.qu=e.county,this.formAddress.id=e.id,this.address=!1},tijiao:function(){var e=this;""==this.formAddress.id?""==this.formAddress.address||""==this.formAddress.name||""==this.formAddress.phone||""==this.formAddress.sheng||""==this.formAddress.shi||""==this.formAddress.qu?this.open("请填写完整客户收货地址","error"):this.axios.post("/crm.Customer/customer_address_add",{customer_id:this.kehuValue,name:this.formAddress.name,phone:this.formAddress.phone,province:this.formAddress.sheng,city:this.formAddress.shi,county:this.formAddress.qu,address:this.formAddress.address,payment:this.formAddress.payment,delivery:this.formAddress.delivery}).then(function(t){2e3==t.data.code?e.posttijiao(t.data.id):e.open(t.data.msg,"error")}):this.posttijiao(this.formAddress.id)},posttijiao:function(e){for(var t=this,a=[],i=0;i<this.distributeProduct.length;i++){var r={number:this.distributeProduct[i].number,customer_sample_product_sku_id:this.distributeProduct[i].id};a.push(r)}""==a[0].number?this.open("配货数量不能为空","error"):this.axios.post("/crm.Sample/customer_sample_customer_add",{customer_sample_id:this.customer_order_id,customer_id:e,name:this.formAddress.name,phone:this.formAddress.phone,province:this.formAddress.sheng,city:this.formAddress.shi,county:this.formAddress.qu,address:this.formAddress.address,payment:this.formAddress.payment,delivery:this.formAddress.delivery,product:a}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.formAddress.address="",t.formAddress.name="",t.formAddress.phone="",t.formAddress.sheng="",t.formAddress.shi="",t.formAddress.qu="",t.formAddress.payment="",t.formAddress.delivery="",t.formAddress.id="",t.sheng="",t.shi="",t.qu="",a=[],t.getfixedAddress()):t.open(e.data.msg,"error")})},getfixedAddress:function(){var e=this;this.axios.get("/crm.Sample/customer_sample_customer_select?customer_sample_id="+this.customer_order_id).then(function(t){e.fixedAddress=t.data.customer})},generatedAddressgengxin:function(e){this.gengxinfixedAddress=!0,this.fixedAddressform.id=e.id,this.fixedAddressform.name=e.name,this.fixedAddressform.phone=e.phone,this.fixedAddressform.sheng=e.province,this.fixedAddressform.shi=e.city,this.fixedAddressform.qu=e.county,this.fixedAddressform.address=e.address,this.fixedAddressform.customer_address_id=e.customer_address_id,this.distributeProduct1=e.product},pushgengxinfixedAddress:function(){var e=this;console.log(this.distributeProduct1);for(var t=[],a=0;a<this.distributeProduct1.length;a++){var i={number:this.distributeProduct1[a].number,customer_sample_product_sku_id:this.distributeProduct1[a].customer_order_product_sku_id};t.push(i)}this.axios.post("/crm.Sample/customer_sample_customer_update",{id:this.fixedAddressform.id,customer_sample_id:this.customer_order_id,customer_address_id:this.fixedAddressform.customer_address_id,name:this.fixedAddressform.name,phone:this.fixedAddressform.phone,province:this.fixedAddressform.sheng,city:this.fixedAddressform.shi,county:this.fixedAddressform.qu,address:this.fixedAddressform.address,product:t}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getfixedAddress(),e.gengxinfixedAddress=!1):e.open(t.data.msg,"error")})},generatedAddressshanchu:function(e){var t=this;this.axios.post("/crm.Sample/customer_sample_customer_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getfixedAddress()):t.open(e.data.msg,"error")})},getCityData:function(){var e=this;e.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in e.province=[],e.city=[],e.block=[],a)i.match(/0000$/)?e.province.push({id:i,value:a[i],children:[]}):i.match(/00$/)?e.city.push({id:i,value:a[i],children:[]}):e.block.push({id:i,value:a[i]});for(var r in e.province)for(var s in e.city)e.province[r].id.slice(0,2)===e.city[s].id.slice(0,2)&&e.province[r].children.push(e.city[s]);for(var o in e.city)for(var l in e.block)e.block[l].id.slice(0,4)===e.city[o].id.slice(0,4)&&e.city[o].children.push(e.block[l])}})},choseProvince:function(e){for(var t in this.province)e===this.province[t].id&&(this.shi1=this.province[t].children,this.shi=this.province[t].children[0].value,this.qu1=this.province[t].children[0].children,this.qu=this.province[t].children[0].children[0].value,this.E=this.qu1[0].value,this.formAddress.sheng=this.province[t].value,this.formAddress.shi=this.province[t].children[0].value,this.formAddress.qu=this.province[t].children[0].children[0].value)},choseCity:function(e){for(var t in this.city)e===this.city[t].id&&(0==this.city[t].children.length?(this.formAddress.qu=" ",this.qu="",this.qu1=[]):(this.qu1=this.city[t].children,this.qu=this.city[t].children[0].value),this.formAddress.shi=this.city[t].value)},choseBlock:function(e){for(var t in this.E=e,this.block)e===this.block[t].id&&(this.formAddress.qu=this.block[t].value)},confirm:function(){var e=this;""!=this.customer_order_id?this.axios.post("/crm.Sample/sample_update",{id:this.customer_order_id,status:"1",remarks:this.remarks}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.customer_order_id="",e.tableProduct=[],e.currentPage=0,e.total=0,e.per_page=0,e.last_page=0,e.tableData=[],e.ChoiceAddress=[],e.distributeProduct=[],e.fixedAddress=[],e.distributeProduct1=[],e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/crm/Sample/sample_lists"})):e.open(t.data.msg,"error")}):this.open("请选择产品",error)},open:function(e,t){this.$message({message:e,type:t})},getcaogao:function(){var e=this;this.axios.get("/crm.Sample/sample_update?id="+this.$route.params.id).then(function(t){void 0===t.data.sample&&(e.remarks=t.data.remarks,e.customer_order_id=t.data.id,e.gettableData(t.data.id),e.gettableData1(t.data.id),e.getfixedAddress(t.data.id)),e.optionsSalesman=t.data.user})},getchildmsg:function(e){1==e&&(this.getfixedAddress(),this.dialogExcel=!1,this.open("上传成功","success"))},change:function(e){return e<10?"0"+e:e}}),created:function(){if(this.$route.params.id){var e=new Date,t=e.getFullYear(),a=this.change(e.getMonth()+1),i=this.change(e.getDate()),r=this.change(e.getHours()),s=this.change(e.getMinutes()),o=this.change(e.getSeconds());this.starttime=t+"-"+a+"-"+i+" "+r+":"+s+":"+o,this.getCityData(),this.getcaogao(),this.getoptions()}},watch:{$route:function(e){if(this.$route.params.id){var t=new Date,a=t.getFullYear(),i=this.change(t.getMonth()+1),r=this.change(t.getDate()),s=this.change(t.getHours()),o=this.change(t.getMinutes()),l=this.change(t.getSeconds());this.starttime=a+"-"+i+"-"+r+" "+s+":"+o+":"+l,this.getCityData(),this.getcaogao(),this.getoptions()}}}},_i=fi,gi=(i("adaa"),Object(d["a"])(_i,mi,hi,!1,null,"6aaad9e5",null)),bi=gi.exports,vi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"beizhu",staticStyle:{overflow:"hidden","margin-top":"20px"}},[a("span",{staticStyle:{float:"left","line-height":"40px","margin-right":"10px"}},[e._v("备注")]),a("el-input",{staticStyle:{float:"left",width:"95%"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}})],1),a("div",{staticClass:"content_box_product"},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{label:"产品名称",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.number))])]}}])}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本"}}),a("el-table-column",{attrs:{label:"总价"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("keepTowNum")(Number(t.row.cost_price)*Number(t.row.number))))])]}}])}),a("el-table-column",{attrs:{label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.remarks))])]}}])})],1)],1),a("div",{staticClass:"generatedAddress"},[a("label",[e._v("地址配货信息")]),a("hr"),e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v("付款方式:"+e._s(1==t.payment?"到付":"现付"))]),1==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上门")]):e._e(),2==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上楼")]):e._e(),3==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:自提")]):e._e()]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n              "),e._l(t.product,function(t){return a("span",{key:t.pid,staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2)]),a("div",{staticClass:"generatedAddressInnerRight"},[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.addWuliu(t)}}},[e._v("添加物流信息")])],1),a("el-table",{attrs:{data:t.express}},[a("el-table-column",{attrs:{label:"物流名称",prop:"express_name"}}),a("el-table-column",{attrs:{label:"物流编号",prop:"express_numbers"}}),a("el-table-column",{attrs:{label:"费用",prop:"express_price"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"添加时间",prop:"add_time"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("未签收")]):e._e(),6==t.row.status?a("span",[e._v("已签收")]):e._e()]}}],null,!0)}),a("el-table-column",{attrs:{label:"操作",width:"210px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.updata(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(a){return e.see(t.row)}}},[e._v("查看")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deteles(t.row)}}},[e._v("删除")])]}}],null,!0)})],1)],1)})],2),a("el-dialog",{attrs:{visible:e.wuliu,title:"物流信息添加"},on:{"update:visible":function(t){e.wuliu=t}}},[a("el-form",{attrs:{model:e.wuliuForm}},[a("el-form-item",{attrs:{label:"物流名称","label-width":"90px"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.wuliuForm.express_id,callback:function(t){e.$set(e.wuliuForm,"express_id",t)},expression:"wuliuForm.express_id"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"物流编号","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.wuliuForm.express_numbers,callback:function(t){e.$set(e.wuliuForm,"express_numbers",t)},expression:"wuliuForm.express_numbers"}})],1),a("el-form-item",{attrs:{label:"联系方式","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.wuliuForm.express_phone,callback:function(t){e.$set(e.wuliuForm,"express_phone",t)},expression:"wuliuForm.express_phone"}})],1),a("el-form-item",{attrs:{label:"费用","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.wuliuForm.express_price,callback:function(t){e.$set(e.wuliuForm,"express_price",t)},expression:"wuliuForm.express_price"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{type:"textarea"},model:{value:e.wuliuForm.remarks,callback:function(t){e.$set(e.wuliuForm,"remarks",t)},expression:"wuliuForm.remarks"}})],1),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{on:{click:e.addInfo}},[e._v("提交")])],1)],1)],1),a("el-dialog",{attrs:{visible:e.wuliuInfo,title:"物流信息"},on:{"update:visible":function(t){e.wuliuInfo=t}}},[a("el-timeline",{attrs:{reverse:"false"}},e._l(e.express,function(t,i){return a("el-timeline-item",{key:i,attrs:{timestamp:t.time}},[e._v("\n                  "+e._s(t.context)+"\n              ")])}),1)],1)],1)},yi=[],xi={data:function(){return{remarks:"",tableData:[],fixedAddress:[],wuliu:!1,wuliuForm:{id:"",customer_sample_id:"",customer_sample_customer_id:"",express_id:"",express_numbers:"",express_price:"",express_phone:"",remarks:""},options:[],wuliuInfo:!1,express:[]}},filters:{keepTowNum:function(e){return e=Number(e),e.toFixed(2)}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{gettableData:function(e){var t=this;this.axios.get("/crm.Sample/customer_sample_product_sku_select?customer_sample_id="+e).then(function(e){t.tableData=e.data.product_sku})},getfixedAddress:function(e){var t=this;this.axios.get("/crm.Sample/customer_sample_customer_select?customer_sample_id="+e).then(function(e){t.fixedAddress=e.data.customer,t.options=e.data.express})},addWuliu:function(e){this.wuliu=!0,this.wuliuForm.customer_sample_id=e.customer_sample_id,this.wuliuForm.customer_sample_customer_id=e.id,this.wuliuForm.express_id="",this.wuliuForm.express_numbers="",this.wuliuForm.express_price="",this.wuliuForm.express_phone="",this.wuliuForm.remarks="",this.wuliuForm.id=""},updata:function(e){this.wuliuForm.customer_sample_id=e.customer_sample_id,this.wuliuForm.customer_sample_customer_id=e.customer_sample_customer_id,this.wuliuForm.express_id=e.express_id,this.wuliuForm.express_numbers=e.express_numbers,this.wuliuForm.express_price=e.express_price,this.wuliuForm.express_phone=e.express_phone,this.wuliuForm.remarks=e.remarks,this.wuliuForm.id=e.id,this.wuliu=!0},addInfo:function(){var e=this;""==this.wuliuForm.id?this.axios.post("/crm.Sample/sample_express_add",{customer_sample_id:this.wuliuForm.customer_sample_id,customer_sample_customer_id:this.wuliuForm.customer_sample_customer_id,express_id:this.wuliuForm.express_id,express_numbers:this.wuliuForm.express_numbers,express_price:this.wuliuForm.express_price,express_phone:this.wuliuForm.express_phone,remarks:this.wuliuForm.remarks}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getfixedAddress(e.$route.params.id),e.wuliu=!1):e.open(t.data.msg,"error")}):this.axios.post("/crm.Sample/sample_express_update",{customer_sample_id:this.wuliuForm.customer_sample_id,customer_sample_customer_id:this.wuliuForm.customer_sample_customer_id,express_id:this.wuliuForm.express_id,express_numbers:this.wuliuForm.express_numbers,express_price:this.wuliuForm.express_price,express_phone:this.wuliuForm.express_phone,remarks:this.wuliuForm.remarks,id:this.wuliuForm.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getfixedAddress(e.$route.params.id),e.wuliu=!1):e.open(t.data.msg,"error")})},see:function(e){var t=this;this.axios.post("/crm.Sample/sample_express_synchronization",{customer_sample_id:e.customer_sample_id,customer_sample_express_id:e.id,name:e.express_name,number:e.express_numbers,customer_sample_customer_id:e.customer_sample_customer_id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.express=e.data.express_tracking,t.wuliuInfo=!0):t.open(e.data.msg,"error")})},deteles:function(e){var t=this;this.axios.post("/crm.Sample/sample_express_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getfixedAddress(t.$route.params.id)):t.open(e.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})},getcaogao:function(){var e=this;this.axios.get("/crm.Sample/sample_update?id="+this.$route.params.id).then(function(t){void 0===t.data.order&&(e.remarks=t.data.remarks,e.gettableData(t.data.id),e.getfixedAddress(t.data.id))})}}),created:function(){this.$route.params.id&&this.getcaogao()},watch:{$route:function(e){this.$route.params.id&&this.getcaogao()}}},ki=xi,wi=(i("099b"),Object(d["a"])(ki,vi,yi,!1,null,"1aa3fe56",null)),Si=wi.exports,Ai=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.schanPing,callback:function(t){e.schanPing=t},expression:"schanPing"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seach}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.sku?a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:"true"}},e._l(t.row.sku,function(t,i){return a("el-form-item",{key:t.id,staticClass:"demo-table-expand",staticStyle:{overflow:"hidden","margin-top":"10px",width:"1100px"},attrs:{"label-position":"left",inline:"",label:i+1}},[a("img",{staticStyle:{width:"70px",height:"70px",float:"left"},attrs:{src:t.src}}),a("p",{staticStyle:{float:"left","margin-top":"15px","margin-left":"10px"}},[a("span",[e._v(e._s(t.sku_name))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("成本价："+e._s(t.cost_price))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("销售价："+e._s(t.selling_price))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("起订量："+e._s(t.starting_quantity)+e._s(t.unit))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("货期："+e._s(t.maximum_delivery)+"--"+e._s(t.slowest_delivery))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s("是"==t.firm_id?"不可定制公司专版":"可定制公司专版"))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s("是"==t.logo?"不可定制logo":"可定制logo"))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("添加时间:"+e._s(t.add_time))])]),a("el-button",{staticStyle:{"margin-top":"20px","margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.beihuo(t.id)}}},[e._v("备货")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.kucun(t.id)}}},[e._v("添加库存")])],1)}),1):a("el-form",[a("el-form-item",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("span",[e._v("暂无附加产品")])])],1)]}}])}),a("el-table-column",{attrs:{prop:"name",label:"产品"}}),a("el-table-column",{attrs:{prop:"class_name",label:"类别"}}),a("el-table-column",{attrs:{prop:"supplier",label:"供应商数"}}),a("el-table-column",{attrs:{label:"修改"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.Edit(t.row)}}},[e._v("修改")])]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"备货",visible:e.details,width:"50%"},on:{"update:visible":function(t){e.details=t}}},[a("el-form",{attrs:{model:e.detailsData}},[a("el-form-item",{attrs:{label:"数量","label-width":"90px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.detailsData.number,callback:function(t){e.$set(e.detailsData,"number",t)},expression:"detailsData.number"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.details=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addBeihuo}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加库存",visible:e.addDetails,width:"50%"},on:{"update:visible":function(t){e.addDetails=t}}},[a("el-form",{attrs:{model:e.addDetailsData}},[a("el-form-item",{attrs:{label:"供应商","label-width":"90px"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:e.addDetailsData.supplier_id,callback:function(t){e.$set(e.addDetailsData,"supplier_id",t)},expression:"addDetailsData.supplier_id"}},e._l(e.options_supplier,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"数量","label-width":"90px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.addDetailsData.number,callback:function(t){e.$set(e.addDetailsData,"number",t)},expression:"addDetailsData.number"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"90px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.addDetailsData.content,callback:function(t){e.$set(e.addDetailsData,"content",t)},expression:"addDetailsData.content"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDetails=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addKucun}},[e._v("确 定")])],1)],1)],1)},Ci=[],Fi={data:function(){return{value:"",schanPing:"",maxPrice:"",minPrice:"",tableData:[],details:!1,detailsData:{number:"",id:""},options_supplier:[],addDetails:!1,addDetailsData:{number:"",id:"",supplier_id:"",content:""},currentPage:"",total:"",per_page:"",last_page:""}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.Product/product_list",{page:e,name:this.schanPing}).then(function(e){t.tableData=e.data.product.data,t.currentPage=e.data.product.current_page,t.total=e.data.product.total,t.per_page=e.data.product.per_page,t.last_page=e.data.product.last_page,a.close()})},seach:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.Product/product_list",{name:this.schanPing}).then(function(a){e.tableData=a.data.product.data,e.currentPage=a.data.product.current_page,e.total=a.data.product.total,e.per_page=a.data.product.per_page,e.last_page=a.data.product.last_page,t.close()})},Edit:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/erp/Product/product_update/".concat(e.id),params:{id:e.id}});var t={route:"/erp/Product/product_update/".concat(e.id),name:"修改产品",id:e.id},a="/erp/Product/product_update/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},getData:function(){var e=this;this.axios.get("/erp.Product/product_list").then(function(t){e.tableData=t.data.product.data,e.currentPage=t.data.product.current_page,e.total=t.data.product.total,e.per_page=t.data.product.per_page,e.last_page=t.data.product.last_page})},beihuo:function(e){this.details=!0,this.detailsData.id=e,this.detailsData.number=""},addBeihuo:function(){var e=this;""!=this.detailsData.number?this.axios.post("/erp.Product/product_product_stock_add",{product_sku_id:this.detailsData.id,number:this.detailsData.number}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.details=!1):e.open(t.data.msg,"error")}):this.open("填写备货数量","error")},kucun:function(e){var t=this;this.addDetails=!0,this.addDetailsData.id=e,this.addDetailsData.number="",this.axios.get("/erp.Product/product_supplier_inventory_add").then(function(e){t.options_supplier=e.data.supplier})},addKucun:function(){var e=this;""!=this.addDetailsData.number?this.axios.post("/erp.Product/product_supplier_inventory_add",{supplier_id:this.addDetailsData.supplier_id,product_sku_id:this.addDetailsData.id,number:this.addDetailsData.number,content:this.addDetailsData.content,param:"inc"}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.addDetails=!1):e.open(t.data.msg,"error")}):this.open("填写备货数量","error")},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){var e=this;this.$nextTick(function(){e.getData()})},watch:{$route:function(e){var t=this;this.$nextTick(function(){t.getData()})}}},Pi=Fi,Di=(i("58c0"),Object(d["a"])(Pi,Ai,Ci,!1,null,null,null)),$i=Di.exports,Ii=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input",{staticStyle:{width:"217px","margin-left":"20px"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"}},[e._v("搜索")])],1)])},qi=[],Oi={data:function(){return{options:[{value:"",label:"全部"},{value:"刀具",label:"人保财险"},{value:"手册",label:"人保寿险"},{value:"毛巾",label:"中国人寿"},{value:"中国太平",label:"中国太平"}]}}},Ni=Oi,zi=Object(d["a"])(Ni,Ii,qi,!1,null,"7fa0e255",null),Ti=zi.exports,ji=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"headbox"},[a("el-form",{attrs:{data:e.formProduct}},[a("el-form-item",{attrs:{label:"产品名称","label-width":e.lableWidth}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.formProduct.name,callback:function(t){e.$set(e.formProduct,"name",t)},expression:"formProduct.name"}})],1),a("el-form-item",{attrs:{label:"产品分类","label-width":e.lableWidth}},[a("el-cascader",{attrs:{options:e.options,props:e.props,"change-on-select":""},on:{change:e.handleItemChange}}),""!=e.lei?a("span",[e._v("你当前的选择类型："),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.lei))])]):e._e()],1)],1)],1),a("div",{staticClass:"contentbox"},[a("label",[e._v("SKU编码")]),a("el-button",{staticStyle:{"margin-left":"35px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("添加SKU")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.SKUdata}},[a("el-table-column",{attrs:{prop:"sku_name",label:"类别"}}),a("el-table-column",{attrs:{prop:"firm_id",label:"是否是专版"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.firm_id?"否":"是"))])]}}])}),a("el-table-column",{attrs:{prop:"maximum_delivery",label:"最快交货时间"}}),a("el-table-column",{attrs:{prop:"slowest_delivery",label:"最慢交货时间"}}),a("el-table-column",{attrs:{prop:"starting_quantity",label:"起订量"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{prop:"logo",label:"定制logo"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.logo?"否":"是"))])]}}])}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"销售价格"}}),a("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.editSKU(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"添加修改SKU",visible:e.dialogFormProduct},on:{"update:visible":function(t){e.dialogFormProduct=t}}},[a("el-form",{ref:"Product",attrs:{model:e.Product,inline:""}},[a("el-form-item",{attrs:{label:"类别","label-width":e.lableWidth,prop:"category"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.category,callback:function(t){e.$set(e.Product,"category",t)},expression:"Product.category"}})],1),a("el-form-item",{attrs:{label:"是否是专版","label-width":e.lableWidth,prop:"firm_id"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.Product.firm_id,callback:function(t){e.$set(e.Product,"firm_id",t)},expression:"Product.firm_id"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.Product.firm_id,callback:function(t){e.$set(e.Product,"firm_id",t)},expression:"Product.firm_id"}},[e._v("否")])],1),a("br"),a("el-form-item",{attrs:{label:"最快交货时间","label-width":e.lableWidth,prop:"fastTime"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.fastTime,callback:function(t){e.$set(e.Product,"fastTime",t)},expression:"Product.fastTime"}})],1),a("el-form-item",{attrs:{label:"最慢交货时间","label-width":e.lableWidth,prop:"lastTime"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.lastTime,callback:function(t){e.$set(e.Product,"lastTime",t)},expression:"Product.lastTime"}})],1),a("br"),a("el-form-item",{attrs:{label:"起订量","label-width":e.lableWidth,prop:"StartingQuantity"}},[a("el-input",{staticStyle:{width:"100px"},model:{value:e.Product.StartingQuantity,callback:function(t){e.$set(e.Product,"StartingQuantity",t)},expression:"Product.StartingQuantity"}})],1),a("el-form-item",{attrs:{label:"单位","label-width":e.lableWidth,prop:"unit"}},[a("el-input",{staticStyle:{width:"100px"},model:{value:e.Product.unit,callback:function(t){e.$set(e.Product,"unit",t)},expression:"Product.unit"}})],1),a("el-form-item",{attrs:{label:"定制logo","label-width":e.lableWidth,prop:"Customized"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.Product.Customized,callback:function(t){e.$set(e.Product,"Customized",t)},expression:"Product.Customized"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.Product.Customized,callback:function(t){e.$set(e.Product,"Customized",t)},expression:"Product.Customized"}},[e._v("否")])],1),a("br"),a("el-form-item",{attrs:{label:"成本","label-width":e.lableWidth,prop:"cost"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.cost,callback:function(t){e.$set(e.Product,"cost",t)},expression:"Product.cost"}})],1),a("el-form-item",{attrs:{label:"销售价格","label-width":e.lableWidth,prop:"Sell"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.Sell,callback:function(t){e.$set(e.Product,"Sell",t)},expression:"Product.Sell"}})],1),a("br"),a("el-form-item",{attrs:{label:"装箱数","label-width":e.lableWidth,prop:"cost"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.boxing,callback:function(t){e.$set(e.Product,"boxing",t)},expression:"Product.boxing"}})],1),a("el-form-item",{attrs:{label:"尺寸","label-width":e.lableWidth,prop:"Sell"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.size,callback:function(t){e.$set(e.Product,"size",t)},expression:"Product.size"}})],1),a("br"),a("el-form-item",{attrs:{label:"规格","label-width":e.lableWidth,prop:"cost"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.specifications,callback:function(t){e.$set(e.Product,"specifications",t)},expression:"Product.specifications"}})],1),a("el-form-item",{attrs:{label:"材质","label-width":e.lableWidth,prop:"Sell"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.material_quality,callback:function(t){e.$set(e.Product,"material_quality",t)},expression:"Product.material_quality"}})],1),a("br"),a("el-form-item",{attrs:{label:"上传图片","label-width":e.lableWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{multiple:!0,accept:"image/jpeg,image/gif,image/png,image/bmp","show-file-list":!1,action:"/File/product_sku_img/","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.Product.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.Product.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormProduct=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addSKU}},[e._v("确 定")])],1)],1)],1),a("div",{staticClass:"contentfoot"},[a("label",[e._v("供应商阶梯价")]),a("el-button",{staticStyle:{"margin-left":"35px"},attrs:{type:"primary"},on:{click:e.addSupplierPrice}},[e._v("添加信息")]),a("el-table",{attrs:{data:e.SupplierPrice}},[a("el-table-column",{attrs:{label:"阶梯数量",prop:"number"}}),a("el-table-column",{attrs:{label:"成本价",prop:"cost_price"}}),a("el-table-column",{attrs:{label:"销售价",prop:"selling_price"}}),a("el-table-column",{attrs:{label:"供应商",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.SupplierPriceModify(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.SupplierPriceEdit(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"添加修改供应商阶梯价",visible:e.dialogFormSupplierPrice},on:{"update:visible":function(t){e.dialogFormSupplierPrice=t}}},[a("el-form",{ref:"SteppedPrice",model:{value:e.SteppedPrice,callback:function(t){e.SteppedPrice=t},expression:"SteppedPrice"}},[a("el-form-item",{attrs:{label:"供应商",prop:"supplier","label-width":e.lableWidth}},[a("el-select",{staticStyle:{width:"217px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.SteppedPrice.supplier_id,callback:function(t){e.$set(e.SteppedPrice,"supplier_id",t)},expression:"SteppedPrice.supplier_id"}},e._l(e.optionSupplier,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"产品",prop:"product","label-width":e.lableWidth}},[a("el-select",{staticStyle:{width:"217px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.SteppedPrice.product,callback:function(t){e.$set(e.SteppedPrice,"product",t)},expression:"SteppedPrice.product"}},e._l(e.optionproduct,function(e){return a("el-option",{key:e.id,attrs:{label:e.sku_name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"数量",prop:"number","label-width":e.lableWidth}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.SteppedPrice.number,callback:function(t){e.$set(e.SteppedPrice,"number",t)},expression:"SteppedPrice.number"}})],1),a("el-form-item",{attrs:{label:"成本价",prop:"costPrice","label-width":e.lableWidth}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.SteppedPrice.cost_price,callback:function(t){e.$set(e.SteppedPrice,"cost_price",t)},expression:"SteppedPrice.cost_price"}})],1),a("el-form-item",{attrs:{label:"销售价",prop:"sellPrice","label-width":e.lableWidth}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.SteppedPrice.selling_price,callback:function(t){e.$set(e.SteppedPrice,"selling_price",t)},expression:"SteppedPrice.selling_price"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark","label-width":e.lableWidth}},[a("el-input",{staticStyle:{width:"217px"},attrs:{type:"textarea"},model:{value:e.SteppedPrice.remarks,callback:function(t){e.$set(e.SteppedPrice,"remarks",t)},expression:"SteppedPrice.remarks"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormSupplierPrice=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addingSteppedPrice}},[e._v("确 定")])],1)],1)],1),a("label",[e._v("产品内容")]),a("vue-ueditor-wrap",{staticStyle:{"margin-top":"10px","padding-bottom":"20px"},attrs:{config:e.myConfig},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.comfirm}},[e._v("保存")])],1)},Ui=[],Mi=i("6625"),Ei=i.n(Mi),Ri={data:function(){return{msg:"",formProduct:{name:"",category:"",content:""},options:[{id:1,value:"杯具"},{id:2,value:"包"},{id:3,value:"碗"}],props:{value:"id",label:"name",children:"children"},lableWidth:"100px",SKUdata:[],lei:"",dialogFormProduct:!1,Product:{category:"",specialSection:"",firm_id:"",fastTime:"",lastTime:"",StartingQuantity:"",unit:"",Customized:"",cost:"",Sell:"",product_id:"",boxing:"",size:"",specifications:"",material_quality:"",imageUrl:"",id:""},optionSupplier:[{label:"太保",value:1},{label:"人保",value:2},{label:"国寿",value:3},{label:"平安",value:4}],optionproduct:[],SupplierPrice:[],dialogFormSupplierPrice:!1,SteppedPrice:{product_id:"",supplier_id:"",product:"",number:"",cost_price:"",selling_price:"",remarks:"",id:""},myConfig:{autoHeightEnabled:!1,initialFrameHeight:240,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/static/UEditor/"}}},components:{VueUeditorWrap:Ei.a},methods:{getData:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get("/erp.Product/product_class_select").then(function(a){e.options=a.data.product_class,t.close()})},handleItemChange:function(e){var t=e.length,a=e[t-1];this.formProduct.category=a},add:function(){var e=this;""==this.formProduct.name||""==this.formProduct.category?this.open("填写完整产品名称和分类","error"):""==this.Product.product_id?this.axios.post("/erp.Product/product_add",{class_id:this.formProduct.category,name:this.formProduct.name,status:"",content:this.formProduct.content}).then(function(t){2e3==t.data.code&&(e.Product.product_id=t.data.id,e.dialogFormProduct=!0)}):this.dialogFormProduct=!0},queryimg:function(){var e=this;this.axios.post("/File/file_select",{class:"product_file",type:"img",sku_id:""}).then(function(t){null!=t.data&&(e.Product.img=t.data.src)})},handleAvatarSuccess:function(e){this.Product.imageUrl=e.src},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},addSKU:function(){var e=this;""==this.Product.id?this.axios.post("/erp.Product/product_sku_add",{status:"",rank:"",firm_id:this.Product.firm_id,product_id:this.Product.product_id,sku_name:this.Product.category,maximum_delivery:this.Product.fastTime,slowest_delivery:this.Product.lastTime,starting_quantity:this.Product.StartingQuantity,unit:this.Product.unit,logo:this.Product.Customized,cost_price:this.Product.cost,selling_price:this.Product.Sell,boxing:this.Product.boxing,size:this.Product.size,specifications:this.Product.specifications,material_quality:this.Product.material_quality,img:this.Product.imageUrl}).then(function(t){2e3==t.data.code?(e.$refs["Product"].resetFields(),e.open(t.data.msg,"success"),e.getSKUdata(),e.dialogFormProduct=!1):e.open(t.data.msg,"error")}):this.axios.post("/erp.Product/product_sku_update",{product_id:this.Product.product_id,firm_id:this.Product.firm_id,sku_name:this.Product.category,maximum_delivery:this.Product.fastTime,slowest_delivery:this.Product.lastTime,starting_quantity:this.Product.StartingQuantity,unit:this.Product.unit,logo:this.Product.Customized,cost_price:this.Product.cost,selling_price:this.Product.Sell,boxing:this.Product.boxing,size:this.Product.size,specifications:this.Product.specifications,material_quality:this.Product.material_quality,img:this.Product.imageUrl,id:this.Product.id}).then(function(t){2e3==t.data.code?(e.$refs["Product"].resetFields(),e.open(t.data.msg,"success"),e.getSKUdata(),e.dialogFormProduct=!1):e.open(t.data.msg,"error")})},editSKU:function(e){var t=this;this.axios.post("/erp.Product/product_sku_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getSKUdata()):t.open(e.data.msg,"error")})},getSKUdata:function(){var e=this;this.axios.post("/erp.Product/product_sku_list",{product_id:this.Product.product_id}).then(function(t){e.SKUdata=t.data.data})},edit:function(e){var t,a;t="是"==e.firm_id?"1":"0",a="是"==e.logo?"1":"0",this.dialogFormProduct=!0,this.Product.firm_id=t,this.Product.product_id=e.product_id,this.Product.category=e.sku_name,this.Product.fastTime=e.maximum_delivery,this.Product.lastTime=e.slowest_delivery,this.Product.StartingQuantity=e.starting_quantity,this.Product.unit=e.unit,this.Product.Customized=a,this.Product.cost=Number(e.cost_price),this.Product.Sell=Number(e.selling_price),this.Product.id=e.id,this.Product.imageUrl=e.src,this.Product.boxing=e.boxing,this.Product.size=e.size,this.Product.specifications=e.specifications,this.Product.material_quality=e.material_quality},addSupplierPrice:function(){var e=this;""==this.formProduct.name||""==this.formProduct.category?this.open("填写完整产品名称和分类","error"):(this.axios.get("/erp.Product/product_update?id="+this.Product.product_id).then(function(t){e.optionproduct=t.data.sku}),this.dialogFormSupplierPrice=!0,this.SteppedPrice.product_id=this.Product.product_id,this.SteppedPrice.supplier_id="",this.SteppedPrice.number="",this.SteppedPrice.cost_price="",this.SteppedPrice.selling_price="",this.SteppedPrice.remarks="",this.SteppedPrice.id="",this.SteppedPrice.product="")},SupplierPriceModify:function(e){this.dialogFormSupplierPrice=!0,this.SteppedPrice.product_id=this.Product.product_id,this.SteppedPrice.id=e.id,this.SteppedPrice.supplier_id=e.supplier_id,this.SteppedPrice.number=e.number,this.SteppedPrice.cost_price=e.cost_price,this.SteppedPrice.selling_price=e.selling_price,this.SteppedPrice.remarks=e.remarks,this.SteppedPrice.product=String(e.id)},SupplierPriceEdit:function(e){var t=this;this.axios.post("/erp.Product/product_supplier_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getSupplierList(t.Product.product_id)):t.open(e.data.msg,"error")})},addingSteppedPrice:function(){var e=this;""==this.SteppedPrice.id?this.axios.post("/erp.Product/product_supplier_add",{product_id:this.SteppedPrice.product_id,product_sku_id:this.SteppedPrice.product,supplier_id:this.SteppedPrice.supplier_id,number:this.SteppedPrice.number,cost_price:this.SteppedPrice.cost_price,selling_price:this.SteppedPrice.selling_price,remarks:this.SteppedPrice.remarks}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getSupplierList(e.SteppedPrice.product_id),e.dialogFormSupplierPrice=!1):e.open(t.data.msg,"error")}):this.axios.post("/erp.Product/product_supplier_update",{id:this.SteppedPrice.id,supplier_id:this.SteppedPrice.supplier_id,product_sku_id:this.SteppedPrice.product,number:this.SteppedPrice.number,cost_price:this.SteppedPrice.cost_price,selling_price:this.SteppedPrice.selling_price,remarks:this.SteppedPrice.remarks}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getSupplierList(e.SteppedPrice.product_id),e.dialogFormSupplierPrice=!1):e.open(t.data.msg,"error")})},getSupplierList:function(e){var t=this;this.axios.get("/erp.Product/product_supplier_list?id="+e).then(function(e){t.SupplierPrice=e.data.product_supplier})},getSupplier:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get("/erp.supplier/supplier_select").then(function(a){e.optionSupplier=a.data.supplier,t.close()})},comfirm:function(){var e=this;""==this.Product.product_id?this.open("先添加SKU","error"):0==this.SupplierPrice.length?this.open("先添加供应商阶梯价","error"):this.axios.post("/erp.Product/product_update",{id:this.Product.product_id,class_id:this.formProduct.category,name:this.formProduct.name,content:this.msg}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.formProduct.name="",e.Product.product_id="",e.SKUdata=[],e.SupplierPrice=[],e.msg=""):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){var e=this;this.$nextTick(function(){e.getData(),e.getSupplier()})},watch:{$route:function(e){var t=this;this.$nextTick(function(){t.getData(),t.getSupplier()})}}},Li=Ri,Hi=(i("bd5e"),Object(d["a"])(Li,ji,Ui,!1,null,"155d31dd",null)),Bi=Hi.exports,Wi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"headbox"},[a("el-form",{attrs:{data:e.formProduct}},[a("el-form-item",{attrs:{label:"产品名称","label-width":e.lableWidth}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.formProduct.name,callback:function(t){e.$set(e.formProduct,"name",t)},expression:"formProduct.name"}})],1),a("el-form-item",{attrs:{label:"产品分类","label-width":e.lableWidth}},[a("el-cascader",{attrs:{options:e.options,props:e.props,"change-on-select":""},on:{change:e.handleItemChange}}),a("span",[e._v("你当前的选择类型："),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.lei))])])],1)],1)],1),a("div",{staticClass:"contentbox"},[a("label",[e._v("SKU编码")]),a("el-button",{staticStyle:{"margin-left":"35px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("添加SKU")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.SKUdata}},[a("el-table-column",{attrs:{prop:"sku_name",label:"类别"}}),a("el-table-column",{attrs:{prop:"firm_id",label:"是否是专版"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0==t.row.firm_id?"否":"是"))])]}}])}),a("el-table-column",{attrs:{prop:"maximum_delivery",label:"最快交货时间"}}),a("el-table-column",{attrs:{prop:"slowest_delivery",label:"最慢交货时间"}}),a("el-table-column",{attrs:{prop:"starting_quantity",label:"起订量"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{prop:"logo",label:"定制logo"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(0==t.row.logo?"否":"是"))])]}}])}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"销售价格"}}),a("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.editSKU(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"添加修改SKU",visible:e.dialogFormProduct},on:{"update:visible":function(t){e.dialogFormProduct=t}}},[a("el-form",{ref:"Product",attrs:{model:e.Product,inline:""}},[a("el-form-item",{attrs:{label:"类别","label-width":e.lableWidth,prop:"category"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.category,callback:function(t){e.$set(e.Product,"category",t)},expression:"Product.category"}})],1),a("el-form-item",{attrs:{label:"是否是专版","label-width":e.lableWidth,prop:"firm_id"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.Product.firm_id,callback:function(t){e.$set(e.Product,"firm_id",t)},expression:"Product.firm_id"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.Product.firm_id,callback:function(t){e.$set(e.Product,"firm_id",t)},expression:"Product.firm_id"}},[e._v("否")])],1),a("br"),a("el-form-item",{attrs:{label:"最快交货时间","label-width":e.lableWidth,prop:"fastTime"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.fastTime,callback:function(t){e.$set(e.Product,"fastTime",t)},expression:"Product.fastTime"}})],1),a("el-form-item",{attrs:{label:"最慢交货时间","label-width":e.lableWidth,prop:"lastTime"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.lastTime,callback:function(t){e.$set(e.Product,"lastTime",t)},expression:"Product.lastTime"}})],1),a("br"),a("el-form-item",{attrs:{label:"起订量","label-width":e.lableWidth,prop:"StartingQuantity"}},[a("el-input",{staticStyle:{width:"100px"},model:{value:e.Product.StartingQuantity,callback:function(t){e.$set(e.Product,"StartingQuantity",t)},expression:"Product.StartingQuantity"}})],1),a("el-form-item",{attrs:{label:"单位","label-width":e.lableWidth,prop:"unit"}},[a("el-input",{staticStyle:{width:"100px"},model:{value:e.Product.unit,callback:function(t){e.$set(e.Product,"unit",t)},expression:"Product.unit"}})],1),a("el-form-item",{attrs:{label:"定制logo","label-width":e.lableWidth,prop:"Customized"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.Product.Customized,callback:function(t){e.$set(e.Product,"Customized",t)},expression:"Product.Customized"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.Product.Customized,callback:function(t){e.$set(e.Product,"Customized",t)},expression:"Product.Customized"}},[e._v("否")])],1),a("br"),a("el-form-item",{attrs:{label:"成本","label-width":e.lableWidth,prop:"cost"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.cost,callback:function(t){e.$set(e.Product,"cost",t)},expression:"Product.cost"}})],1),a("el-form-item",{attrs:{label:"销售价格","label-width":e.lableWidth,prop:"Sell"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.Sell,callback:function(t){e.$set(e.Product,"Sell",t)},expression:"Product.Sell"}})],1),a("br"),a("el-form-item",{attrs:{label:"装箱数","label-width":e.lableWidth,prop:"cost"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.boxing,callback:function(t){e.$set(e.Product,"boxing",t)},expression:"Product.boxing"}})],1),a("el-form-item",{attrs:{label:"尺寸","label-width":e.lableWidth,prop:"Sell"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.size,callback:function(t){e.$set(e.Product,"size",t)},expression:"Product.size"}})],1),a("br"),a("el-form-item",{attrs:{label:"规格","label-width":e.lableWidth,prop:"cost"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.specifications,callback:function(t){e.$set(e.Product,"specifications",t)},expression:"Product.specifications"}})],1),a("el-form-item",{attrs:{label:"材质","label-width":e.lableWidth,prop:"Sell"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Product.material_quality,callback:function(t){e.$set(e.Product,"material_quality",t)},expression:"Product.material_quality"}})],1),a("br"),a("el-form-item",{attrs:{label:"上传图片","label-width":e.lableWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{multiple:!0,accept:"image/jpeg,image/gif,image/png,image/bmp","show-file-list":!1,action:"/File/product_sku_img/","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.Product.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.Product.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormProduct=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addSKU}},[e._v("确 定")])],1)],1)],1),a("div",{staticClass:"contentfoot"},[a("label",[e._v("供应商阶梯价")]),a("el-button",{staticStyle:{"margin-left":"35px"},attrs:{type:"primary"},on:{click:e.addSupplierPrice}},[e._v("添加信息")]),a("el-table",{attrs:{data:e.SupplierPrice}},[a("el-table-column",{attrs:{label:"阶梯数量",prop:"number"}}),a("el-table-column",{attrs:{label:"成本价",prop:"cost_price"}}),a("el-table-column",{attrs:{label:"销售价",prop:"selling_price"}}),a("el-table-column",{attrs:{label:"供应商",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"操作",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.SupplierPriceModify(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.SupplierPriceEdit(t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"添加修改供应商阶梯价",visible:e.dialogFormSupplierPrice},on:{"update:visible":function(t){e.dialogFormSupplierPrice=t}}},[a("el-form",{ref:"SteppedPrice",model:{value:e.SteppedPrice,callback:function(t){e.SteppedPrice=t},expression:"SteppedPrice"}},[a("el-form-item",{attrs:{label:"供应商",prop:"supplier","label-width":e.lableWidth}},[a("el-select",{staticStyle:{width:"217px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.SteppedPrice.supplier_id,callback:function(t){e.$set(e.SteppedPrice,"supplier_id",t)},expression:"SteppedPrice.supplier_id"}},e._l(e.optionSupplier,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"产品",prop:"product","label-width":e.lableWidth}},[a("el-select",{staticStyle:{width:"217px"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.SteppedPrice.product,callback:function(t){e.$set(e.SteppedPrice,"product",t)},expression:"SteppedPrice.product"}},e._l(e.optionproduct,function(e){return a("el-option",{key:e.id,attrs:{label:e.sku_name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"数量",prop:"number","label-width":e.lableWidth}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.SteppedPrice.number,callback:function(t){e.$set(e.SteppedPrice,"number",t)},expression:"SteppedPrice.number"}})],1),a("el-form-item",{attrs:{label:"成本价",prop:"costPrice","label-width":e.lableWidth}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.SteppedPrice.cost_price,callback:function(t){e.$set(e.SteppedPrice,"cost_price",t)},expression:"SteppedPrice.cost_price"}})],1),a("el-form-item",{attrs:{label:"销售价",prop:"sellPrice","label-width":e.lableWidth}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.SteppedPrice.selling_price,callback:function(t){e.$set(e.SteppedPrice,"selling_price",t)},expression:"SteppedPrice.selling_price"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark","label-width":e.lableWidth}},[a("el-input",{staticStyle:{width:"217px"},attrs:{type:"textarea"},model:{value:e.SteppedPrice.remarks,callback:function(t){e.$set(e.SteppedPrice,"remarks",t)},expression:"SteppedPrice.remarks"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormSupplierPrice=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addingSteppedPrice}},[e._v("确 定")])],1)],1)],1),a("label",[e._v("产品内容")]),a("vue-ueditor-wrap",{staticStyle:{"margin-top":"10px","padding-bottom":"20px"},attrs:{config:e.myConfig},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.comfirm}},[e._v("确认提交")])],1)},Vi=[],Gi={data:function(){return{msg:"",formProduct:{name:"",category:"",content:""},options:[{id:1,value:"杯具"},{id:2,value:"包"},{id:3,value:"碗"}],props:{value:"id",label:"name",children:"children"},lableWidth:"100px",SKUdata:[],lei:"",class_id:"",dialogFormProduct:!1,Product:{category:"",specialSection:"",firm_id:"",fastTime:"",lastTime:"",StartingQuantity:"",unit:"",Customized:"",cost:"",Sell:"",product_id:"",id:"",imageUrl:"",boxing:"",size:"",specifications:"",material_quality:""},optionSupplier:[{label:"太保",value:1},{label:"人保",value:2},{label:"国寿",value:3},{label:"平安",value:4}],optionproduct:[],SupplierPrice:[],dialogFormSupplierPrice:!1,SteppedPrice:{product_id:"",supplier_id:"",product:"",number:"",cost_price:"",selling_price:"",remarks:"",id:""},myConfig:{autoHeightEnabled:!1,initialFrameHeight:240,initialFrameWidth:"100%",UEDITOR_HOME_URL:"/static/UEditor/"}}},components:{VueUeditorWrap:Ei.a},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{handleItemChange:function(e){var t=e.length,a=e[t-1];this.formProduct.category=a},getEditData:function(){var e=this;this.axios.get("/erp.Product/product_update?id="+this.$route.params.id).then(function(t){var a=t.data;e.formProduct.category=a.class_id,e.formProduct.name=a.name,e.lei=a.class_name,e.class_id=a.class_id,e.Product.product_id=a.id,e.SKUdata=a.sku,e.optionproduct=a.sku,e.msg=a.content})},getData:function(){var e=this;this.axios.get("/erp.Product/product_class_select").then(function(t){e.options=t.data.product_class})},add:function(){this.queryimg(),this.dialogFormProduct=!0,this.Product.firm_id="",this.Product.product_id="",this.Product.category="",this.Product.fastTime="",this.Product.lastTime="",this.Product.StartingQuantity="",this.Product.unit="",this.Product.Customized="",this.Product.cost="",this.Product.Sell="",this.Product.boxing="",this.Product.size="",this.Product.specifications="",this.Product.material_quality=""},queryimg:function(){var e=this;this.axios.post("/File/file_select",{class:"product_file",type:"img",sku_id:""}).then(function(t){null!=t.data&&(e.Product.img=t.data.src)})},addSKU:function(){var e=this;this.axios.post("/erp.Product/product_sku_update",{product_id:this.$route.params.id,id:this.Product.id,firm_id:this.Product.firm_id,sku_name:this.Product.category,maximum_delivery:this.Product.fastTime,slowest_delivery:this.Product.lastTime,starting_quantity:this.Product.StartingQuantity,unit:this.Product.unit,logo:this.Product.Customized,cost_price:this.Product.cost,selling_price:this.Product.Sell,boxing:this.Product.boxing,size:this.Product.size,specifications:this.Product.specifications,material_quality:this.Product.material_quality,img:this.Product.imageUrl}).then(function(t){2e3==t.data.code?(e.$refs["Product"].resetFields(),e.open(t.data.msg,"success"),e.getEditData(),e.dialogFormProduct=!1):e.open(t.data.msg,"error")})},handleAvatarSuccess:function(e){this.Product.imageUrl=e.src},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},edit:function(e){var t,a;t=1==e.firm_id?"1":"0",a=1==e.logo?"1":"0",this.dialogFormProduct=!0,this.Product.firm_id=t,this.Product.category=e.sku_name,this.Product.fastTime=e.maximum_delivery,this.Product.lastTime=e.slowest_delivery,this.Product.StartingQuantity=e.starting_quantity,this.Product.unit=e.unit,this.Product.Customized=a,this.Product.cost=e.cost_price.split(".")[0],this.Product.Sell=e.selling_price.split(".")[0],this.Product.id=e.id,this.Product.imageUrl=e.src,this.Product.boxing=e.boxing,this.Product.size=e.size,this.Product.specifications=e.specifications,this.Product.material_quality=e.material_quality},editSKU:function(e){var t=this;this.axios.post("/erp.Product/product_sku_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getEditData()):t.open(e.data.msg,"error")})},addSupplierPrice:function(){this.dialogFormSupplierPrice=!0,this.SteppedPrice.product_id=this.Product.product_id,this.SteppedPrice.supplier_id="",this.SteppedPrice.number="",this.SteppedPrice.cost_price="",this.SteppedPrice.selling_price="",this.SteppedPrice.remarks="",this.SteppedPrice.id=""},SupplierPriceModify:function(e){this.dialogFormSupplierPrice=!0,this.SteppedPrice.id=e.id,this.SteppedPrice.supplier_id=e.supplier_id,this.SteppedPrice.product_id=this.Product.product_id,this.SteppedPrice.number=e.number,this.SteppedPrice.cost_price=e.cost_price,this.SteppedPrice.selling_price=e.selling_price,this.SteppedPrice.remarks=e.remarks},SupplierPriceEdit:function(e){var t=this;this.axios.post("/erp.Product/product_supplier_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getSupplierList(t.Product.product_id)):t.open(e.data.msg,"error")})},addingSteppedPrice:function(){var e=this;""==this.SteppedPrice.id?this.axios.post("/erp.Product/product_supplier_add",{product_id:this.SteppedPrice.product_id,supplier_id:this.SteppedPrice.supplier_id,product_sku_id:this.SteppedPrice.product,number:this.SteppedPrice.number,cost_price:this.SteppedPrice.cost_price,selling_price:this.SteppedPrice.selling_price,remarks:this.SteppedPrice.remarks}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getSupplierList(e.SteppedPrice.product_id),e.dialogFormSupplierPrice=!1):e.open(t.data.msg,"error")}):this.axios.post("/erp.Product/product_supplier_update",{id:this.SteppedPrice.id,supplier_id:this.SteppedPrice.supplier_id,product_sku_id:this.SteppedPrice.product,number:this.SteppedPrice.number,cost_price:this.SteppedPrice.cost_price,selling_price:this.SteppedPrice.selling_price,remarks:this.SteppedPrice.remarks}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getSupplierList(e.SteppedPrice.product_id),e.dialogFormSupplierPrice=!1):e.open(t.data.msg,"error")})},getSupplierList:function(e){var t=this;this.axios.get("/erp.Product/product_supplier_list?id="+e).then(function(e){t.SupplierPrice=e.data.product_supplier})},getSupplier:function(){var e=this;this.axios.get("/erp.supplier/supplier_select").then(function(t){e.optionSupplier=t.data.supplier})},comfirm:function(){var e=this;this.axios.post("/erp.Product/product_update",{id:this.$route.params.id,content:this.msg,name:this.formProduct.name,class_id:this.class_id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/erp/Product/product_list"})):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){this.getEditData(),this.getData(),this.getSupplierList(this.$route.params.id),this.getSupplier()},mounted:function(){console.log(this.$route.params)},watch:{$route:function(e){this.$route.params.id&&(this.getEditData(),this.getSupplierList(this.$route.params.id))}}},Qi=Gi,Ki=(i("cb5a"),Object(d["a"])(Qi,Wi,Vi,!1,null,"42875adc",null)),Ji=Ki.exports,Zi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"请输入内容"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:e.addFenlei}},[e._v("添加产品分类")])],1),a("div",{staticClass:"content_box"},[a("el-table",{staticClass:"init_table",staticStyle:{width:"100%"},attrs:{data:e.tableData.filter(function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}),"row-key":"id","row-style":e.toggleDisplayTr,stripe:""}},[a("el-table-column",{attrs:{label:"分类名","show-overflow-tooltip":"",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{style:"margin-left: "+20*t.row.__level+"px;margin-top:0;margin-bottom:0"},[a("i",{staticClass:"permission_toggleFold",class:e.toggleFoldingClass(t.row),on:{click:function(a){return e.toggleFoldingStatus(t.row)}}}),e._v("\n                    "+e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updata(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"添加或修改分类",visible:e.dialogFormlei},on:{"update:visible":function(t){e.dialogFormlei=t}}},[a("div",{staticClass:"addFenlei"},[a("div",{staticClass:"addFenleiLeft"},[a("el-form",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[a("el-form-item",{attrs:{label:"名字","label-width":e.lableWidth}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"排序","label-width":e.lableWidth}},[a("el-input",{model:{value:e.form.rank,callback:function(t){e.$set(e.form,"rank",t)},expression:"form.rank"}})],1)],1)],1),a("div",{staticClass:"addFenleiRight"},[a("p",[e._v("请选择类别")]),a("p",{staticStyle:{"margin-top":"10px",color:"red"}},[e._v("当前选择类别是:"+e._s(e.lei))]),a("el-tree",{ref:"tree",attrs:{data:e.data,props:e.defaultProps,"node-key":"id","highlight-current":!0,"current-node-key":e.xuanzhong,"default-expanded-keys":e.xuanzhong},on:{"node-click":e.handleNodeClick}})],1)]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormlei=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)])],1)},Yi=[],Xi=i("75fc"),er={data:function(){return{search:"",tableData:[],foldList:[],dialogFormlei:!1,form:{id:"",pid:"",name:"",rank:""},lableWidth:"100px",lei:"",data:[{id:1,name:"sssssdfa",child:[{id:0,name:"222",child:[]}]}],defaultProps:{id:"id",children:"child",label:"name"}}},computed:{foldAllList:function(){return this.tableListData.map(function(e){return e.__identity})}},methods:{toggleFoldingStatus:function(e){console.log(e.child),this.foldList.includes(e.__identity)?this.foldList.splice(this.foldList.indexOf(e.__identity),1):this.foldList.push(e.__identity)},toggleDisplayTr:function(e){for(var t=e.row,a=(e.index,0);a<this.foldList.length;a++){var i=this.foldList[a];if(t.__family.includes(i)&&t.__identity!==i)return"display:none;"}return""},toggleFoldingClass:function(e){return void 0==e.child?"permission_placeholder":-1===this.foldList.indexOf(e.__identity)?"el-icon-plus":"el-icon-minus"},formatConversion:function(e,t){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"x";return void 0!=t&&t.map(function(t,l){s["default"].set(t,"__level",i),s["default"].set(t,"__family",[].concat(Object(Xi["a"])(r),[o+"_"+l])),s["default"].set(t,"__identity",o+"_"+l),e.push(t),void 0!=t.child&&a.formatConversion(e,t.child,i+1,[].concat(Object(Xi["a"])(r),[o+"_"+l]),o+"_"+l)}),e},getDate:function(){var e=this;this.axios.get("/erp.Product/product_class_list").then(function(t){e.tableData=e.formatConversion([],t.data.product_class),e.data=t.data.product_class})},addFenlei:function(){this.dialogFormlei=!0,this.form.id="",this.form.pid="",this.form.name="",this.form.rank=""},updata:function(e){this.dialogFormlei=!0,this.form.id=e.id,this.form.pid=e.pid,this.form.name=e.name,this.form.rank=e.rank,this.lei=e.name},edit:function(e){var t=this;console.log(e.id),this.axios.post("/erp.Product/product_class_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getDate(),t.dialogFormlei=!1):t.open(e.data.msg,"error")})},handleNodeClick:function(e){this.form.pid=e.id},add:function(){var e=this;""==this.form.id?this.axios.post("/erp.Product/product_class_add",{id:this.form.id,name:this.form.name,rank:this.form.rank,pid:this.form.pid}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getDate(),e.dialogFormlei=!1):e.open(t.data.msg,"error")}):this.axios.post("/erp.Product/product_class_update",{id:this.form.id,name:this.form.name,rank:this.form.rank,pid:this.form.pid}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getDate(),e.dialogFormlei=!1):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){var e=this;this.$nextTick(function(){e.getDate()})},watch:{$route:function(e){var t=this;this.$nextTick(function(){t.getDate()})}}},tr=er,ar=(i("0e67"),Object(d["a"])(tr,Zi,Yi,!1,null,"56a9eca2",null)),ir=ar.exports,rr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_head"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.class_name))])]}}])}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("提交")]):e._e(),3==t.row.status?a("span",[e._v("审核完等待采购")]):e._e(),5==t.row.status?a("span",[e._v("采购完毕")]):e._e(),6==t.row.status?a("span",[e._v("等待财务审核")]):e._e(),9==t.row.status?a("span",[e._v("完成")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"录入人",prop:"user_name"}}),a("el-table-column",{attrs:{label:"添加时间",prop:"add_time"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.verify(t.row)}}},[e._v("审核")]):e._e(),0==t.row.status?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deteles(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)])},sr=[],or={data:function(){return{seach:"",tableData:[],currentPage:"",total:"",per_page:"",last_page:""}},methods:{gettableData:function(){var e=this;this.axios.get("/erp.Product/product_product_stock_lists").then(function(t){e.tableData=t.data.product_stock.data,e.currentPage=t.data.product_stock.current_page,e.total=t.data.product_stock.total,e.per_page=t.data.product_stock.per_page,e.last_page=t.data.product_stock.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.Product/product_product_stock_lists",{page:e}).then(function(e){t.tableData=e.data.product_stock.data,t.currentPage=e.data.product_stock.current_page,a.close()})},deteles:function(e){var t=this;this.axios.post("/erp.Product/product_product_stock_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData()):t.open(e.data.msg,"error")})},verify:function(e){var t=this;this.axios.post("/erp.Product/product_product_stock_status",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData()):t.open(e.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettableData()},watch:{$route:function(e){this.gettableData()}}},lr=or,nr=(i("4823"),Object(d["a"])(lr,rr,sr,!1,null,"79b95093",null)),cr=nr.exports,dr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.schanPing,callback:function(t){e.schanPing=t},expression:"schanPing"}}),a("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{placeholder:"最低价"},model:{value:e.maxPrice,callback:function(t){e.maxPrice=t},expression:"maxPrice"}}),a("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{placeholder:"最高价"},model:{value:e.minPrice,callback:function(t){e.minPrice=t},expression:"minPrice"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"样品"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"100px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"supplier_name",label:"供应商"}}),a("el-table-column",{attrs:{prop:"number",label:"库存"}}),a("el-table-column",{attrs:{label:"起订量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.starting_quantity)+e._s(t.row.unit))])]}}])}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本价"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"销售价"}}),a("el-table-column",{attrs:{label:"定制LOGO"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.logo?a("span",[e._v("是")]):e._e(),0==t.row.logo?a("span",[e._v("否")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.capzuo(t.row)}}},[e._v("操作")])]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加库存",visible:e.addDetails,width:"50%"},on:{"update:visible":function(t){e.addDetails=t}}},[a("el-form",{attrs:{model:e.addDetailsData}},[a("el-form-item",{attrs:{label:"供应商","label-width":"90px"}},[a("p",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.addDetailsData.supplier_name))])]),a("el-form-item",{attrs:{label:"加减库存","label-width":"90px"}},[a("el-switch",{staticStyle:{display:"block","margin-top":"8px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"增加","inactive-text":"减少"},model:{value:e.addDetailsData.value2,callback:function(t){e.$set(e.addDetailsData,"value2",t)},expression:"addDetailsData.value2"}})],1),a("el-form-item",{attrs:{label:"数量","label-width":"90px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.addDetailsData.number,callback:function(t){e.$set(e.addDetailsData,"number",t)},expression:"addDetailsData.number"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"90px"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.addDetailsData.content,callback:function(t){e.$set(e.addDetailsData,"content",t)},expression:"addDetailsData.content"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDetails=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addKucun}},[e._v("确 定")])],1)],1)],1)},ur=[],pr={data:function(){return{value:"",schanPing:"",maxPrice:"",minPrice:"",options:[{value:"",label:"全部"},{value:"刀具",label:"刀具"},{value:"手册",label:"手册"},{value:"毛巾",label:"毛巾"},{value:"中国太平",label:"中国太平"}],tableData:[],details:!1,detailsData:{number:"",id:""},options_supplier:[],addDetails:!1,addDetailsData:{number:"",id:"",supplier_id:"",supplier_name:"",content:"",value2:!0},currentPage:"",total:"",per_page:"",last_page:""}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.Product/product_inventory_lists",{page:e}).then(function(e){t.tableData=e.data.product.data,t.currentPage=e.data.product.current_page,a.close()})},getData:function(){var e=this;this.axios.get("/erp.Product/product_inventory_lists").then(function(t){e.currentPage=t.data.product.current_page,e.total=t.data.product.total,e.per_page=t.data.product.per_page,e.last_page=t.data.product.last_page,e.tableData=t.data.product.data})},capzuo:function(e){this.addDetails=!0,this.addDetailsData.id=e.product_sku_id,this.addDetailsData.number="",this.addDetailsData.supplier_name=e.supplier_name,this.addDetailsData.supplier_id=e.supplier_id},addKucun:function(){var e,t=this;""!=this.addDetailsData.number?(e=1==this.addDetailsData.value2?"inc":"dec",this.axios.post("/erp.Product/product_supplier_inventory_add",{supplier_id:this.addDetailsData.supplier_id,product_sku_id:this.addDetailsData.id,number:this.addDetailsData.number,content:this.addDetailsData.content,param:e}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.addDetails=!1,t.getData()):t.open(e.data.msg,"error")})):this.open("填写备货数量","error")},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){var e=this;this.$nextTick(function(){e.getData()})},watch:{$route:function(e){var t=this;this.$nextTick(function(){t.getData()})}}},mr=pr,hr=(i("9915"),Object(d["a"])(mr,dr,ur,!1,null,null,null)),fr=hr.exports,_r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"tou"},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("添加供应商")]),a("label",[e._v("现有供应商:")]),a("span",[e._v(e._s(e.total))])],1),a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"150px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.schanPing,callback:function(t){e.schanPing=t},expression:"schanPing"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seach}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"type",label:"仓库类型",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("1"==t.row.type?"本地仓库":"供应商"))])]}}])}),a("el-table-column",{attrs:{prop:"province",label:"省",width:"100px"}}),a("el-table-column",{attrs:{prop:"city",label:"市",width:"100px"}}),a("el-table-column",{attrs:{prop:"county",label:"区",width:"100px"}}),a("el-table-column",{attrs:{prop:"address",label:"具体地址"}}),a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{label:"操作",width:"220px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){return e.modify(t.row)}}},[e._v("更新")]),a("el-button",{attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){return e.account(t.row)}}},[e._v("账号")]),a("el-button",{attrs:{type:"success",size:"mini"},nativeOn:{click:function(a){return e.contact(t.row)}}},[e._v("联系人")])]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加和更新供应商",visible:e.dialogAccount},on:{"update:visible":function(t){e.dialogAccount=t}}},[a("el-form",{attrs:{model:e.formAccount}},[a("el-form-item",{attrs:{label:"类型","label-width":"90px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formAccount.type,callback:function(t){e.$set(e.formAccount,"type",t)},expression:"formAccount.type"}},[e._v("企业")]),a("el-radio",{attrs:{label:"2"},model:{value:e.formAccount.type,callback:function(t){e.$set(e.formAccount,"type",t)},expression:"formAccount.type"}},[e._v("个人")])],1),a("el-form-item",{attrs:{label:"收款人","label-width":"90px"}},[a("el-input",{model:{value:e.formAccount.receiving_name,callback:function(t){e.$set(e.formAccount,"receiving_name",t)},expression:"formAccount.receiving_name"}})],1),a("el-form-item",{attrs:{label:"收款账号","label-width":"90px"}},[a("el-input",{model:{value:e.formAccount.receiving_account,callback:function(t){e.$set(e.formAccount,"receiving_account",t)},expression:"formAccount.receiving_account"}})],1),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addAccount}},[e._v("提交")])],1)],1),a("el-table",{attrs:{data:e.AccountData}},[a("el-table-column",{attrs:{label:"类型",prop:"type"}}),a("el-table-column",{attrs:{label:"收款人",prop:"receiving_name"}}),a("el-table-column",{attrs:{label:"收款账号",prop:"receiving_account",width:"300px"}}),a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editAccount(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.staticAccount(t.row)}}},[e._v("禁用")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage1,"page-size":e.per_page1,layout:"total, prev, pager, next",total:e.total1},on:{"current-change":e.handleCurrentChange1}})],1)],1),a("el-dialog",{attrs:{title:"添加和更新供应商",visible:e.dialogContact},on:{"update:visible":function(t){e.dialogContact=t}}},[a("el-form",{attrs:{model:e.formContact}},[a("el-form-item",{attrs:{label:"职位","label-width":"90px"}},[a("el-input",{model:{value:e.formContact.position,callback:function(t){e.$set(e.formContact,"position",t)},expression:"formContact.position"}})],1),a("el-form-item",{attrs:{label:"姓名","label-width":"90px"}},[a("el-input",{model:{value:e.formContact.name,callback:function(t){e.$set(e.formContact,"name",t)},expression:"formContact.name"}})],1),a("el-form-item",{attrs:{label:"电话","label-width":"90px"}},[a("el-input",{model:{value:e.formContact.phone,callback:function(t){e.$set(e.formContact,"phone",t)},expression:"formContact.phone"}})],1),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addContact}},[e._v("提交")])],1)],1),a("el-table",{attrs:{data:e.ContactData}},[a("el-table-column",{attrs:{label:"职位",prop:"position"}}),a("el-table-column",{attrs:{label:"姓名",prop:"name"}}),a("el-table-column",{attrs:{label:"电话",prop:"phone"}}),a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.editContact(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.staticContact(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage2,"page-size":e.per_page2,layout:"total, prev, pager, next",total:e.total2},on:{"current-change":e.handleCurrentChange2}})],1)],1),a("el-dialog",{attrs:{title:"添加和更新供应商",visible:e.AddModification,width:"70%"},on:{"update:visible":function(t){e.AddModification=t}}},[a("el-form",{attrs:{model:e.formAddModification,inline:!0}},[a("el-form-item",{attrs:{label:"仓库","label-width":"90px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formAddModification.type,callback:function(t){e.$set(e.formAddModification,"type",t)},expression:"formAddModification.type"}},[e._v("本地仓库")]),a("el-radio",{attrs:{label:"2"},model:{value:e.formAddModification.type,callback:function(t){e.$set(e.formAddModification,"type",t)},expression:"formAddModification.type"}},[e._v("供应商")])],1),a("br"),a("el-form-item",{attrs:{label:"省","label-width":"90px"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{placeholder:"省级地区"},on:{change:e.choseProvince},model:{value:e.sheng,callback:function(t){e.sheng=t},expression:"sheng"}},e._l(e.province,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"市","label-width":"90px"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{placeholder:"市级地区"},on:{change:e.choseCity},model:{value:e.shi,callback:function(t){e.shi=t},expression:"shi"}},e._l(e.shi1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"地区","label-width":"90px"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{placeholder:"区级地区"},on:{change:e.choseBlock},model:{value:e.qu,callback:function(t){e.qu=t},expression:"qu"}},e._l(e.qu1,function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.id}})}),1)],1),a("br"),a("el-form-item",{attrs:{label:"名称","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入名称"},model:{value:e.formAddModification.name,callback:function(t){e.$set(e.formAddModification,"name",t)},expression:"formAddModification.name"}})],1),a("br"),a("el-form-item",{attrs:{label:"具体地址","label-width":"90px"}},[a("el-input",{staticStyle:{width:"500px"},attrs:{type:"textarea",placeholder:"请输入具体地址"},model:{value:e.formAddModification.address,callback:function(t){e.$set(e.formAddModification,"address",t)},expression:"formAddModification.address"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.AddModification=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updata}},[e._v("确 定")])],1)],1)],1)},gr=[],br={data:function(){return{region:"",schanPing:"",starttimes:"",endtimes:"",currentPage:0,total:0,per_page:0,last_page:0,options:[],tableData:[],AddModification:!1,formAddModification:{id:"",type:"",province:"",city:"",county:"",name:"",address:"",contacts:"",phone:""},dialogAccount:!1,formAccount:{id:"",supplier_id:"",type:"",receiving_name:"",receiving_account:""},AccountData:[],currentPage1:0,total1:0,per_page1:0,last_page1:0,ID:"",dialogContact:!1,formContact:{supplier_id:"",name:"",position:"",phone:""},ContactData:[],currentPage2:0,total2:0,per_page2:0,last_page2:0,province:"",city:"",block:"",sheng:"",shi:"",shi1:[],qu:"",qu1:[]}},methods:{add:function(){this.formAddModification.id="",this.formAddModification.type="",this.formAddModification.province="",this.sheng="",this.formAddModification.city="",this.shi="",this.formAddModification.county="",this.qu="",this.formAddModification.name="",this.formAddModification.contacts="",this.formAddModification.phone="",this.formAddModification.address="",this.AddModification=!0},contact:function(e){this.dialogContact=!0,this.formContact.supplier_id=e.id,this.ID=e.id,this.getContactData(e.id)},getContactData:function(e){var t=this;this.axios.get("/erp.supplier/supplier_user_lists?id="+e).then(function(e){t.ContactData=e.data.supplier_payee.data,t.currentPage2=e.data.supplier_payee.current_page,t.total2=e.data.supplier_payee.total,t.per_page2=e.data.supplier_payee.per_page,t.last_page2=e.data.supplier_payee.last_page})},addContact:function(){var e=this;""==this.formContact.id?this.axios.post("/erp.supplier/supplier_user_add",{supplier_id:this.formContact.supplier_id,name:this.formContact.name,phone:this.formContact.phone,position:this.formContact.position}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getContactData(e.ID)):e.open(t.data.msg,"error")}):this.axios.post("/erp.supplier/supplier_user_update",{id:this.formContact.id,supplier_id:this.formContact.supplier_id,name:this.formContact.name,phone:this.formContact.phone,position:this.formContact.position}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getContactData(e.ID)):e.open(t.data.msg,"error")})},handleCurrentChange2:function(e){var t=this;this.axios.post("/erp.supplier/supplier_list",{page:e}).then(function(e){t.AccountData=e.data.supplier_payee.data,t.currentPage2=e.data.supplier_payee.current_page,t.total2=e.data.supplier_payee.total,t.per_page2=e.data.supplier_payee.per_page,t.last_page2=e.data.supplier_payee.last_page})},editContact:function(e){this.formContact.id=e.id,this.formContact.supplier_id=e.supplier_id,this.formContact.name=e.name,this.formContact.phone=e.phone,this.formContact.position=e.position},staticContact:function(e){var t=this;this.axios.post("/erp.supplier/supplier_user_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getContactData(t.ID)):t.open(e.data.msg,"error")})},modify:function(e){var t;t=1==e.type?"1":"2",this.AddModification=!0,this.formAddModification.id=e.id,this.formAddModification.type=t,this.formAddModification.province=e.province,this.formAddModification.city=e.city,this.formAddModification.county=e.county,this.sheng=e.province,this.shi=e.city,this.qu=e.county,this.formAddModification.address=e.address,this.formAddModification.name=e.name,this.formAddModification.contacts=e.contacts,this.formAddModification.phone=e.phone},account:function(e){var t=this;this.dialogAccount=!0,this.formAccount.supplier_id=e.id,this.axios.get("/erp.supplier/supplier_payee_lists?id="+e.id).then(function(e){t.AccountData=e.data.supplier_payee.data,t.currentPage1=e.data.supplier_payee.current_page,t.total1=e.data.supplier_payee.total,t.per_page1=e.data.supplier_payee.per_page,t.last_page1=e.data.supplier_payee.last_page})},addAccount:function(){var e=this;""==this.formAccount.id?this.axios.post("/erp.supplier/supplier_payee_add",{supplier_id:this.formAccount.supplier_id,type:this.formAccount.type,receiving_name:this.formAccount.receiving_name,receiving_account:this.formAccount.receiving_account}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.axios.get("/erp.supplier/supplier_payee_lists?id="+e.formAccount.supplier_id).then(function(t){e.AccountData=t.data.supplier_payee.data,e.currentPage1=t.data.supplier_payee.current_page,e.total1=t.data.supplier_payee.total,e.per_page1=t.data.supplier_payee.per_page,e.last_page1=t.data.supplier_payee.last_page}),e.formAccount.type="",e.formAccount.receiving_name="",e.formAccount.receiving_account=""):e.open(t.data.msg,"error")}):this.axios.post("/erp.supplier/supplier_payee_update",{supplier_id:this.formAccount.supplier_id,type:this.formAccount.type,receiving_name:this.formAccount.receiving_name,receiving_account:this.formAccount.receiving_account,id:this.formAccount.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.axios.get("/erp.supplier/supplier_payee_lists?id="+e.formAccount.supplier_id).then(function(t){e.AccountData=t.data.supplier_payee.data,e.currentPage1=t.data.supplier_payee.current_page,e.total1=t.data.supplier_payee.total,e.per_page1=t.data.supplier_payee.per_page,e.last_page1=t.data.supplier_payee.last_page}),e.formAccount.type="",e.formAccount.receiving_name="",e.formAccount.receiving_account="",e.formAccount.id=""):e.open(t.data.msg,"error")})},editAccount:function(e){this.formAccount.id=e.id,this.formAccount.type=String(e.type),this.formAccount.receiving_name=e.receiving_name,this.formAccount.receiving_account=e.receiving_account},staticAccount:function(e){var t=this;this.axios.post("/erp.supplier/supplier_payee_status",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.axios.get("/erp.supplier/supplier_payee_lists?id="+t.formAccount.supplier_id).then(function(e){t.AccountData=e.data.supplier_payee.data,t.currentPage1=e.data.supplier_payee.current_page,t.total1=e.data.supplier_payee.total,t.per_page1=e.data.supplier_payee.per_page,t.last_page1=e.data.supplier_payee.last_page})):t.open(e.data.msg,"error")})},handleCurrentChange1:function(e){var t=this;this.axios.post("/erp.supplier/supplier_list",{page:e}).then(function(e){t.AccountData=e.data.supplier_payee.data,t.currentPage1=e.data.supplier_payee.current_page,t.total1=e.data.supplier_payee.total,t.per_page1=e.data.supplier_payee.per_page,t.last_page1=e.data.supplier_payee.last_page})},updata:function(){var e=this;""==this.formAddModification.id?this.axios.post("/erp.supplier/supplier_add",{id:this.formAddModification.id,type:this.formAddModification.type,name:this.formAddModification.name,province:this.formAddModification.province,city:this.formAddModification.city,county:this.formAddModification.county,address:this.formAddModification.address}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getData(),e.AddModification=!1):e.open(t.data.msg,"error")}):this.axios.post("/erp.supplier/supplier_update",{id:this.formAddModification.id,type:this.formAddModification.type,name:this.formAddModification.name,province:this.formAddModification.province,city:this.formAddModification.city,county:this.formAddModification.county,address:this.formAddModification.address}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getData(),e.AddModification=!1):e.open(t.data.msg,"error")})},getData:function(){var e=this;this.axios.get("/erp.supplier/supplier_list").then(function(t){e.tableData=t.data.supplier.data,e.currentPage=t.data.supplier.current_page,e.total=t.data.supplier.total,e.per_page=t.data.supplier.per_page,e.last_page=t.data.supplier.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.supplier/supplier_list",{page:e,name:this.schanPing}).then(function(e){t.tableData=e.data.supplier.data,t.currentPage=e.data.supplier.current_page,t.total=e.data.supplier.total,t.per_page=e.data.supplier.per_page,t.last_page=e.data.supplier.last_page,a.close()})},seach:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.supplier/supplier_list",{name:this.schanPing}).then(function(a){e.tableData=a.data.supplier.data,e.currentPage=a.data.supplier.current_page,e.total=a.data.supplier.total,e.per_page=a.data.supplier.per_page,e.last_page=a.data.supplier.last_page,t.close()})},getCityData:function(){var e=this;e.axios.get("./api/map.json").then(function(t){if(200==t.status){var a=t.data;for(var i in e.province=[],e.city=[],e.block=[],a)i.match(/0000$/)?e.province.push({id:i,value:a[i],children:[]}):i.match(/00$/)?e.city.push({id:i,value:a[i],children:[]}):e.block.push({id:i,value:a[i]});for(var r in e.province)for(var s in e.city)e.province[r].id.slice(0,2)===e.city[s].id.slice(0,2)&&e.province[r].children.push(e.city[s]);for(var o in e.city)for(var l in e.block)e.block[l].id.slice(0,4)===e.city[o].id.slice(0,4)&&e.city[o].children.push(e.block[l])}})},choseProvince:function(e){for(var t in this.province)e===this.province[t].id&&(this.shi1=this.province[t].children,this.shi=this.province[t].children[0].value,this.qu1=this.province[t].children[0].children,this.qu=this.province[t].children[0].children[0].value,this.E=this.qu1[0].value,this.formAddModification.province=this.province[t].value,this.formAddModification.city=this.province[t].children[0].value,this.formAddModification.county=this.province[t].children[0].children[0].value)},choseCity:function(e){for(var t in this.city)e===this.city[t].id&&(this.qu1=this.city[t].children,this.qu=this.city[t].children[0].value,this.E=this.qu1[0].id,this.formAddModification.city=this.city[t].value)},choseBlock:function(e){for(var t in this.E=e,this.block)e===this.block[t].id&&(this.formAddModification.county=this.block[t].value)},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.getCityData(),this.getData()},watch:{$route:function(e){this.getCityData(),this.getData()}}},vr=br,yr=(i("2703"),Object(d["a"])(vr,_r,gr,!1,null,"2b799742",null)),xr=yr.exports,kr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_head"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"业务员姓名"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seach}},[e._v("搜索")])],1),a("div",{staticClass:"box_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"订单编号"}}),a("el-table-column",{attrs:{label:"业务员",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dep_title)+" "+e._s(t.row.user_name))])]}}])}),a("el-table-column",{attrs:{prop:"customer_name",label:"客户姓名"}}),a("el-table-column",{attrs:{prop:"sales_time",label:"销售日期"}}),a("el-table-column",{attrs:{prop:"total_price",label:"销售金额"}}),a("el-table-column",{attrs:{prop:"user_price",label:"业务提成"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("草稿")]):e._e(),1==t.row.status?a("span",[e._v("已经提交订单")]):e._e(),10==t.row.status?a("span",[e._v("财务审核完毕")]):e._e(),20==t.row.status?a("span",[e._v("采购设置完成")]):e._e(),30==t.row.status?a("span",[e._v("预付款处理中")]):e._e(),40==t.row.status?a("span",[e._v("等待发货")]):e._e(),50==t.row.status?a("span",[e._v("全部发完后变")]):e._e(),60==t.row.status?a("span",[e._v("全部收到货 等开票")]):e._e(),70==t.row.status?a("span",[e._v("开完票后等回款")]):e._e(),90==t.row.status?a("span",[e._v("结束")]):e._e(),999==t.row.status?a("span",[e._v("作废")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"发票"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invoice_type)+e._s(t.row.invoice_tax)+"%")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[10==t.row.status?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.examine(t.row)}}},[e._v("采购")]):e._e(),10<t.row.status&&t.row.status<90?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.SeeExamine(t.row)}}},[e._v("查看")]):e._e(),10<t.row.status&&t.row.status<90?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.daochu(t.row)}}},[e._v("导出")]):e._e(),90==t.row.status?a("span",[e._v("结束")]):e._e(),999==t.row.status?a("span",[e._v("已作废")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},wr=[],Sr=(i("df7c"),{data:function(){return{value:"",tableData:[],currentPage:0,total:0,per_page:0,last_page:0,list:[],liebiao:[]}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{examine:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/erp/Purchase/Purchaseorder/".concat(e.id),params:{userId:e.id,name:"/erp/Purchase/Purchaseorder/".concat(e.id)}});var t={route:"/erp/Purchase/Purchaseorder/".concat(e.id),name:"采购详情",id:e.id},a="/erp/Purchase/Purchaseorder/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},getOrderList:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中……",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.get("/erp.purchase/purchase_order_list").then(function(a){e.tableData=a.data.order.data,e.currentPage=a.data.order.current_page,e.total=a.data.order.total,e.per_page=a.data.order.per_page,e.last_page=a.data.order.last_page,t.close()})},SeeExamine:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/erp/Purchase/seePurchase/".concat(e.id),params:{userId:e.id,name:"/erp/Purchase/seePurchase/".concat(e.id)}});var t={route:"/erp/Purchase/seePurchase/".concat(e.id),name:"采购查看",id:e.id},a="/erp/Purchase/seePurchase/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.purchase/purchase_order_list",{page:e,name:this.value}).then(function(e){t.tableData=e.data.order.data,t.currentPage=e.data.order.current_page,t.total=e.data.order.total,t.per_page=e.data.order.per_page,t.last_page=e.data.order.last_page,a.close()})},seach:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.purchase/purchase_order_list",{name:this.value}).then(function(a){e.tableData=a.data.order.data,e.currentPage=a.data.order.current_page,e.total=a.data.order.total,e.per_page=a.data.order.per_page,e.last_page=a.data.order.last_page,t.close()})},daochu:function(e){var t=this,a=[],r=[];this.axios.get("/erp.Purchase/purchase_order_product_sku_select?id="+e.id).then(function(e){r=e.data.product_sku}),this.axios.get("/erp.Purchase/purchase_order_address_product_select?id="+e.id).then(function(e){for(var i=e.data.address,s=[],o=0;o<i.length;o++)for(var l=0;l<i[o].purchase.length;l++)for(var n=0;n<i[o].purchase[l].product.length;n++){var c=new Object;c["address_name"]=i[o].name,c["address_phone"]=i[o].phone,c["address_city"]=i[o].city,c["address_county"]=i[o].county,c["address_address"]=i[o].address,c["address_id"]=i[o].customer_address_id,c["delivery"]=i[o].delivery,c["payment"]=i[o].payment;var d=i[o].purchase[l].product;c["supplier_id"]=d[n].supplier_id,c["customer_order_product_sku_id"]=d[n].customer_order_product_sku_id;var u="".concat(d[n].customer_order_product_sku_id);a.push(u),c["supplier_id"]=d[n].supplier_id,c["supplier_name"]=d[n].supplier_name,c["supplier_address"]="".concat(d[n].supplier_province).concat(d[n].supplier_city).concat(d[n].supplier_county),c[u]=d[n].number,s.push(c)}for(var p={},m=0;m<s.length;m++){var h=s[m];if(p["".concat(h.address_id).concat(h.supplier_id)])for(var f=0;f<r.length;f++){var _=r[f];p["".concat(h.address_id).concat(h.supplier_id)]&&p["".concat(h.address_id).concat(h.supplier_id)]["".concat(_.id)]&&(p["".concat(h.address_id).concat(h.supplier_id)]["".concat(_.id)]+=h["".concat(_.id)])}else p["".concat(h.address_id).concat(h.supplier_id)]=h}for(var g in p)t.liebiao.push(p[g])}),i.e("chunk-39257bb2").then(function(){var r=i("b10a"),s=r.export_json_to_excel,o=["收货人","电话","省","市","区","具体地址","付款方式","送货方式","供应商","供应商省份","供应商市","供应商区","是否含票"],l=["address_name","address_phone","address_province","address_city","address_county","address_address","payment","delivery","supplier_name","supplier_address","transfer"];t.axios.get("/erp.Purchase/purchase_order_product_sku_select?id="+e.id).then(function(e){for(var i=e.data.product_sku,r=0;r<i.length;r++){var n="".concat(i[r].name).concat(i[r].sku_name).concat(i[r].class_name);o.unshift(n),l.unshift(a[r])}var c=t.liebiao,d=t.formatJson(l,c);s(o,d,"数据")})}.bind(null,i)).catch(i.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},open:function(e,t){this.$message({message:e,type:t})}}),activated:function(){this.getOrderList()}}),Ar=Sr,Cr=(i("22d6"),Object(d["a"])(Ar,kr,wr,!1,null,"439d26ec",null)),Fr=Cr.exports,Pr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box",attrs:{id:"printTest"},on:{click:function(t){e.show=!0}}},[a("div",{staticClass:"head_box_man"},[a("h3",[a("span",[e._v("客户姓名：")]),a("span",[e._v(e._s(e.name))]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("客户电话：")]),a("span",[e._v(e._s(e.phone))]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("销售日期：")]),a("span",[e._v(e._s(e.time))]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("销售员：")]),a("span",[e._v(e._s(e.user))])])]),a("div",{staticClass:"head_box_table"},[a("el-table",{attrs:{data:e.headBoxTable}},[a("el-table-column",{attrs:{prop:"id",label:"产品编号"}}),a("el-table-column",{attrs:{label:"产品名称",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本价"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"销售单价"}}),a("el-table-column",{attrs:{prop:"number",label:"数量"}}),a("el-table-column",{attrs:{label:"销售总价"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.selling_price*t.row.number))])]}}])})],1)],1),a("div",{staticClass:"head_box_address"},e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("div",{staticClass:"generatedAddressInnerLeft1"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v(e._s(t.type))])]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n                            "),e._l(t.product,function(t){return a("span",{key:t.id,staticStyle:{meflt:"argin-10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v("付款方式:"+e._s(1==t.payment?"物流现付":"物流到付"))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:"+e._s(e.state[t.delivery]))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("备注信息："+e._s(t.remarks))]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(a){return e.Purchase(t)}}},[e._v("采购设置")])],1),t.purchase?[a("div",{staticClass:"generatedAddressInnerLeft2"},[a("h4",[e._v("已配货信息：")]),e._l(t.purchase,function(t){return a("div",{key:t.id,staticStyle:{"margin-top":"5px"}},[a("p",[a("span",{staticStyle:{"margin-left":"10px"}},[e._v("备注：")]),a("span",[e._v(e._s(t.remarks))]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{"margin-right":"10px",float:"right"},attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteDistributionhead(t)}}},[e._v("删除")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{"margin-right":"10px",float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editDistributionHead(t)}}},[e._v("修改")])],1),a("el-table",{attrs:{data:t.product}},[a("el-table-column",{attrs:{label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"供应商",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"运费",prop:"freight_price"}}),a("el-table-column",{attrs:{label:"成本价(每个)",prop:"purchase_price"}})],1)],1)})],2)]:e._e()],2)])}),0),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.Confirm}},[e._v("确认提交")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"},{name:"print",rawName:"v-print",value:"#printTest",expression:"'#printTest'"}],staticStyle:{"margin-top":"20px","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:function(t){e.show=!1}}},[e._v("打印")]),a("el-dialog",{attrs:{title:"采购配货",visible:e.dialogFormProduct,width:"70%"},on:{"update:visible":function(t){e.dialogFormProduct=t}}},[a("el-form",{ref:"Distribution",attrs:{model:e.Distribution,inline:""}},[a("el-form-item",{attrs:{label:"备注","label-width":"90px",prop:"remarks"}},[a("el-input",{staticStyle:{width:"400px"},model:{value:e.Distribution.remarks,callback:function(t){e.$set(e.Distribution,"remarks",t)},expression:"Distribution.remarks"}})],1),a("el-checkbox",{model:{value:e.Distribution.transfer,callback:function(t){e.$set(e.Distribution,"transfer",t)},expression:"Distribution.transfer"}},[e._v("中转单")]),a("span",[e._v("自动新增地址到湖南可为")])],1),a("div",{staticClass:"product"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{label:"是否含票"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:"1"},model:{value:t.row.invoice,callback:function(a){e.$set(t.row,"invoice",a)},expression:"scope.row.invoice"}},[e._v("含票")]),a("el-radio",{attrs:{label:"0"},model:{value:t.row.invoice,callback:function(a){e.$set(t.row,"invoice",a)},expression:"scope.row.invoice"}},[e._v("不含票")])]}}])}),a("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"数量"},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),a("el-table-column",{attrs:{label:"成本"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"成本"},model:{value:t.row.cost_price,callback:function(a){e.$set(t.row,"cost_price",a)},expression:"scope.row.cost_price"}})]}}])}),a("el-table-column",{attrs:{label:"运费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"运费"},model:{value:t.row.freight_price,callback:function(a){e.$set(t.row,"freight_price",a)},expression:"scope.row.freight_price"}})]}}])}),a("el-table-column",{attrs:{label:"供应商",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择","popper-class":"abc"},model:{value:t.row.supplier_id,callback:function(a){e.$set(t.row,"supplier_id",a)},expression:"scope.row.supplier_id"}},e._l(t.row.supplier,function(t){return a("el-option",{key:t.id,attrs:{label:t.supplier_name+"--库存"+t.inventory_number,value:t.supplier_id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.supplier_name))]),0!=t.inventory_number?a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("库存"+e._s(t.inventory_number))]):e._e(),a("br"),a("span",{staticStyle:{float:"left",width:"100%",color:"#8492a6","font-size":"13px"}},[e._v("采购数量为"+e._s(t.number)+"---"+e._s(t.cost_price)+"￥")])])}),1)]}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.DistributionAdd}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"采购信息修改",visible:e.headModify,width:"70%"},on:{"update:visible":function(t){e.headModify=t}}},[a("el-form",{ref:"Distribution",attrs:{model:e.Distribution,inline:""}},[a("el-form-item",{attrs:{label:"备注","label-width":"90px",prop:"remarks"}},[a("el-input",{staticStyle:{width:"400px"},model:{value:e.Distribution.remarks,callback:function(t){e.$set(e.Distribution,"remarks",t)},expression:"Distribution.remarks"}})],1),a("el-checkbox",{model:{value:e.Distribution.transfer,callback:function(t){e.$set(e.Distribution,"transfer",t)},expression:"Distribution.transfer"}},[e._v("中转单")]),a("span",[e._v("自动新增地址到湖南可为")])],1),a("div",{staticClass:"product"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{label:"是否含票"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:e.piao.a},model:{value:t.row.invoice,callback:function(a){e.$set(t.row,"invoice",a)},expression:"scope.row.invoice"}},[e._v("含票")]),a("el-radio",{attrs:{label:e.piao.b},model:{value:t.row.invoice,callback:function(a){e.$set(t.row,"invoice",a)},expression:"scope.row.invoice"}},[e._v("不含票")])]}}])}),a("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"数量"},model:{value:t.row.number,callback:function(a){e.$set(t.row,"number",a)},expression:"scope.row.number"}})]}}])}),a("el-table-column",{attrs:{label:"成本"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"成本"},model:{value:t.row.purchase_price,callback:function(a){e.$set(t.row,"purchase_price",a)},expression:"scope.row.purchase_price"}})]}}])}),a("el-table-column",{attrs:{label:"运费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"运费"},model:{value:t.row.freight_price,callback:function(a){e.$set(t.row,"freight_price",a)},expression:"scope.row.freight_price"}})]}}])}),a("el-table-column",{attrs:{label:"供应商"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择","popper-class":"abc"},model:{value:t.row.supplier_id,callback:function(a){e.$set(t.row,"supplier_id",a)},expression:"scope.row.supplier_id"}},e._l(t.row.supplier,function(t){return a("el-option",{key:t.id,attrs:{label:t.supplier_name+"--库存"+t.inventory_number,value:t.supplier_id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.supplier_name))]),0!=t.inventory_number?a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("库存"+e._s(t.inventory_number))]):e._e(),a("br"),a("span",{staticStyle:{float:"left",width:"100%",color:"#8492a6","font-size":"13px"}},[e._v("采购数量为"+e._s(t.number)+"---"+e._s(t.cost_price)+"￥")])])}),1)]}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancelheadModify()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updataHead}},[e._v("确 定")])],1)],1)],1)},Dr=[],$r=(i("5118"),{data:function(){return{show:!0,name:"",phone:"",time:"",user:"",headBoxTable:[],state:["","上门","上楼","自提"],fixedAddress:[{id:0,name:"GT",phone:"110",type:"送货上门",province:"湖南省",city:"长沙市",county:"芙蓉区",address:"2号",product:[{name:"笔",pid:1,sku_name:"bai",number:"300"}],remarks:"易燃易爆，小心"}],dialogFormProduct:!1,Distribution:{id:"",payment:"",delivery:"",remarks:"",transfer:!1,purchase_price:"",customer_order_address_id:""},Supplier:[],tableData:[],multipleSelection:[],headModify:!1,headModifyform:{},formpayment:{value:"",qian:"",remark:""},formpaymentedit:{value:"",qian:"",remark:"",id:""},Supplierformpayment:[],tablePayment:[],paymentModify:!1,piao:{a:0,b:1}}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{keep:function(e){alert(e)},handleSelectionChange:function(e){this.multipleSelection=e},Purchase:function(e){this.dialogFormProduct=!0,this.tableData=e.product,this.Distribution.id=e.id,this.Distribution.payment="",this.Distribution.delivery="",this.Distribution.remarks="",this.Distribution.transfer=!1},getheadBoxTable:function(){var e=this;this.axios.get("/erp.Purchase/purchase_order_product_sku_select?id="+this.$route.params.id).then(function(t){e.headBoxTable=t.data.product_sku})},getkehu:function(){var e=this;this.axios.get("/erp.Purchase/purchase_customer_order_update?id="+this.$route.params.id).then(function(t){e.name=t.data.customer_name,e.phone=t.data.customer_working_phone,e.time=t.data.sales_time,e.user=t.data.user_name})},getfixedAddress:function(){var e=this;this.axios.get("/erp.Purchase/purchase_order_address_product_select?id="+this.$route.params.id).then(function(t){e.fixedAddress=t.data.address})},cancel:function(){this.$refs["Distribution"].resetFields(),this.$refs.multipleTable.clearSelection(),this.dialogFormProduct=!1},DistributionAdd:function(){var e,t=this,a=[];if(e=1==this.Distribution.transfer?1:0,0==this.multipleSelection.length)this.open("勾选产品","error");else{for(var i=0;i<this.multipleSelection.length;i++){var r=void 0;r=void 0==this.multipleSelection[i].freight_price?{customer_order_product_sku_id:this.multipleSelection[i].customer_order_product_sku_id,invoice:this.multipleSelection[i].invoice,number:this.multipleSelection[i].number,supplier_id:this.multipleSelection[i].supplier_id,purchase_price:this.multipleSelection[i].cost_price,freight_price:0}:{customer_order_product_sku_id:this.multipleSelection[i].customer_order_product_sku_id,invoice:this.multipleSelection[i].invoice,number:this.multipleSelection[i].number,supplier_id:this.multipleSelection[i].supplier_id,purchase_price:this.multipleSelection[i].cost_price,freight_price:this.multipleSelection[i].freight_price},a.push(r)}" "==a[0].supplier_id||void 0==a[0].supplier_id?this.open("选择供应商","error"):" "==a[0].invoice||void 0==a[0].invoice?this.open("选择是否含票","error"):this.axios.post("/erp.Purchase/purchase_order_purchase_add",{customer_order_id:this.$route.params.id,customer_order_address_id:this.Distribution.id,payment:this.Distribution.payment,delivery:this.Distribution.delivery,remarks:this.Distribution.remarks,transfer:e,product:a}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.$refs["Distribution"].resetFields(),t.$refs.multipleTable.clearSelection(),t.getSupplierformpayment(),t.dialogFormProduct=!1,t.getfixedAddress()):(t.open(e.data.msg,"error"),t.$refs.multipleTable.clearSelection())})}},editDistributionHead:function(e){var t=this;this.axios.get("/erp.purchase/purchase_order_purchase_update?id="+e.id).then(function(e){var a;a=1===e.data.transfer,t.headModify=!0,t.tableData=e.data.product,t.Distribution.freight_price=e.data.freight_price,t.Distribution.remarks=e.data.remarks,t.Distribution.transfer=a,t.Distribution.id=e.data.id,t.Distribution.customer_order_address_id=e.data.customer_order_address_id})},cancelheadModify:function(){this.$refs["Distribution"].resetFields(),this.headModify=!1},updataHead:function(){var e,t=this,a=[],i=this.tableData;e=!0===this.Distribution.transfer?1:0;for(var r=0;r<i.length;r++){var s={customer_order_product_sku_id:i[r].customer_order_product_sku_id,invoice:i[r].invoice,number:i[r].number,supplier_id:i[r].supplier_id,purchase_price:i[r].purchase_price,id:i[r].id,freight_price:i[r].freight_price};a.push(s)}this.axios.post("/erp.purchase/purchase_order_purchase_update",{id:this.Distribution.id,customer_order_address_id:this.Distribution.customer_order_address_id,customer_order_id:this.$route.params.id,payment:this.Distribution.payment,delivery:this.Distribution.delivery,remarks:this.Distribution.remarks,transfer:e,product:a}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.$refs["Distribution"].resetFields(),t.getfixedAddress(),t.headModify=!1):t.open(e.data.msg,"error")})},deleteDistributionhead:function(e){var t=this;this.axios.post("/erp.purchase/purchase_order_purchase_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getfixedAddress(),t.headModify=!1):t.open(e.data.msg,"error")})},getSupplierformpayment:function(){var e=this;this.axios.get("/erp.purchase/purchase_order_supplier_payee_select?id="+this.$route.params.id).then(function(t){e.Supplierformpayment=t.data})},Addpayment:function(){var e=this;""==this.formpayment.value||""==this.formpayment.qian||""==this.formpayment.remark?this.open("填写完整，在进行申请","error"):this.axios.post("/erp.Purchase/purchase_order_advance_charge_add",{customer_order_id:this.$route.params.id,supplier_payee_id:this.formpayment.value,prepayment:this.formpayment.qian,remarks:this.formpayment.remark}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.$refs["formpayment"].resetFields(),e.gettablePayment()):e.open(t.data.msg,"error")})},deletes:function(e){var t=this;this.axios.post("/erp.Purchase/purchase_order_advance_charge_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettablePayment()):t.open(e.data.msg,"error")})},edits:function(e){this.paymentModify=!0,this.formpaymentedit.value=e.supplier_payee_id,this.formpaymentedit.qian=e.prepayment,this.formpaymentedit.remark=e.remarks,this.formpaymentedit.id=e.id},updatapayment:function(){var e=this;this.axios.post("/erp.Purchase/purchase_order_advance_charge_update",{customer_order_id:this.$route.params.id,supplier_payee_id:this.formpaymentedit.value,prepayment:this.formpaymentedit.qian,remarks:this.formpaymentedit.remark,id:this.formpaymentedit.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.gettablePayment(),e.paymentModify=!1,e.$refs["formpaymentedit"].resetFields()):e.open(t.data.msg,"error")})},Confirm:function(){var e=this;this.axios.post("/erp.Purchase/purchase_customer_order_update",{id:this.$route.params.id,data_table:"purchase"}).then(function(t){2e3==t.data.code?(e.triggerDeleteTabs(e.$route.query.path),e.open(t.data.msg,"success"),e.$router.push({path:"/erp/Purchase/seePurchase/".concat(e.$route.params.id)})):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){this.getheadBoxTable(),this.getkehu(),this.getfixedAddress(),this.getSupplierformpayment()},watch:{$route:function(e){this.$route.params.id&&(this.getheadBoxTable(),this.getkehu(),this.getfixedAddress(),this.getSupplierformpayment())}}}),Ir=$r,qr=(i("a9cb"),Object(d["a"])(Ir,Pr,Dr,!1,null,"13f9c45e",null)),Or=qr.exports,Nr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box_man"},[a("h3",[a("span",[e._v("客户姓名：")]),a("span",[e._v(e._s(e.name))]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("客户电话：")]),a("span",[e._v(e._s(e.phone))]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("销售日期：")]),a("span",[e._v(e._s(e.time))]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("销售员：")]),a("span",[e._v(e._s(e.user))])])]),a("div",{staticClass:"head_box_table"},[a("el-table",{attrs:{data:e.headBoxTable}},[a("el-table-column",{attrs:{prop:"id",label:"产品编号"}}),a("el-table-column",{attrs:{label:"产品名称",width:"350px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本价"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"销售单价"}}),a("el-table-column",{attrs:{prop:"number",label:"数量"}}),a("el-table-column",{attrs:{label:"销售总价"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.selling_price*t.row.number))])]}}])})],1)],1),a("div",{staticClass:"head_box_address"},e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("div",{staticClass:"generatedAddressInnerLeft1"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v(e._s(t.type))])]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n                            "),e._l(t.product,function(t){return a("span",{key:t.pid,staticStyle:{meflt:"argin-10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("备注信息："+e._s(t.remarks))])]),t.purchase?[a("div",{staticClass:"generatedAddressInnerLeft2"},[a("h4",[e._v("已配货信息：")]),e._l(t.purchase,function(t){return a("div",{key:t.id,staticStyle:{"margin-top":"5px"}},[a("p",[a("span",[e._v("付款方式：")]),a("span",[e._v(e._s(1==t.payment?"物流现付":"物流到付"))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("物流方式：")]),a("span",[e._v(e._s(e.state[t.delivery]))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("运费：")]),a("span",[e._v(e._s(t.freight_price))]),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("备注：")]),a("span",[e._v(e._s(t.remarks))])]),a("el-table",{attrs:{data:t.product}},[a("el-table-column",{attrs:{label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}],null,!0)}),a("el-table-column",{attrs:{label:"供应商",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"成本价(每个)",prop:"purchase_price"}})],1)],1)})],2)]:e._e()],2)])}),0),a("div",{staticClass:"head_box_payment"},[a("label",[e._v("货款支出")]),a("el-form",{ref:"formpayment",staticStyle:{"margin-top":"10px"},attrs:{model:e.formpayment,inline:""}},[a("el-form-item",{attrs:{prop:"value"}},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"供应商"},model:{value:e.formpayment.value,callback:function(t){e.$set(e.formpayment,"value",t)},expression:"formpayment.value"}},e._l(e.Supplierformpayment,function(t){return a("el-option",{key:t.supplier_payee_id,attrs:{label:""+t.supplier_name+t.receiving_name+t.receiving_account+t.name+t.sku_name,value:t.supplier_payee_id}},[a("span",{staticStyle:{float:"left","font-size":"20px"}},[e._v(e._s(t.supplier_name))]),a("span",{staticStyle:{float:"left","font-size":"16px","margin-left":"10px","margin-right":"10px"}},[e._v(e._s(t.receiving_name)+":"+e._s(t.receiving_account))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.name)+e._s(t.sku_name))])])}),1)],1),a("el-form-item",{attrs:{prop:"qian"}},[a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"费用"},model:{value:e.formpayment.qian,callback:function(t){e.$set(e.formpayment,"qian",t)},expression:"formpayment.qian"}})],1),a("el-form-item",{attrs:{prop:"remark"}},[a("el-input",{staticStyle:{width:"340px"},attrs:{placeholder:"备注"},model:{value:e.formpayment.remark,callback:function(t){e.$set(e.formpayment,"remark",t)},expression:"formpayment.remark"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.Addpayment}},[e._v("添加")])],1)],1),a("el-table",{attrs:{data:e.tablePayment}},[a("el-table-column",{attrs:{prop:"id",label:"订单"}}),a("el-table-column",{attrs:{prop:"supplier_name",label:"供应商"}}),a("el-table-column",{attrs:{prop:"receiving_name",label:"收款人"}}),a("el-table-column",{attrs:{prop:"receiving_name",label:"收款账号"}}),a("el-table-column",{attrs:{label:"金额",prop:"prepayment"}}),a("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("等待财务审核")]):e._e(),1==t.row.status?a("span",[e._v("等待出纳打款")]):e._e(),2==t.row.status?a("span",[e._v("审核通过")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.edits(t.row)}}},[e._v("修改")]):e._e(),0==t.row.status?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deletes(t.row)}}},[e._v("删除")]):e._e(),t.row.status>0?a("el-button",{attrs:{type:"primary",size:"small",disabled:""},on:{click:function(a){return e.edits(t.row)}}},[e._v("修改")]):e._e(),t.row.status>0?a("el-button",{attrs:{type:"danger",size:"small",disabled:""},on:{click:function(a){return e.deletes(t.row)}}},[e._v("删除")]):e._e()]}}])})],1)],1),a("el-dialog",{attrs:{title:"货款支出修改",visible:e.paymentModify},on:{"update:visible":function(t){e.paymentModify=t}}},[a("el-form",{attrs:{model:e.formpaymentedit}},[a("el-form-item",{attrs:{"label-width":"120px;",label:"供应商",prop:"value"}},[a("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"供应商"},model:{value:e.formpaymentedit.value,callback:function(t){e.$set(e.formpaymentedit,"value",t)},expression:"formpaymentedit.value"}},e._l(e.Supplierformpayment,function(t){return a("el-option",{key:t.supplier_payee_id,attrs:{label:""+t.supplier_name+t.receiving_name+t.receiving_account+t.name+t.sku_name,value:t.supplier_payee_id}},[a("span",{staticStyle:{float:"left","font-size":"20px"}},[e._v(e._s(t.supplier_name))]),a("span",{staticStyle:{float:"left","font-size":"16px","margin-left":"10px","margin-right":"10px"}},[e._v(e._s(t.receiving_name)+":"+e._s(t.receiving_account))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.name)+e._s(t.sku_name))])])}),1)],1),a("el-form-item",{attrs:{prop:"qian","label-width":"120px;",label:"费用"}},[a("el-input",{staticStyle:{width:"120px"},model:{value:e.formpaymentedit.qian,callback:function(t){e.$set(e.formpaymentedit,"qian",t)},expression:"formpaymentedit.qian"}})],1),a("el-form-item",{attrs:{prop:"remark","label-width":"120px;",label:"备注"}},[a("el-input",{staticStyle:{width:"340px"},model:{value:e.formpaymentedit.remark,callback:function(t){e.$set(e.formpaymentedit,"remark",t)},expression:"formpaymentedit.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.paymentModify=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updatapayment}},[e._v("确 定")])],1)],1)],1)},zr=[],Tr={data:function(){return{name:"",phone:"",time:"",user:"",headBoxTable:[],state:["","上门","上楼","自提"],fixedAddress:[{id:0,name:"GT",phone:"110",type:"送货上门",province:"湖南省",city:"长沙市",county:"芙蓉区",address:"2号",product:[{name:"笔",pid:1,sku_name:"bai",number:"300"}],remarks:"易燃易爆，小心"}],dialogFormProduct:!1,Distribution:{id:"",payment:"",delivery:"",freight_price:"",remarks:"",transfer:!1,purchase_price:"",customer_order_address_id:""},Supplier:[],tableData:[{name:"beizi",number:100,cost:"2.00",value:"1"},{name:"beizi",number:100,cost:"2.00",value:"1"},{name:"beizi",number:100,cost:"2.00",value:"1"}],multipleSelection:[],headModify:!1,headModifyform:{},formpayment:{value:"",qian:"",remark:""},formpaymentedit:{value:"",qian:"",remark:"",id:""},Supplierformpayment:[],tablePayment:[],paymentModify:!1}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},getheadBoxTable:function(){var e=this;this.axios.get("/erp.Purchase/purchase_order_product_sku_select?id="+this.$route.params.id).then(function(t){e.headBoxTable=t.data.product_sku})},getkehu:function(){var e=this;this.axios.get("/erp.Purchase/purchase_customer_order_update?id="+this.$route.params.id).then(function(t){e.name=t.data.customer_name,e.phone=t.data.customer_working_phone,e.time=t.data.sales_time,e.user=t.data.user_name})},getfixedAddress:function(){var e=this;this.axios.get("/erp.Purchase/purchase_order_address_product_select?id="+this.$route.params.id).then(function(t){e.fixedAddress=t.data.address})},getSupplierformpayment:function(){var e=this;this.axios.get("/erp.purchase/purchase_order_supplier_payee_select?id="+this.$route.params.id).then(function(t){e.Supplierformpayment=t.data})},gettablePayment:function(){var e=this;this.axios.get("/erp.Purchase/purchase_order_supplier_advance_select?id="+this.$route.params.id).then(function(t){e.tablePayment=t.data.advance_charge})},Addpayment:function(){var e=this;""==this.formpayment.value||""==this.formpayment.qian||""==this.formpayment.remark?this.open("填写完整，在进行申请","error"):this.axios.post("/erp.Purchase/purchase_order_advance_charge_add",{customer_order_id:this.$route.params.id,supplier_payee_id:this.formpayment.value,prepayment:this.formpayment.qian,remarks:this.formpayment.remark}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.$refs["formpayment"].resetFields(),e.gettablePayment()):e.open(t.data.msg,"error")})},edits:function(e){this.paymentModify=!0,this.formpaymentedit.value=e.supplier_payee_id,this.formpaymentedit.qian=e.prepayment,this.formpaymentedit.remark=e.remarks,this.formpaymentedit.id=e.id},updatapayment:function(){var e=this;this.axios.post("/erp.Purchase/purchase_order_advance_charge_update",{customer_order_id:this.$route.params.id,supplier_payee_id:this.formpaymentedit.value,prepayment:this.formpaymentedit.qian,remarks:this.formpaymentedit.remark,id:this.formpaymentedit.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.gettablePayment(),e.paymentModify=!1,e.$refs["formpaymentedit"].resetFields()):e.open(t.data.msg,"error")})},deletes:function(e){var t=this;this.axios.post("/erp.Purchase/purchase_order_advance_charge_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettablePayment()):t.open(e.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.getheadBoxTable(),this.getfixedAddress(),this.gettablePayment(),this.getSupplierformpayment()},watch:{$route:function(e){this.$route.params.id&&(this.getheadBoxTable(),this.getkehu(),this.getfixedAddress(),this.gettablePayment(),this.getSupplierformpayment())}}},jr=Tr,Ur=(i("85f0"),Object(d["a"])(jr,Nr,zr,!1,null,"4cfd7706",null)),Mr=Ur.exports,Er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.product_stock?a("el-table",{attrs:{data:t.row.product_stock}},[a("el-table-column",{attrs:{label:"供应商",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"单价",prop:"purchase_price"}}),a("el-table-column",{attrs:{label:"仓库类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.type?a("span",[e._v("本地储存")]):e._e(),1==t.row.type?a("span",[e._v("外部储存")]):e._e()]}}],null,!0)}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("已提交")]):e._e(),1==t.row.status?a("span",[e._v("财务已审核")]):e._e(),2==t.row.status?a("span",[e._v("出纳已付款")]):e._e()]}}],null,!0)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updata(t.row)}}},[e._v("更新")]):e._e(),0==t.row.status?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deteles(t.row)}}},[e._v("删除")]):e._e(),t.row.status>0?a("span",[e._v("无法操作")]):e._e()]}}],null,!0)})],1):a("h4",[e._v("暂无采购信息")])]}}])}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.class_name))])]}}])}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("提交")]):e._e(),3==t.row.status?a("span",[e._v("审核完等待采购")]):e._e(),5==t.row.status?a("span",[e._v("采购完毕")]):e._e(),6==t.row.status?a("span",[e._v("等待出纳付款")]):e._e(),9==t.row.status?a("span",[e._v("完成")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"录入人",prop:"user_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status<5?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.purchase(t.row)}}},[e._v("采购")]):e._e()]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"备货",visible:e.dialogPurchase,width:"50%"},on:{"update:visible":function(t){e.dialogPurchase=t}}},[a("el-form",{attrs:{model:e.dialogPurchaseForm}},[a("el-form-item",{attrs:{label:"供应商","label-width":"90px"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},model:{value:e.dialogPurchaseForm.supplier_id,callback:function(t){e.$set(e.dialogPurchaseForm,"supplier_id",t)},expression:"dialogPurchaseForm.supplier_id"}},e._l(e.supplier,function(t){return a("el-option",{key:t.supplier_id,attrs:{label:t.supplier_name,value:t.supplier_id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.supplier_name))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("采购量"+e._s(t.number)+"---单价"+e._s(t.selling_price))])])}),1)],1),a("el-form-item",{attrs:{label:"储存类型","label-width":"90px"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.dialogPurchaseForm.type,callback:function(t){e.$set(e.dialogPurchaseForm,"type",t)},expression:"dialogPurchaseForm.type"}},[e._v("本地储存")]),a("el-radio",{attrs:{label:"1"},model:{value:e.dialogPurchaseForm.type,callback:function(t){e.$set(e.dialogPurchaseForm,"type",t)},expression:"dialogPurchaseForm.type"}},[e._v("外部储存")])],1),a("el-form-item",{attrs:{label:"结算方式","label-width":"90px"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.dialogPurchaseForm.settlement,callback:function(t){e.$set(e.dialogPurchaseForm,"settlement",t)},expression:"dialogPurchaseForm.settlement "}},[e._v("现结算")]),a("el-radio",{attrs:{label:"1"},model:{value:e.dialogPurchaseForm.settlement,callback:function(t){e.$set(e.dialogPurchaseForm,"settlement",t)},expression:"dialogPurchaseForm.settlement "}},[e._v("后结算")])],1),a("el-form-item",{attrs:{label:"数量","label-width":"90px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.dialogPurchaseForm.number,callback:function(t){e.$set(e.dialogPurchaseForm,"number",t)},expression:"dialogPurchaseForm.number"}})],1),a("el-form-item",{attrs:{label:"单价","label-width":"90px"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:e.dialogPurchaseForm.purchase_price,callback:function(t){e.$set(e.dialogPurchaseForm,"purchase_price",t)},expression:"dialogPurchaseForm.purchase_price"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogPurchase=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addPurchase}},[e._v("确 定")])],1)],1)],1)},Rr=[],Lr={data:function(){return{seach:"",tableData:[],currentPage:"",total:"",per_page:"",last_page:"",supplier:[],dialogPurchase:!1,dialogPurchaseForm:{product_stock_id:"",product_sku_id:"",number:"",supplier_id:"",purchase_price:"",type:"",settlement:"",id:""}}},methods:{gettableData:function(){var e=this;this.axios.get("/erp.Purchase/purchase_product_stockup_supplier_lists").then(function(t){e.tableData=t.data.product_stock.data,e.currentPage=t.data.product_stock.current_page,e.total=t.data.product_stock.total,e.per_page=t.data.product_stock.per_page,e.last_page=t.data.product_stock.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.Purchase/purchase_product_stockup_supplier_lists",{page:e}).then(function(e){t.tableData=e.data.product_stock.data,t.currentPage=e.data.product_stock.current_page,a.close()})},getsupplier:function(e){var t=this;this.axios.get("/erp.Purchase/purchase_product_stockup_supplier_add?product_sku_id="+e).then(function(e){t.supplier=e.data.product_supplier})},purchase:function(e){this.getsupplier(e.product_sku_id),this.dialogPurchase=!0,this.dialogPurchaseForm.product_stock_id=e.id,this.dialogPurchaseForm.product_sku_id=e.product_sku_id,this.dialogPurchaseForm.number="",this.dialogPurchaseForm.supplier_id="",this.dialogPurchaseForm.purchase_price="",this.dialogPurchaseForm.id="",this.dialogPurchaseForm.type="",this.dialogPurchaseForm.settlement="0"},updata:function(e){this.getsupplier(e.product_sku_id),this.dialogPurchase=!0,this.dialogPurchaseForm.product_stock_id=e.product_stock_id,this.dialogPurchaseForm.product_sku_id=e.product_sku_id,this.dialogPurchaseForm.number=e.number,this.dialogPurchaseForm.supplier_id=e.supplier_id,this.dialogPurchaseForm.purchase_price=e.purchase_price,this.dialogPurchaseForm.id=e.id,this.dialogPurchaseForm.type=String(e.type),this.dialogPurchaseForm.settlement=String(e.settlement)},addPurchase:function(){var e=this;""==this.dialogPurchaseForm.id?this.axios.post("/erp.Purchase/purchase_product_stockup_supplier_add",{product_stock_id:this.dialogPurchaseForm.product_stock_id,product_sku_id:this.dialogPurchaseForm.product_sku_id,number:this.dialogPurchaseForm.number,supplier_id:this.dialogPurchaseForm.supplier_id,purchase_price:this.dialogPurchaseForm.purchase_price,money:"".concat(this.dialogPurchaseForm.number*this.dialogPurchaseForm.purchase_price),type:this.dialogPurchaseForm.type,settlement:this.dialogPurchaseForm.settlement}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.gettableData(),e.dialogPurchase=!1):e.open(t.data.msg,"error")}):this.axios.post("/erp.Purchase/purchase_product_stockup_supplier_update",{product_stock_id:this.dialogPurchaseForm.product_stock_id,product_sku_id:this.dialogPurchaseForm.product_sku_id,number:this.dialogPurchaseForm.number,supplier_id:this.dialogPurchaseForm.supplier_id,purchase_price:this.dialogPurchaseForm.purchase_price,money:"".concat(this.dialogPurchaseForm.number*this.dialogPurchaseForm.purchase_price),type:this.dialogPurchaseForm.type,settlement:this.dialogPurchaseForm.settlement,id:this.dialogPurchaseForm.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.gettableData(),e.dialogPurchase=!1):e.open(t.data.msg,"error")})},deteles:function(e){var t=this;this.axios.post("/erp.Purchase/purchase_product_stockup_supplier_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData()):t.open(e.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettableData()},watch:{$route:function(e){this.gettableData()}}},Hr=Lr,Br=(i("e9d0"),Object(d["a"])(Hr,Er,Rr,!1,null,"51b482b5",null)),Wr=Br.exports,Vr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_head"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px"},model:{value:e.seash,callback:function(t){e.seash=t},expression:"seash"}}),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary"}},[e._v("搜索")])],1),a("div",{staticClass:"box_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"订单编号",prop:"customer_order_id"}}),a("el-table-column",{attrs:{label:"产品图片",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"90px"},attrs:{src:e.row.src,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"产品",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.class_name)+e._s(t.row.sku_name))]),a("br"),a("p",{staticStyle:{"text-align":"center"}},[e._v(e._s(t.row.number)+e._s(t.row.unit))])]}}])}),a("el-table-column",{attrs:{label:"金额",prop:"money"}}),a("el-table-column",{attrs:{label:"供应商",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"供应商费用",prop:"supplier_money"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"提交人",prop:"after_sales_user_name"}}),a("el-table-column",{attrs:{label:"业务员",prop:"order_user_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[2!=t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.sh(t.row)}}},[e._v("处理")]):e._e()]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"售后详情",visible:e.dialogSH},on:{"update:visible":function(t){e.dialogSH=t}}},[a("h4",[e._v("确认售后金额（是扣钱还是增加金额）")]),a("img",{staticStyle:{width:"100px",float:"right","margin-right":"40px"},attrs:{src:e.dialogSHForm.src}}),a("h4",{staticStyle:{width:"500px","margin-top":"10px"}},[e._v("供应商名称："+e._s(e.dialogSHForm.supplier_name))]),a("h4",{staticStyle:{width:"500px","margin-top":"10px"}},[e._v("供应商地址："+e._s(e.dialogSHForm.address))]),a("h4",{staticStyle:{width:"500px","margin-top":"10px"}},[e._v("产品名称："+e._s(e.dialogSHForm.name)+"  产品数量："+e._s(e.dialogSHForm.number)+" ")]),a("h4",{staticStyle:{width:"500px","margin-top":"10px"}},[e._v("金额："+e._s(e.dialogSHForm.money))]),a("h4",{staticStyle:{width:"500px","margin-top":"10px"}},[e._v("备注："+e._s(e.dialogSHForm.remarks))]),a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{model:e.dialogSHForm}},[a("el-form-item",{attrs:{label:"金额"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"请输入金额"},model:{value:e.dialogSHForm.supplier_money,callback:function(t){e.$set(e.dialogSHForm,"supplier_money",t)},expression:"dialogSHForm.supplier_money"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSH=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addSH}},[e._v("确 定")])],1)],1)],1)},Gr=[],Qr={data:function(){return{tableData:[],page:"1",currentPage:"",total:"",per_page:"",last_page:"",dialogSH:!1,dialogSHForm:{supplier_name:"",supplier_money:"",id:"",address:"",src:"",name:"",number:"",money:"",remarks:""}}},methods:{gettableData:function(){var e=this;this.axios.get("/erp.Purchase/purchase_order_after_sales_lists").then(function(t){e.tableData=t.data.after_sales.data,e.currentPage=t.data.after_sales.current_page,e.total=t.data.after_sales.total,e.per_page=t.data.after_sales.per_page,e.last_page=t.data.after_sales.last_page})},handleCurrentChange:function(e){var t=this;this.page=e;var a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.Purchase/purchase_order_after_sales_lists",{page:e}).then(function(e){t.tableData=e.data.after_sales.data,t.currentPage=e.data.after_sales.current_page,a.close()})},sh:function(e){this.dialogSH=!0,this.dialogSHForm.supplier_money=e.supplier_money,this.dialogSHForm.supplier_name=e.supplier_name,this.dialogSHForm.id=e.id,this.dialogSHForm.address="".concat(e.province).concat(e.city).concat(e.county),this.dialogSHForm.src=e.src,this.dialogSHForm.name="".concat(e.name).concat(e.class_name).concat(e.sku_name),this.dialogSHForm.money=e.money,this.dialogSHForm.number=e.number,this.dialogSHForm.remarks=e.remarks},addSH:function(){var e=this;this.axios.post("/erp.Purchase/purchase_order_after_sales_update",{id:this.dialogSHForm.id,supplier_money:this.dialogSHForm.supplier_money}).then(function(t){2e3==t.data.code?(e.handleCurrentChange(e.page),e.dialogSH=!1,e.open(t.data.msg,"success")):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettableData()},watch:{$route:function(e){this.gettableData()}}},Kr=Qr,Jr=(i("9ac0"),Object(d["a"])(Kr,Vr,Gr,!1,null,"83f94dd2",null)),Zr=Jr.exports,Yr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box_man"},[a("h3",[a("span",{staticStyle:{"margin-left":"10px"}},[e._v("销售员：")]),a("span",[e._v(e._s(e.user))]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("备注：")]),a("span",[e._v(e._s(e.remarks))]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("金额：")]),a("span",[e._v(e._s(e.fee))])])]),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"订单编号",prop:"customer_order_id"}}),a("el-table-column",{attrs:{label:"产品",width:"280px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{label:"产品数量",prop:"number"}}),a("el-table-column",{attrs:{label:"采购价",prop:"purchase_price"}}),a("el-table-column",{attrs:{label:"供应商",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"收货人",prop:"address_name"}}),a("el-table-column",{attrs:{label:"收货地址",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.address_province)+e._s(t.row.address_city)+e._s(t.row.address_county)+e._s(t.row.address_address))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.chuli(t.row)}}},[e._v("售后处理")])]}}])})],1)],1)},Xr=[],es={data:function(){return{user:"",remarks:"",fee:"",tableData:[]}},methods:{gettableData:function(){var e=this;this.axios.get("/erp.Purchase/purchase_order_after_sales_find?id="+this.$route.params.id).then(function(t){e.user=t.data.user.name,e.remarks=t.data.remarks,e.fee=t.data.fee,e.tableData=t.data.product_sku})}},created:function(){this.gettableData()},watch:{$route:function(e){this.$route.params.id&&this.gettableData()}}},ts=es,as=Object(d["a"])(ts,Yr,Xr,!1,null,null,null),is=as.exports,rs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"}},[e._v("确认")])],1),a("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"寄送客户数",prop:"customer_count"}}),a("el-table-column",{attrs:{label:"寄送样品数",prop:"product_sku_count"}}),a("el-table-column",{attrs:{label:"寄出日期",prop:"add_time",width:"160"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"业务员",prop:"user_name"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("草稿")]):e._e(),1==t.row.status?a("span",[e._v("等待采购配货")]):e._e(),10==t.row.status?a("span",[e._v("等待财务审核")]):e._e(),20==t.row.status?a("span",[e._v("等待财务审核")]):e._e(),30==t.row.status?a("span",[e._v("等待发货")]):e._e(),40==t.row.status?a("span",[e._v("已经发货")]):e._e(),50==t.row.status?a("span",[e._v("已经收到货")]):e._e(),90==t.row.status?a("span",[e._v("结束")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updata(t.row)}}},[e._v(e._s(t.row.status>10?"查看":"修改"))])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},ss=[],os={data:function(){return{seach:"",tableData:[],currentPage:0,total:0,per_page:0,last_page:0}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{gettableData:function(){var e=this;this.axios.get("/erp.Purchase/purchase_sample_lists").then(function(t){e.tableData=t.data.sample.data,e.currentPage=t.data.sample.current_page,e.total=t.data.sample.total,e.per_page=t.data.sample.per_page,e.last_page=t.data.sample.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.Purchase/purchase_sample_lists",{page:e,company_id:this.value,user_name:this.value1,customer_name:this.value2}).then(function(e){t.tableData=e.data.sample.data,t.currentPage=e.data.sample.current_page,t.total=e.data.sample.total,t.per_page=e.data.sample.per_page,t.last_page=e.data.sample.last_page,a.close()})},updata:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/erp/Purchase/sample_modification/".concat(e.id),params:{userId:e.id,name:"/erp/Purchase/sample_modification/".concat(e.id)}});var t={route:"/erp/Purchase/sample_modification/".concat(e.id),name:"样品采购修改"},a="/erp/Purchase/sample_modification/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){this.gettableData()}},ls=os,ns=Object(d["a"])(ls,rs,ss,!1,null,null,null),cs=ns.exports,ds=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"beizhu",staticStyle:{overflow:"hidden","margin-top":"20px"}},[a("span",{staticStyle:{float:"left","line-height":"40px","margin-right":"10px","font-weight":"bold"}},[e._v("备注:"+e._s(e.remarks))])]),a("div",{staticClass:"content_box_product"},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{label:"单位",prop:"unit"}}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"成本",prop:"cost_price"}}),a("el-table-column",{attrs:{label:"付款",prop:"payment"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.payment?a("span",[e._v("不用付款")]):e._e(),1==t.row.payment?a("span",[e._v("付款")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"供应商"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.supplier_name,placement:"top"}},[a("el-button",{attrs:{type:"text"}},[e._v("查看")])],1)]}}])}),a("el-table-column",{attrs:{label:"付款账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.receiving_name+":"+t.row.receiving_account,placement:"top"}},[a("el-button",{attrs:{type:"text"}},[e._v("查看")])],1)]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.remarks,placement:"top"}},[a("el-button",{attrs:{type:"text"}},[e._v("查看")])],1)]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("默认")]):e._e(),3==t.row.status?a("span",[e._v("等待付款")]):e._e(),6==t.row.status?a("span",[e._v("付款完成")]):e._e(),9==t.row.status?a("span",[e._v("完成")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.status<=10,expression:"status <= 10"}],attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.Editors(t.row)}}},[e._v("编辑")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.dialogEdit,width:"50%"},on:{"update:visible":function(t){e.dialogEdit=t}}},[a("el-form",{attrs:{model:e.dialogEditForm}},[a("el-form-item",{attrs:{label:"成本","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.dialogEditForm.cost_price,callback:function(t){e.$set(e.dialogEditForm,"cost_price",t)},expression:"dialogEditForm.cost_price"}})],1),a("el-form-item",{attrs:{label:"付款","label-width":"90px"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.dialogEditForm.payment,callback:function(t){e.$set(e.dialogEditForm,"payment",t)},expression:"dialogEditForm.payment"}},[e._v("不用付款")]),a("el-radio",{attrs:{label:"1"},model:{value:e.dialogEditForm.payment,callback:function(t){e.$set(e.dialogEditForm,"payment",t)},expression:"dialogEditForm.payment"}},[e._v("付款")])],1),a("el-form-item",{attrs:{label:"供应商","label-width":"90px"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.HQsupplierPayee},model:{value:e.dialogEditForm.supplier_id,callback:function(t){e.$set(e.dialogEditForm,"supplier_id",t)},expression:"dialogEditForm.supplier_id"}},e._l(e.supplier,function(e){return a("el-option",{key:e.supplier_id,attrs:{label:e.supplier_name,value:e.supplier_id}})}),1)],1),a("el-form-item",{attrs:{label:"付款账号","label-width":"90px"}},[a("el-select",{attrs:{disabled:0==e.dialogEditForm.payment,placeholder:"请选择"},model:{value:e.dialogEditForm.supplier_payee_id,callback:function(t){e.$set(e.dialogEditForm,"supplier_payee_id",t)},expression:"dialogEditForm.supplier_payee_id"}},e._l(e.supplierPayee,function(e){return a("el-option",{key:e.id,attrs:{label:e.receiving_name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"备注","label-width":"90px"}},[a("el-input",{model:{value:e.dialogEditForm.remarks,callback:function(t){e.$set(e.dialogEditForm,"remarks",t)},expression:"dialogEditForm.remarks"}})],1),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{on:{click:e.tijiao}},[e._v("提交")])],1)],1)],1),a("div",{staticClass:"generatedAddress"},[a("label",[e._v("地址配货信息")]),a("hr"),e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v("付款方式:"+e._s(1==t.payment?"到付":"现付"))]),1==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上门")]):e._e(),2==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上楼")]):e._e(),3==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:自提")]):e._e()]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n              "),e._l(t.product,function(t){return a("span",{key:t.pid,staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2)])])})],2),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.status<=10,expression:"status <= 10"}],staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确认提交")])],1)},us=[],ps={data:function(){return{remarks:"",tableData:[],dialogEdit:!1,dialogEditForm:{id:"",cost_price:"",payment:"",supplier_id:"",supplier_payee_id:"",remarks:""},fixedAddress:[],supplier:[],supplierPayee:[],status:0}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{Editors:function(e){this.dialogEdit=!0,this.dialogEditForm.id=e.id,this.dialogEditForm.payment=String(e.payment),this.dialogEditForm.cost_price=e.cost_price,this.dialogEditForm.supplier_id=e.supplier_id,this.dialogEditForm.supplier_payee_id=e.supplier_payee_id,this.dialogEditForm.remarks=e.remarks,this.supplier=e.supplier,this.HQsupplierPayee(e.supplier_id)},HQsupplierPayee:function(e){var t=this;this.supplier.filter(function(a){a.supplier_id==e&&(t.supplierPayee=a.supplier_payee)})},tijiao:function(){var e=this;this.axios.post("/erp.Purchase/purchase_sample_product_sku_update",{id:this.dialogEditForm.id,payment:this.dialogEditForm.payment,cost_price:this.dialogEditForm.cost_price,supplier_id:this.dialogEditForm.supplier_id,supplier_payee_id:this.dialogEditForm.supplier_payee_id,remarks:this.dialogEditForm.remarks}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.dialogEdit=!1,e.getcaogao()):e.open(t.data.msg,"error")})},confirm:function(){var e=this;this.axios.post("/erp.Purchase/purchase_sample_update",{id:this.$route.params.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/erp/Purchase/purchase_sample_lists"})):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})},getcaogao:function(){var e=this;this.axios.get("/erp.Purchase/purchase_sample_find?id="+this.$route.params.id).then(function(t){e.remarks=t.data.sample.remarks,e.tableData=t.data.product_sku,e.fixedAddress=t.data.customer,e.status=t.data.sample.status})}}),created:function(){this.$route.params.id&&this.getcaogao()},watch:{$route:function(e){this.$route.params.id&&this.getcaogao()}}},ms=ps,hs=(i("631b"),Object(d["a"])(ms,ds,us,!1,null,"0950af59",null)),fs=hs.exports,_s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_head"},[a("label",[e._v("筛选：")]),a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2),a("el-input",{staticStyle:{width:"217px","margin-left":"20px"},attrs:{clearable:"",placeholder:"请输入业务员"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),a("el-input",{staticStyle:{width:"217px","margin-left":"20px"},attrs:{clearable:"",placeholder:"请输入客户"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seach}},[e._v("搜索")])],1),a("div",{staticClass:"box_content"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"业务员",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.dep_title)+"  "+e._s(t.row.user_name))])]}}])}),a("el-table-column",{attrs:{label:"客户姓名",prop:"customer_name"}}),a("el-table-column",{attrs:{label:"收货人姓名",prop:"address_name"}}),a("el-table-column",{attrs:{label:"供应商名称",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"发货方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.payment?"物流现付":"物流到付"))])]}}])}),a("el-table-column",{attrs:{label:"是否送货"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.state[t.row.delivery]))])]}}])}),a("el-table-column",{attrs:{label:"收货日期",prop:"delivery_time"}}),a("el-table-column",{attrs:{label:"运费",prop:"freight_price"}}),a("el-table-column",{attrs:{label:"货物状态",prop:""},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",{staticStyle:{color:"red"}},[e._v("等待发货")]):e._e(),3==t.row.status?a("span",{staticStyle:{color:"blue"}},[e._v("已经发货")]):e._e(),6==t.row.status?a("span",[e._v("发货完成")]):e._e(),9==t.row.status?a("span",[e._v("售后")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",width:"145"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return e.Track(t.row)}}},[e._v("跟踪")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.deliver(t.row)}}},[e._v("发货")])]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)])},gs=[],bs={data:function(){return{value:"",value1:"",value2:"",options:[],tableData:[],currentPage:0,total:0,per_page:0,last_page:0,state:["","上门","上楼","自提"]}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{gettableData:function(){var e=this;this.axios.get("/erp.Delivery/delivery_order_list").then(function(t){e.options=t.data.company,e.tableData=t.data.purchase_product.data,e.currentPage=t.data.purchase_product.current_page,e.total=t.data.purchase_product.total,e.per_page=t.data.purchase_product.per_page,e.last_page=t.data.purchase_product.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.Delivery/delivery_order_list",{page:e,company_id:this.value,user_name:this.value1,customer_name:this.value2}).then(function(e){t.tableData=e.data.purchase_product.data,t.currentPage=e.data.purchase_product.current_page,t.total=e.data.purchase_product.total,t.per_page=e.data.purchase_product.per_page,t.last_page=e.data.purchase_product.last_page,a.close()})},seach:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/erp.Delivery/delivery_order_list",{company_id:this.value,user_name:this.value1,customer_name:this.value2}).then(function(a){e.tableData=a.data.purchase_product.data,e.currentPage=a.data.purchase_product.current_page,e.total=a.data.purchase_product.total,e.per_page=a.data.purchase_product.per_page,e.last_page=a.data.purchase_product.last_page,t.close()})},Track:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/erp/Delivery/Track/".concat(e.supplier_id,"/").concat(e.customer_order_id,"/").concat(e.customer_order_purchase_id),params:{name:"/erp/Delivery/Track/".concat(e.supplier_id,"/").concat(e.customer_order_id,"/").concat(e.customer_order_purchase_id),supplier_id:e.supplier_id,customer_order_id:e.customer_order_id,customer_order_purchase_id:e.customer_order_purchase_id}});var t={route:"/erp/Delivery/Track/".concat(e.supplier_id,"/").concat(e.customer_order_id,"/").concat(e.customer_order_purchase_id),name:"订单跟踪",id:e.id},a="/erp/Delivery/Track/".concat(e.supplier_id,"/").concat(e.customer_order_id,"/").concat(e.customer_order_purchase_id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},deliver:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/erp/Delivery/deliver/".concat(e.supplier_id,"/").concat(e.customer_order_id,"/").concat(e.customer_order_purchase_id),params:{userId:e.id,name:"/erp/Delivery/deliver/".concat(e.supplier_id,"/").concat(e.customer_order_id,"/").concat(e.customer_order_purchase_id),supplier_id:e.supplier_id,customer_order_id:e.customer_order_id,customer_order_purchase_id:e.customer_order_purchase_id}});var t={route:"/erp/Delivery/deliver/".concat(e.supplier_id,"/").concat(e.customer_order_id,"/").concat(e.customer_order_purchase_id),name:"发货"},a="/erp/Delivery/deliver/".concat(e.supplier_id,"/").concat(e.customer_order_id,"/").concat(e.customer_order_purchase_id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){this.gettableData()},watch:{$route:function(e){this.gettableData()}}},vs=bs,ys=(i("bedc"),Object(d["a"])(vs,_s,gs,!1,null,"5d042b70",null)),xs=ys.exports,ks=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box_man"},[a("el-table",{attrs:{data:e.shuju}},[a("el-table-column",{attrs:{label:"产品",prop:"name"}}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"收货人",prop:"address_name"}}),a("el-table-column",{attrs:{label:"收货人号码",prop:"address_phone"}}),a("el-table-column",{attrs:{label:"收货地址",width:"450px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.address_province)+e._s(t.row.address_city)+e._s(t.row.address_county)+e._s(t.row.address_address))])]}}])})],1)],1),a("div",{staticClass:"content_box_wuliu"},[a("el-button",{attrs:{type:"primary"},on:{click:e.openWuliu}},[e._v("添加物流信息")]),a("el-table",{attrs:{data:e.tableDataWuliu}},[a("el-table-column",{attrs:{label:"物流公司",prop:"express_name"}}),a("el-table-column",{attrs:{label:"快递单号",prop:"express_numbers"}}),a("el-table-column",{attrs:{label:"快递联系方式",prop:"express_phone"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.Feiyong(t.row)}}},[e._v("费用")]),a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.deletes(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("div",{staticClass:"content_box_feiyong"},[a("label",[e._v("费用")]),a("el-table",{attrs:{data:e.tableDataFeiyong}},[a("el-table-column",{attrs:{label:"物流公司",prop:"express_name"}}),a("el-table-column",{attrs:{label:"费用",prop:"prepayment"}}),a("el-table-column",{attrs:{label:"付款方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.status1[t.row.payment_method]))])]}}])}),a("el-table-column",{attrs:{label:"付款账户",prop:"payment_account"}}),a("el-table-column",{attrs:{label:"结算方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.status2[t.row.type]))])]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.status3[t.row.status]))])]}}])}),a("el-table-column",{attrs:{label:"修改"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.editFeiyong(t.row)}}},[e._v("修改")]):a("el-button",{attrs:{type:"warning",size:"small",disabled:""},on:{click:function(a){return e.editFeiyong(t.row)}}},[e._v("修改")]),0==t.row.status?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deletesFeiyong(t.row)}}},[e._v("删除")]):a("el-button",{attrs:{type:"danger",size:"small",disabled:""},on:{click:function(a){return e.deletesFeiyong(t.row)}}},[e._v("删除")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"物流",visible:e.dialogWuliu},on:{"update:visible":function(t){e.dialogWuliu=t}}},[a("el-form",{ref:"dialogWuliuForm",attrs:{model:e.dialogWuliuForm}},[a("el-form-item",{attrs:{label:"物流公司","label-width":"100px",prop:"value"}},[a("el-select",{staticStyle:{width:"317px"},attrs:{clearable:"",placeholder:"请选择"},model:{value:e.dialogWuliuForm.value,callback:function(t){e.$set(e.dialogWuliuForm,"value",t)},expression:"dialogWuliuForm.value"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"快递编号","label-width":"100px",prop:"CourierNumber"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.dialogWuliuForm.CourierNumber,callback:function(t){e.$set(e.dialogWuliuForm,"CourierNumber",t)},expression:"dialogWuliuForm.CourierNumber"}})],1),a("el-form-item",{attrs:{label:"快递联系方式","label-width":"100px",prop:"CourierNumber"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.dialogWuliuForm.phone,callback:function(t){e.$set(e.dialogWuliuForm,"phone",t)},expression:"dialogWuliuForm.phone"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"100px",prop:"remark"}},[a("el-input",{staticStyle:{width:"317px"},attrs:{type:"textarea"},model:{value:e.dialogWuliuForm.remark,callback:function(t){e.$set(e.dialogWuliuForm,"remark",t)},expression:"dialogWuliuForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogWuliu=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addWuliu}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"费用",visible:e.dialogFeiyong},on:{"update:visible":function(t){e.dialogFeiyong=t}}},[a("el-form",{attrs:{model:e.dialogFeiyongForm}},[a("el-form-item",{attrs:{label:"付款方式","label-width":"90px"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.dialogFeiyongForm.payment,callback:function(t){e.$set(e.dialogFeiyongForm,"payment",t)},expression:"dialogFeiyongForm.payment"}},[e._v("无")]),a("el-radio",{attrs:{label:"1"},model:{value:e.dialogFeiyongForm.payment,callback:function(t){e.$set(e.dialogFeiyongForm,"payment",t)},expression:"dialogFeiyongForm.payment"}},[e._v("微信")]),a("el-radio",{attrs:{label:"2"},model:{value:e.dialogFeiyongForm.payment,callback:function(t){e.$set(e.dialogFeiyongForm,"payment",t)},expression:"dialogFeiyongForm.payment"}},[e._v("支付宝")]),a("el-radio",{attrs:{label:"3"},model:{value:e.dialogFeiyongForm.payment,callback:function(t){e.$set(e.dialogFeiyongForm,"payment",t)},expression:"dialogFeiyongForm.payment"}},[e._v("银行卡")])],1),a("el-form-item",{attrs:{label:"付款账号","label-width":"90px"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.dialogFeiyongForm.payment_account,callback:function(t){e.$set(e.dialogFeiyongForm,"payment_account",t)},expression:"dialogFeiyongForm.payment_account"}})],1),a("el-form-item",{attrs:{label:"类型","label-width":"90px"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.dialogFeiyongForm.type,callback:function(t){e.$set(e.dialogFeiyongForm,"type",t)},expression:"dialogFeiyongForm.type"}},[e._v("自费")]),a("el-radio",{attrs:{label:"1"},model:{value:e.dialogFeiyongForm.type,callback:function(t){e.$set(e.dialogFeiyongForm,"type",t)},expression:"dialogFeiyongForm.type"}},[e._v("整体结算")]),a("el-radio",{attrs:{label:"2"},model:{value:e.dialogFeiyongForm.type,callback:function(t){e.$set(e.dialogFeiyongForm,"type",t)},expression:"dialogFeiyongForm.type"}},[e._v("月结算")])],1),a("el-form-item",{attrs:{label:"费用","label-width":"90px"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.dialogFeiyongForm.money,callback:function(t){e.$set(e.dialogFeiyongForm,"money",t)},expression:"dialogFeiyongForm.money"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":"90px"}},[a("el-input",{staticStyle:{width:"317px"},attrs:{type:"textarea"},model:{value:e.dialogFeiyongForm.remark,callback:function(t){e.$set(e.dialogFeiyongForm,"remark",t)},expression:"dialogFeiyongForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFeiyong=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addFeiyong}},[e._v("确 定")])],1)],1)],1)},ws=[],Ss={data:function(){return{shuju:"",tableData:[],feiyongform:{value:""},options:[],dialogWuliu:!1,dialogWuliuForm:{value:"",CourierNumber:"",number:"",phone:"",id:"",remark:""},dialogFeiyong:!1,dialogFeiyongForm:{money:"",remark:"",payment:"",payment_account:"",type:"",express_id:"",customer_order_id:"",id:""},tableDataWuliu:[],tableDataFeiyong:[],status1:["无","微信","支付宝","银行卡"],status2:["自费","整体结算","月结"],status3:["等待财务审核","等待出纳审核","审核通过"]}},methods:{getshuju:function(){var e=this;this.axios.get("/erp.Delivery/delivery_order_find?supplier_id="+this.$route.params.supplier_id+"&customer_order_id="+this.$route.params.customer_order_id+"&customer_order_purchase_id="+this.$route.params.customer_order_purchase_id).then(function(t){e.shuju=t.data.purchase_product,e.options=t.data.express,e.tableDataWuliu=t.data.order_express,e.tableDataFeiyong=t.data.order_express_cost})},openWuliu:function(){for(var e="",t=0;t<this.shuju.length;t++)e+="".concat(this.shuju[t].sku_name).concat(this.shuju[t].name,":\n");this.dialogWuliu=!0,this.dialogWuliuForm.value="",this.dialogWuliuForm.CourierNumber="",this.dialogWuliuForm.phone="",this.dialogWuliuForm.id="",this.dialogWuliuForm.remark=e},addWuliu:function(){var e=this;""==this.dialogWuliuForm.id?this.axios.post("/erp.Delivery/delivery_order_express_add",{customer_order_id:this.$route.params.customer_order_id,supplier_id:this.$route.params.supplier_id,customer_order_purchase_id:this.$route.params.customer_order_purchase_id,express_id:this.dialogWuliuForm.value,express_numbers:this.dialogWuliuForm.CourierNumber,express_phone:this.dialogWuliuForm.phone,remarks:this.dialogWuliuForm.remark}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.$refs["dialogWuliuForm"].resetFields(),e.getshuju(),e.dialogWuliu=!1):e.open(t.data.msg,"error")}).catch(function(t){e.open("请联系管理员","error")}):this.axios.post("/erp.Delivery/delivery_order_express_update",{customer_order_id:this.$route.params.customer_order_id,supplier_id:this.$route.params.supplier_id,customer_order_purchase_id:this.$route.params.customer_order_purchase_id,express_id:this.dialogWuliuForm.value,express_numbers:this.dialogWuliuForm.CourierNumber,express_phone:this.dialogWuliuForm.phone,remarks:this.dialogWuliuForm.remark,id:this.dialogWuliuForm.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.$refs["dialogWuliuForm"].resetFields(),e.getshuju(),e.dialogWuliu=!1):e.open(t.data.msg,"error")})},Feiyong:function(e){this.dialogFeiyong=!0,this.dialogFeiyongForm.money="",this.dialogFeiyongForm.remark="",this.dialogFeiyongForm.payment="",this.dialogFeiyongForm.payment_account="",this.dialogFeiyongForm.id="",this.dialogFeiyongForm.type="",this.dialogFeiyongForm.express_id=e.id,this.dialogFeiyongForm.customer_order_id=e.customer_order_id},edit:function(e){this.dialogWuliuForm.value=e.express_id,this.dialogWuliuForm.CourierNumber=e.express_numbers,this.dialogWuliuForm.phone=e.express_phone,this.dialogWuliuForm.id=e.id,this.dialogWuliuForm.remark=e.remarks,this.dialogWuliu=!0},deletes:function(e){var t=this;this.axios.post("/erp.Delivery/delivery_order_express_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getshuju()):t.open(e.data.msg,"error")})},addFeiyong:function(){var e=this;""==this.dialogFeiyongForm.id?this.axios.post("/erp.Delivery/delivery_order_express_cost_add",{customer_order_id:this.dialogFeiyongForm.customer_order_id,customer_order_express_id:this.dialogFeiyongForm.express_id,payment_method:this.dialogFeiyongForm.payment,payment_account:this.dialogFeiyongForm.payment_account,type:this.dialogFeiyongForm.type,prepayment:this.dialogFeiyongForm.money,remarks:this.dialogFeiyongForm.remark}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getshuju(),e.dialogFeiyong=!1):e.open(t.data.msg,"error")}):this.axios.post("/erp.Delivery/delivery_order_express_cost_update",{id:this.dialogFeiyongForm.id,payment_method:this.dialogFeiyongForm.payment,payment_account:this.dialogFeiyongForm.payment_account,type:this.dialogFeiyongForm.type,prepayment:this.dialogFeiyongForm.money,remarks:this.dialogFeiyongForm.remark}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.getshuju(),e.dialogFeiyong=!1):e.open(t.data.msg,"error")})},editFeiyong:function(e){this.dialogFeiyong=!0,this.dialogFeiyongForm.money=e.prepayment,this.dialogFeiyongForm.remark=e.remarks,this.dialogFeiyongForm.payment=String(e.payment_method),this.dialogFeiyongForm.payment_account=e.payment_account,this.dialogFeiyongForm.id=e.id,this.dialogFeiyongForm.type=String(e.type),this.dialogFeiyongForm.express_id="",this.dialogFeiyongForm.customer_order_id=""},deletesFeiyong:function(e){var t=this;this.axios.post("/erp.Delivery/delivery_order_express_cost_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getshuju()):t.open(e.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.getshuju()},watch:{$route:function(e){this.$route.params.supplier_id&&this.getshuju()}}},As=Ss,Cs=(i("3aef"),Object(d["a"])(As,ks,ws,!1,null,"79c248d2",null)),Fs=Cs.exports,Ps=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("el-table",{attrs:{data:e.expressinformation}},[a("el-table-column",{attrs:{label:"产品",prop:"name"}}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"收货人",prop:"address_name"}}),a("el-table-column",{attrs:{label:"收货人号码",prop:"address_phone"}}),a("el-table-column",{attrs:{label:"收货地址",width:"450px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.address_province)+e._s(t.row.address_city)+e._s(t.row.address_county)+e._s(t.row.address_address))])]}}])})],1)],1),0!==e.tableData.length?[a("div",{staticClass:"content_box"},e._l(e.tableData,function(t){return a("div",{key:t.id,staticClass:"inner"},[a("span",[e._v("物流信息")]),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return e.add(t.id,t.customer_order_id)}}},[e._v("追加记录")]),a("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return e.synchro(t.id,t.customer_order_id,t.express_name,t.express_numbers)}}},[e._v("同步记录")]),a("h3",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v("物流支付方式：少时诵诗书")]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("快递公司："+e._s(t.express_name))]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("快递编号："+e._s(t.express_numbers))]),a("span",{staticStyle:{"margin-left":"40px"}},[e._v("快递电话："+e._s(t.express_phone))])]),a("br"),null!==t.express_tracking?[a("el-timeline",{attrs:{reverse:"false"}},e._l(t.express_tracking,function(t,i){return a("el-timeline-item",{key:i,attrs:{timestamp:t.tracking_time}},[e._v("\n                      "+e._s(t.tracking_txt)+"   "+e._s(t.user_name)+"\n                      ")])}),1)]:e._e()],2)}),0)]:[a("h3",{staticStyle:{"text-align":"center",color:"rgb(122,122,122)","margin-top":"40px"}},[e._v("暂无物流信息")])],a("el-dialog",{attrs:{title:"物流信息追加记录",visible:e.dialogzhuijia},on:{"update:visible":function(t){e.dialogzhuijia=t}}},[a("div",{staticClass:"append_box"},[a("LogisticsInformation",{attrs:{expressid:e.expressid,orderid:e.orderid},on:{chuan:e.getchildmsg}})],1)])],2)},Ds=[],$s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"LogisticsInformation"},[a("el-form",{ref:"appendForm",attrs:{model:e.appendForm}},[a("el-form-item",{attrs:{label:"跟踪信息","label-width":"90px",prop:"info"}},[a("el-input",{staticStyle:{width:"317px"},attrs:{type:"textarea"},model:{value:e.appendForm.info,callback:function(t){e.$set(e.appendForm,"info",t)},expression:"appendForm.info"}})],1),a("el-form-item",{attrs:{label:"是否到货","label-width":"90px",prop:"arrival"}},[a("el-radio",{attrs:{label:"0"},model:{value:e.appendForm.arrival,callback:function(t){e.$set(e.appendForm,"arrival",t)},expression:"appendForm.arrival"}},[e._v("未到货")]),a("el-radio",{attrs:{label:"1"},model:{value:e.appendForm.arrival,callback:function(t){e.$set(e.appendForm,"arrival",t)},expression:"appendForm.arrival"}},[e._v("已到货处理")])],1),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add(e.expressid,e.orderid)}}},[e._v("提 交")])],1)],1)},Is=[],qs={name:"LogisticsInformation",data:function(){return{appendForm:{type:"",info:"",arrival:""}}},props:["expressid","orderid"],methods:{add:function(e,t){var a=this;this.axios.post("/erp.Delivery/delivery_order_express_tracking_add",{customer_order_id:t,customer_order_express_id:e,tracking_txt:this.appendForm.info,status:this.appendForm.arrival}).then(function(e){2e3==e.data.code?(a.$refs["appendForm"].resetFields(),a.$emit("chuan","1"),a.open(e.data.msg,"success")):a.open(e.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}}},Os=qs,Ns=Object(d["a"])(Os,$s,Is,!1,null,null,null),zs=Ns.exports,Ts={data:function(){return{expressinformation:[],tableData:[],expressid:"",orderid:"",dialogzhuijia:!1}},components:{LogisticsInformation:zs},methods:{add:function(e,t){this.expressid=e,this.orderid=t,this.dialogzhuijia=!0},gettableData:function(){var e=this;this.axios.get("/erp.Delivery/delivery_order_express_find?supplier_id="+this.$route.params.supplier_id+"&customer_order_id="+this.$route.params.customer_order_id+"&customer_order_purchase_id="+this.$route.params.customer_order_purchase_id).then(function(t){e.expressinformation=t.data.purchase_product,e.tableData=t.data.express})},synchro:function(e,t,a,i){var r=this;this.axios.post("/erp.Delivery/delivery_order_express_synchronization",{customer_order_id:t,customer_order_express_id:e,name:a,number:i}).then(function(e){2e3==e.data.code?(r.gettableData(),r.open(e.data.msg,"success")):r.open(e.data.msg,"error")})},getchildmsg:function(e){1==e&&(this.dialogzhuijia=!1,this.gettableData())},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettableData()},watch:{$route:function(e){this.$route.params.supplier_id&&this.gettableData()}}},js=Ts,Us=(i("7504"),Object(d["a"])(js,Ps,Ds,!1,null,"ff61aa1c",null)),Ms=Us.exports,Es=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"box_head"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px"},attrs:{placeholder:"业务员"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),a("el-input",{staticStyle:{width:"217px","margin-left":"20px"},attrs:{placeholder:"客户"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}}),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{type:"daterange",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.seach}},[e._v("搜索")])],1),a("div",{staticClass:"box_content"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"订单编号"}}),a("el-table-column",{attrs:{prop:"user_name",label:"业务员"}}),a("el-table-column",{attrs:{prop:"customer_name",label:"客户姓名"}}),a("el-table-column",{attrs:{prop:"sales_time",label:"销售日期"}}),a("el-table-column",{attrs:{prop:"total_price",label:"销售金额"}}),a("el-table-column",{attrs:{prop:"invoice_type",label:"预计利润"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("keepTowNum")(Number(t.row.total_price)-Number(t.row.total_cost_price)-Number(t.row.user_price)-Number(t.row.logistics_price))))])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[10==t.row.status?a("span",[e._v("审核通过")]):e._e(),1==t.row.status?a("span",[e._v(" 审核中")]):e._e(),9==t.row.status?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.status_txt,placement:"top-start"}},[a("span",{staticStyle:{color:"#409EFF"}},[e._v("审核拒绝")])]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"status",label:"发票"}}),a("el-table-column",{attrs:{prop:"status",label:"渠道"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.examine(t.row)}}},[e._v(e._s(1==t.row.status?"审核":"查看"))])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)])},Rs=[],Ls={filters:{keepTowNum:function(e){return e=Number(e),e.toFixed(2)}},data:function(){return{value:"",value1:"",value2:["",""],options:[{value:"",label:"全部"},{value:"人保财险",label:"人保财险"},{value:"人保寿险",label:"人保寿险"},{value:"中国人寿",label:"中国人寿"},{value:"中国太平",label:"中国太平"},{value:"新华保险",label:"新华保险"},{value:"阳光保险",label:"阳光保险"}],options1:[{value:"1",label:"湖南"},{value:"2",label:"广西"},{value:"3",label:"上海"}],options2:[{value:"1",label:"一级"},{value:"2",label:"二级"},{value:"3",label:"三级"}],tableData:[],currentPage:0,total:0,per_page:0,last_page:0}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{examine:function(e){console.log(e.status),this.triggerReplaceId(e.id),this.$router.push({path:"/Finance/auditDetails/".concat(e.id),params:{userId:e.id,name:"/Finance/auditDetails/".concat(e.id)}});var t={route:"/Finance/auditDetails/".concat(e.id),name:"订单审核详情",id:e.id},a="/Finance/auditDetails/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},getOrderList:function(){var e=this;this.axios.get("/Finance/finance_order_audit_list").then(function(t){e.tableData=t.data.order.data,e.currentPage=t.data.order.current_page,e.total=t.data.order.total,e.per_page=t.data.order.per_page,e.last_page=t.data.order.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_order_audit_list",{page:e,username:this.value,name:this.value1,start_time:this.value2[0],end_time:this.value2[1]}).then(function(e){t.tableData=e.data.order.data,t.currentPage=e.data.order.current_page,t.total=e.data.order.total,t.per_page=e.data.order.per_page,t.last_page=e.data.order.last_page,a.close()})},seach:function(){var e=this,t=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_order_audit_list",{username:this.value,name:this.value1,start_time:this.value2[0],end_time:this.value2[1]}).then(function(a){e.tableData=a.data.order.data,e.currentPage=a.data.order.current_page,e.total=a.data.order.total,e.per_page=a.data.order.per_page,e.last_page=a.data.order.last_page,t.close()})},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){this.getOrderList()},watch:{$route:function(e){this.getOrderList()}}},Hs=Ls,Bs=(i("d471"),Object(d["a"])(Hs,Es,Rs,!1,null,"9af36452",null)),Ws=Bs.exports,Vs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入公司关键词","remote-method":e.remoteMethod,loading:e.loading,disabled:""},on:{change:e.kehuName},model:{value:e.state4,callback:function(t){e.state4=t},expression:"state4"}},e._l(e.options,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{"margin-left":"10px"},attrs:{disabled:"",filterable:"",placeholder:"请选择客户名称"},model:{value:e.kehuValue,callback:function(t){e.kehuValue=t},expression:"kehuValue"}},e._l(e.listKuhuName,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("div",{staticClass:"riqi"},[a("div",{staticClass:"xiaohou"},[a("span",[e._v("销售日期")]),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{disabled:"",type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.starttime,callback:function(t){e.starttime=t},expression:"starttime"}})],1),a("div",{staticClass:"fahuo"},[a("span",[e._v("发货日期")]),a("el-date-picker",{staticStyle:{"margin-left":"20px"},attrs:{disabled:"",type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.endtime,callback:function(t){e.endtime=t},expression:"endtime"}})],1)]),a("div",{staticClass:"danxuan"},[a("div",{staticClass:"danxuan1",staticStyle:{float:"left"}},[a("el-radio",{attrs:{label:"1",disabled:""},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("商品")]),a("el-radio",{attrs:{label:"2",disabled:""},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("农产品")]),a("el-radio",{attrs:{label:"3",disabled:""},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("服务")])],1),a("div",{staticClass:"danxuan1",staticStyle:{"margin-left":"100px",float:"left"}},[a("el-radio",{attrs:{label:"1",disabled:""},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("传统")]),a("el-radio",{attrs:{label:"2",disabled:""},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("线上")]),a("el-radio",{attrs:{label:"3",disabled:""},model:{value:e.class_id,callback:function(t){e.class_id=t},expression:"class_id"}},[e._v("京东")])],1),a("div",{staticClass:"danxuan2",staticStyle:{"margin-top":"20px"}},[a("p",[e._v("备注："+e._s(e.remarks))]),a("h4",{staticStyle:{"margin-top":"10px"}},[e._v("发票信息:"),a("span",[e._v(e._s(e.invoice_name)+e._s(e.invoice_tax)+e._s(e.invoice_type)+"%")])])])]),a("div",{staticClass:"lirun"},[a("span",[e._v("总销售额:"+e._s(e.total_price))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("产品成本:"+e._s(e.total_cost_price))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("总提成:"+e._s(e.user_price))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("物流费用:"+e._s(e.logistics_price))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("额外费用:"+e._s(e.extra_price))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("利润:"+e._s(Number(e.total_price)-Number(e.total_cost_price)-Number(e.user_price)-Number(e.logistics_price)-Number(e.extra_price)))])])],1),a("div",{staticClass:"content_box_product"},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}}),a("el-table-column",{attrs:{prop:"number",label:"数量"}}),a("el-table-column",{attrs:{prop:"cost_price",label:"成本"}}),a("el-table-column",{attrs:{prop:"selling_price",label:"单价"}}),a("el-table-column",{attrs:{label:"总价",prop:"total_price"}}),a("el-table-column",{attrs:{label:"业务提成",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{placement:"right",width:"400",trigger:"click"}},[a("el-table",{attrs:{data:t.row.commission}},[a("el-table-column",{attrs:{property:"user_name",label:"业务员"}}),a("el-table-column",{attrs:{property:"ratio",label:"提成系数"}}),a("el-table-column",{attrs:{label:"总提成"},scopedSlots:e._u([{key:"default",fn:function(i){return[a("span",[e._v(" \n                        ￥"+e._s(e._f("toFixed")((t.row.selling_price*t.row.number-t.row.cost_price*t.row.number)*i.row.ratio,3))+" \n                        ")])]}}],null,!0)})],1),a("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("查看")])],1)]}}])}),a("el-table-column",{attrs:{prop:"user_price",label:"总提成"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("￥"+e._s(Number(t.row.total_price)-Number(t.row.total_cost_price)))])]}}])}),a("el-table-column",{attrs:{label:"预计利润"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Number(t.row.total_price)-Number(t.row.total_cost_price)-Number(t.row.user_price)))])]}}])}),a("el-table-column",{attrs:{prop:"remarks",label:"备注"}})],1)],1),a("div",{staticClass:"generatedAddress"},[a("label",[e._v("地址配货信息")]),a("hr"),e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v(e._s(t.type))])]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n              "),e._l(t.product,function(t){return a("span",{key:t.pid,staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2)])])})],2),a("div",{staticClass:"contract"},[a("label",[e._v("合同")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-zoom-in",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.big(t.src)}}})])])}),0)])]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),a("el-dialog",{attrs:{visible:e.dialogRefuse,title:"审核拒绝"},on:{"update:visible":function(t){e.dialogRefuse=t}}},[a("el-form",{attrs:{model:e.dialogRefuseForm}},[a("el-form-item",{attrs:{"label-width":"90px",label:"拒绝理由"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"textarea"},model:{value:e.dialogRefuseForm.remark,callback:function(t){e.$set(e.dialogRefuseForm,"remark",t)},expression:"dialogRefuseForm.remark"}})],1),a("el-form-item",{attrs:{"label-width":"90px",label:""}},[a("el-button",{attrs:{type:"primary"},on:{click:e.RefuseBtn}},[e._v("提交")])],1)],1)],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.statusa,expression:"statusa == 1"}],staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.confirm}},[e._v("审核通过")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==e.statusa,expression:"statusa == 1"}],staticStyle:{"margin-bottom":"20px"},attrs:{type:"danger"},on:{click:e.refuse}},[e._v("审核拒绝")])],1)},Gs=[],Qs={data:function(){return{options:[],state4:"",kehuValue:"",starttime:"",endtime:"",radio:"",piao:"",class_id:"",invoice_name:"",invoice_tax:"",invoice_type:"",remarks:"",listKuhuName:[],total_price:"",total_cost_price:"",user_price:"",logistics_price:"",extra_price:"",customer_order_id:"",tableData:[],fixedAddress:[],distributeProduct1:[],addressProduct:[],loading:!1,imageUrl:[],imageUrlType:[],dialogVisible:!1,dialogImageUrl:"",statusa:"",dialogRefuse:!1,dialogRefuseForm:{remark:""}}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout(function(){t.loading=!1,t.options=t.list.filter(function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1})},200)):this.options=[]},kehuName:function(e){var t=this;t.axios.post("/crm.Customer/customer_select",{company_id:e}).then(function(e){0==e.data.customer.length&&(t.kehuValue=""),t.listKuhuName=e.data.customer})},getimgUrl:function(e){var t=this;this.axios.get("/crm.Order/customer_order_file_select?id="+e+"&class=customer_order&action=finance").then(function(e){null!==e.data?(t.imageUrlstate=!0,t.imageUrl=e.data.customer_order):(t.imageUrlstate=!1,t.imageUrl=[])})},getcaogao:function(){var e=this;this.axios.get("/Finance/finance_order_audit_find?id="+this.$route.params.id).then(function(t){null!=t.data&&(e.state4=t.data.company_name,e.kehuName(t.data.company_id),e.kehuValue=t.data.customer_id,e.starttime=t.data.sales_time,e.endtime=t.data.delivery_time,e.piao=String(t.data.invoice_type),e.radio=String(t.data.type_id),e.class_id=String(t.data.class_id),e.remarks=t.data.remarks,e.statusa=t.data.status,e.total_price=t.data.total_price,e.total_cost_price=t.data.total_cost_price,e.user_price=t.data.user_price,e.logistics_price=t.data.logistics_price,e.extra_price=t.data.extra_price,e.invoice_name=t.data.invoice_name,e.invoice_tax=t.data.invoice_tax,e.invoice_type=t.data.invoice_type,e.tableData=t.data.product_sku,e.fixedAddress=t.data.address)})},big:function(e){this.dialogVisible=!0,this.dialogImageUrl=e},confirm:function(){var e=this;this.axios.post("/Finance/finance_order_audit_adopt",{id:this.$route.params.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.triggerDeleteTabs(e.$route.params.name),e.$router.push({path:"/Finance/finance_order_audit_list"})):e.open(t.data.msg,"error")})},refuse:function(){this.dialogRefuse=!0,this.dialogRefuseForm.remark=""},RefuseBtn:function(){var e=this;""==this.dialogRefuseForm.remark?this.open("请填写了拒绝原因","error"):this.axios.post("/Finance/finance_order_audit_adopt",{id:this.$route.params.id,status:"9",status_txt:this.dialogRefuseForm.remark}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.dialogRefuse=!1,e.triggerDeleteTabs(e.$route.params.name),e.$router.push({path:"/Finance/finance_order_audit_list"})):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){this.getcaogao(),this.getimgUrl(this.$route.params.id)},watch:{$route:function(e){void 0!=this.$route.params.id&&(this.getcaogao(),this.getimgUrl(this.$route.params.id))}}},Ks=Qs,Js=(i("ffae"),Object(d["a"])(Ks,Vs,Gs,!1,null,"ae25c274",null)),Zs=Js.exports,Ys=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seachName}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tabledata}},[a("el-table-column",{attrs:{label:"供应商",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"收款人",prop:"receiving_name"}}),a("el-table-column",{attrs:{label:"收款账户",prop:"receiving_account"}}),a("el-table-column",{attrs:{label:"金额",prop:"prepayment"}}),a("el-table-column",{attrs:{label:"业务员",prop:"user_name"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.stata[t.row.status]))])]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.FinanceSee(t.row)}}},[e._v("查看")]):1==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.CashierSee(t.row)}}},[e._v("查看")]):e._e(),2==t.row.status?a("el-button",{attrs:{type:"text",size:"small"}},[e._v("已打款")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"财务审核",visible:e.examine},on:{"update:visible":function(t){e.examine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[a("span",[e._v("收款人：")]),a("span",[e._v(e._s(e.receiving_name))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("收款账号：")]),a("span",[e._v(e._s(e.receiving_account))])]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("预付款金额：")]),a("span",[e._v(e._s(e.prepayment)+"￥")])]),a("el-table",{attrs:{data:e.examineData}},[a("el-table-column",{attrs:{label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"采购价",prop:"purchase_price"}}),a("el-table-column",{attrs:{label:"总金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Number(t.row.number)*Number(t.row.purchase_price))+"￥")])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.examine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.Submission}},[e._v("审核通过")])],1)],1),a("el-dialog",{attrs:{title:"财务审核",visible:e.Cashierexamine},on:{"update:visible":function(t){e.Cashierexamine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[a("span",[e._v("收款人：")]),a("span",[e._v(e._s(e.receiving_name))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("收款账号：")]),a("span",[e._v(e._s(e.receiving_account))])]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("预付款金额：")]),a("span",[e._v(e._s(e.prepayment)+"￥")])]),a("el-table",{attrs:{data:e.examineData}},[a("el-table-column",{attrs:{label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"采购价",prop:"purchase_price"}}),a("el-table-column",{attrs:{label:"总金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Number(t.row.number)*Number(t.row.purchase_price))+"￥")])]}}])})],1),a("div",{staticClass:"contract"},[a("label",[e._v("上传打款凭证")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"contractInnerLeft"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:"image/jpeg,image/gif,image/png,image/bmp",action:"/file/customer_order_advance_charge_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrlstate,expression:"imageUrlstate"}],staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.deleteimg(t.src)}}})])])}),0)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.Cashierexamine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.CashierSubmission}},[e._v("提 交")])],1)],1)],1)},Xs=[],eo={data:function(){return{seach:"",stata:["等待财务审核","等待出纳审核","审核完毕"],tabledata:[],currentPage:0,total:0,per_page:0,last_page:0,examine:!1,Cashierexamine:!1,id:"",examineData:[],receiving_name:"",receiving_account:"",prepayment:"",customer_order_id:"",imageUrl:[],imageUrlstate:!1}},methods:{seachName:function(){var e=this;this.axios.post("/Finance/finance_order_advance_charge_list",{supplier_name:this.seach}).then(function(t){e.tabledata=t.data.advance_charge.data,e.currentPage=t.data.advance_charge.current_page,e.total=t.data.advance_charge.total,e.per_page=t.data.advance_charge.per_page,e.last_page=t.data.advance_charge.last_page})},gettabledata:function(){var e=this;this.axios.get("/Finance/finance_order_advance_charge_list").then(function(t){e.tabledata=t.data.advance_charge.data,e.currentPage=t.data.advance_charge.current_page,e.total=t.data.advance_charge.total,e.per_page=t.data.advance_charge.per_page,e.last_page=t.data.advance_charge.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_order_advance_charge_list",{page:e}).then(function(e){t.tableData=e.data.order.data,t.currentPage=e.data.order.current_page,a.close()})},FinanceSee:function(e){this.examine=!0,this.id=e.id,this.receiving_name=e.receiving_name,this.receiving_account=e.receiving_account,this.prepayment=e.prepayment,this.examineData=e.product},Submission:function(){var e=this;this.axios.post("/Finance/finance_order_advance_charge_status",{id:this.id}).then(function(t){2e3==t.data.code?(e.gettabledata(),e.open(t.data.msg,"success"),e.examine=!1):e.open(t.data.msg,"error")})},CashierSee:function(e){this.Cashierexamine=!0,this.id=e.id,this.receiving_name=e.receiving_name,this.receiving_account=e.receiving_account,this.prepayment=e.prepayment,this.examineData=e.product,this.customer_order_id=e.customer_order_id},handleAvatarSuccess:function(){this.getimgUrl(this.id)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getimgUrl:function(e){var t=this;this.axios.get("/crm.Order/customer_order_file_select?id="+e+"&data_table=customer_order_advance_charge").then(function(e){null!=e.data.customer_order_advance_charge&&(t.imageUrlstate=!0,t.imageUrl=e.data.customer_order_advance_charge)})},deleteimg:function(e){var t=this;this.axios.post("/file/customer_order_delete",{src:e}).then(function(e){2e3==e.data.code&&t.getimgUrl(t.customer_order_id)})},CashierSubmission:function(){for(var e=this,t=[],a=0;a<this.imageUrl.length;a++){var i=this.imageUrl[a].src;t.push(i)}this.axios.post("/Finance/finance_order_advance_charge_status",{id:this.id,src:t,customer_order_id:this.customer_order_id}).then(function(t){2e3==t.data.code?(e.gettabledata(),e.open(t.data.msg,"success"),e.Cashierexamine=!1):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettabledata()},watch:{$route:function(e){this.gettabledata()}}},to=eo,ao=(i("398e"),Object(d["a"])(to,Ys,Xs,!1,null,"1f5224b0",null)),io=ao.exports,ro=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seachName}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tabledata}},[a("el-table-column",{attrs:{label:"物流公司",prop:"express_name"}}),a("el-table-column",{attrs:{label:"结算方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.status2[t.row.type]))])]}}])}),a("el-table-column",{attrs:{label:"付款方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.status1[t.row.payment_method]))])]}}])}),a("el-table-column",{attrs:{label:"收款账户",prop:"payment_account"}}),a("el-table-column",{attrs:{label:"金额",prop:"prepayment"}}),a("el-table-column",{attrs:{label:"业务员",prop:"user_name"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.stata[t.row.status]))])]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.FinanceSee(t.row)}}},[e._v("查看")]):1==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.CashierSee(t.row)}}},[e._v("查看")]):e._e(),2==t.row.status?a("el-button",{attrs:{type:"text",size:"small"}},[e._v("已打款")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"财务审核",visible:e.examine},on:{"update:visible":function(t){e.examine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[a("span",[e._v("收款人：")]),a("span",[e._v(e._s(e.receiving_name))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("收款账号：")]),a("span",[e._v(e._s(e.receiving_account))])]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("预付款金额：")]),a("span",[e._v(e._s(e.prepayment)+"￥")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.examine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.Submission}},[e._v("审核通过")])],1)]),a("el-dialog",{attrs:{title:"财务审核",visible:e.Cashierexamine},on:{"update:visible":function(t){e.Cashierexamine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[a("span",[e._v("收款人：")]),a("span",[e._v(e._s(e.receiving_name))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("收款账号：")]),a("span",[e._v(e._s(e.receiving_account))])]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("预付款金额：")]),a("span",[e._v(e._s(e.prepayment)+"￥")])]),a("div",{staticClass:"contract"},[a("label",[e._v("上传打款凭证")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"contractInnerLeft"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:"image/jpeg,image/gif,image/png,image/bmp",action:"/file/customer_order_express_cost_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrlstate,expression:"imageUrlstate"}],staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.deleteimg(t.src)}}})])])}),0)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.Cashierexamine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.CashierSubmission}},[e._v("提 交")])],1)])],1)},so=[],oo={data:function(){return{seach:"",stata:["等待财务审核","等待出纳审核","审核通过"],status1:["无","微信","支付宝","银行卡"],status2:["自费","整体结算","月结"],tabledata:[],currentPage:0,total:0,per_page:0,last_page:0,examine:!1,Cashierexamine:!1,id:"",receiving_name:"",receiving_account:"",prepayment:"",imageUrl:[],imageUrlstate:!1}},methods:{seachName:function(){var e=this;this.axios.post("/Finance/finance_order_express_cost_list",{supplier_name:this.seach}).then(function(t){e.tabledata=t.data.data,e.currentPage=t.data.current_page,e.total=t.data.total,e.per_page=t.data.per_page,e.last_page=t.data.last_page})},gettabledata:function(){var e=this;this.axios.get("/Finance/finance_order_express_cost_list").then(function(t){e.tabledata=t.data.data,e.currentPage=t.data.current_page,e.total=t.data.total,e.per_page=t.data.per_page,e.last_page=t.data.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_order_express_cost_list",{page:e}).then(function(e){t.tableData=e.data.order.data,t.currentPage=e.data.order.current_page,a.close()})},FinanceSee:function(e){this.examine=!0,this.id=e.id,this.receiving_name=e.express_name,this.receiving_account=e.payment_account,this.prepayment=e.prepayment},Submission:function(){var e=this;this.axios.post("/Finance/finance_order_express_cost_status",{id:this.id}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.examine=!1,e.gettabledata()):e.open(t.data.msg,"error")})},CashierSee:function(e){this.Cashierexamine=!0,this.id=e.id,this.receiving_name=e.express_name,this.receiving_account=e.payment_account,this.prepayment=e.prepayment,this.getimgUrl(e.id)},handleAvatarSuccess:function(){this.getimgUrl(this.id)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getimgUrl:function(e){var t=this;this.axios.get("/crm.Order/customer_order_file_select?id="+e+"&class=customer_order_express_cost").then(function(e){null!=e.data.customer_order_express_cost&&(t.imageUrlstate=!0,t.imageUrl=e.data.customer_order_express_cost)})},deleteimg:function(e){var t=this;this.axios.post("/file/customer_order_delete",{src:e,class:"customer_order"}).then(function(e){2e3==e.data.code&&t.getimgUrl(t.customer_order_id)})},CashierSubmission:function(){for(var e=this,t=[],a=0;a<this.imageUrl.length;a++){var i=this.imageUrl[a].src;t.push(i)}this.axios.post("/Finance/finance_order_express_cost_status",{id:this.id,src:t}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.Cashierexamine=!1,e.gettabledata()):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettabledata()},watch:{$route:function(e){this.gettabledata()}}},lo=oo,no=(i("9f84"),Object(d["a"])(lo,ro,so,!1,null,"51f6e984",null)),co=no.exports,uo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seachName}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tabledata}},[a("el-table-column",{attrs:{label:"订单编号",prop:"customer_order_id"}}),a("el-table-column",{attrs:{label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.product_sku))])]}}])}),a("el-table-column",{attrs:{label:"原因"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.stata1[t.row.type[0]]))])]}}])}),a("el-table-column",{attrs:{label:"金额",prop:"fee"}}),a("el-table-column",{attrs:{label:"业务员",prop:"user_name"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.stata[t.row.status]))])]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.FinanceSee(t.row)}}},[e._v("查看")]):1==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.CashierSee(t.row)}}},[e._v("查看")]):e._e(),2==t.row.status?a("el-button",{attrs:{type:"text",size:"small"}},[e._v("已打款")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"财务审核",visible:e.examine},on:{"update:visible":function(t){e.examine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[a("span",[e._v("收款人：")]),a("span",[e._v(e._s(e.receiving_name))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("收款账号：")]),a("span",[e._v(e._s(e.receiving_account))])]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("预付款金额：")]),a("span",[e._v(e._s(e.fee)+"￥")])]),a("el-table",{attrs:{data:e.examineData}},[a("el-table-column",{attrs:{label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"采购价",prop:"purchase_price"}}),a("el-table-column",{attrs:{label:"总金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Number(t.row.number)*Number(t.row.purchase_price))+"￥")])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.examine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.Submission}},[e._v("审核通过")])],1)],1),a("el-dialog",{attrs:{title:"财务审核",visible:e.Cashierexamine},on:{"update:visible":function(t){e.Cashierexamine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[a("span",[e._v("收款人：")]),a("span",[e._v(e._s(e.receiving_name))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("收款账号：")]),a("span",[e._v(e._s(e.receiving_account))])]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("预付款金额：")]),a("span",[e._v(e._s(e.fee)+"￥")])]),a("el-table",{attrs:{data:e.examineData}},[a("el-table-column",{attrs:{label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"采购价",prop:"purchase_price"}}),a("el-table-column",{attrs:{label:"总金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Number(t.row.number)*Number(t.row.purchase_price))+"￥")])]}}])})],1),a("div",{staticClass:"contract"},[a("label",[e._v("上传打款凭证")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"contractInnerLeft"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:"image/jpeg,image/gif,image/png,image/bmp",action:"/file/customer_order_advance_charge_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrlstate,expression:"imageUrlstate"}],staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.deleteimg(t.src)}}})])])}),0)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.Cashierexamine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.CashierSubmission}},[e._v("提 交")])],1)],1)],1)},po=[],mo={data:function(){return{seach:"",stata:["等待财务审核","等待出纳审核","审核完毕"],stata1:["补货","换货","退货","退单"],tabledata:[],currentPage:0,total:0,per_page:0,last_page:0,examine:!1,Cashierexamine:!1,id:"",examineData:[],receiving_name:"",receiving_account:"",fee:"",imageUrl:[],imageUrlstate:!1}},methods:{seachName:function(){var e=this;this.axios.post("/Finance/finance_order_after_sales_list",{supplier_name:this.seach}).then(function(t){e.tabledata=t.data.after_sales.data,e.currentPage=t.data.after_sales.current_page,e.total=t.data.after_sales.total,e.per_page=t.data.after_sales.per_page,e.last_page=t.data.after_sales.last_page})},gettabledata:function(){var e=this;this.axios.get("/Finance/finance_order_after_sales_list").then(function(t){e.tabledata=t.data.after_sales.data,e.currentPage=t.data.after_sales.current_page,e.total=t.data.after_sales.total,e.per_page=t.data.after_sales.per_page,e.last_page=t.data.after_sales.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_order_after_sales_list",{page:e}).then(function(e){t.tableData=e.data.after_sales.data,t.currentPage=e.data.after_sales.current_page,a.close()})},FinanceSee:function(e){this.examine=!0,this.id=e.id,this.receiving_name=e.customer_order_id,this.receiving_account=e.type,this.fee=e.fee,this.examineData=e.product},Submission:function(){var e=this;this.axios.post("/Finance/finance_order_after_sales_status",{id:this.id}).then(function(t){2e3==t.data.code?(e.gettabledata(),e.open(t.data.msg,"success"),e.examine=!1):e.open(t.data.msg,"error")})},CashierSee:function(e){this.Cashierexamine=!0,this.id=e.id,this.receiving_name=e.customer_order_id,this.receiving_account=e.type,this.fee=e.fee,this.examineData=e.product,this.getimgUrl(e.id)},handleAvatarSuccess:function(){this.getimgUrl(this.id)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getimgUrl:function(e){var t=this;this.axios.get("/crm.Order/customer_order_file_select?id="+e+"&data_table=customer_order_after_sales&correlation_id="+this.receiving_name).then(function(e){null!=e.data.customer_order_after_sales&&(t.imageUrlstate=!0,t.imageUrl=e.data.customer_order_after_sales)})},deleteimg:function(e){var t=this;this.axios.post("/file/customer_order_delete",{src:e}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getimgUrl(t.customer_order_id)):t.open(e.data.msg,"error")})},CashierSubmission:function(){for(var e=this,t=[],a=0;a<this.imageUrl.length;a++){var i=this.imageUrl[a].src;t.push(i)}this.axios.post("/Finance/finance_order_after_sales_status",{id:this.id,src:t}).then(function(t){2e3==t.data.code?(e.gettabledata(),e.open(t.data.msg,"success"),e.Cashierexamine=!1):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettabledata()},watch:{$route:function(e){this.gettabledata()}}},ho=mo,fo=(i("a2e9"),Object(d["a"])(ho,uo,po,!1,null,"107664ca",null)),_o=fo.exports,go=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seachName}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"类型",prop:"type"}}),a("el-table-column",{attrs:{label:"发票抬头",prop:"rise"}}),a("el-table-column",{attrs:{label:"票号",prop:"tax_number"}}),a("el-table-column",{attrs:{label:"金额",prop:"money"}}),a("el-table-column",{attrs:{label:"品类",prop:"category"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("\n                        待开票\n                    ")]):e._e(),3==t.row.status?a("span",[e._v("\n                        已开票\n                    ")]):e._e(),5==t.row.status?a("span",[e._v("\n                        运费待审核\n                    ")]):e._e(),t.row.status>=9?a("span",[e._v("\n                        已审核\n                    ")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status<9?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.Audit(t.row)}}},[e._v("审核开票")]):e._e(),a("br"),a("el-button",{staticStyle:{"margin-top":"5px"},attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.express(t.row)}}},[e._v("快递审核")])]}}])})],1),a("el-dialog",{attrs:{title:"快递审核",visible:e.dialogSend,width:"60%"},on:{"update:visible":function(t){e.dialogSend=t}}},[a("el-table",{attrs:{data:e.SendData}},[a("el-table-column",{attrs:{label:"快递公司",prop:"express_name"}}),a("el-table-column",{attrs:{label:"快递编号",prop:"numbers"}}),a("el-table-column",{attrs:{label:"快递费用",prop:"money"}}),a("el-table-column",{attrs:{label:"快递时间",prop:"add_time"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.examine(t.row)}}},[e._v("审 核")])]}}])})],1)],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)])},bo=[],vo={data:function(){return{seach:"",tableData:[],currentPage:0,total:0,per_page:0,last_page:0,dialogSend:!1,SendData:[],id:""}},methods:{seachName:function(){var e=this;this.axios.post("/Finance/finance_invoice_list",{rise:this.seach}).then(function(t){e.tabledata=t.data.invoice.data,e.currentPage=t.data.invoice.current_page,e.total=t.data.invoice.total,e.per_page=t.data.invoice.per_page,e.last_page=t.data.invoice.last_page})},gettableData:function(){var e=this;this.axios.get("/Finance/finance_invoice_list").then(function(t){e.tableData=t.data.invoice.data,e.currentPage=t.data.invoice.current_page,e.total=t.data.invoice.total,e.per_page=t.data.invoice.per_page,e.last_page=t.data.invoice.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_invoice_list",{page:e}).then(function(e){t.tableData=e.data.invoice.data,t.currentPage=e.data.invoice.current_page,a.close()})},Audit:function(e){var t=this;this.axios.post("/Finance/finance_invoice_status",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.gettableData()):t.open(e.data.msg,"error")})},express:function(e){var t=this;this.id=e.id,this.axios.get("/Finance/finance_invoice_express_select?id="+e.id).then(function(e){t.SendData=e.data}),this.dialogSend=!0},examine:function(e){var t=this;this.axios.post("/Finance/finance_invoice_express_status",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.dialogSend=!1,t.id=""):t.open(e.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettableData()},watch:{$route:function(e){this.gettableData()}}},yo=vo,xo=Object(d["a"])(yo,go,bo,!1,null,null,null),ko=xo.exports,wo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-select",{attrs:{placeholder:"请选择渠道"},model:{value:e.channel,callback:function(t){e.channel=t},expression:"channel"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.lable,value:e.value}})}),1),a("el-select",{staticStyle:{"margin-left":"15px"},attrs:{placeholder:"请选择公司"},model:{value:e.company,callback:function(t){e.company=t},expression:"company"}},e._l(e.options1,function(e){return a("el-option",{key:e.value,attrs:{label:e.lable,value:e.value}})}),1),a("el-date-picker",{staticStyle:{"margin-left":"15px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"开始时间"},model:{value:e.time1,callback:function(t){e.time1=t},expression:"time1"}}),a("el-date-picker",{staticStyle:{"margin-left":"15px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"结束时间"},model:{value:e.time2,callback:function(t){e.time2=t},expression:"time2"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seach}},[e._v("搜索")]),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("增加")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"汇款时间",prop:"payment_time",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.payment_time.substr(0,10))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"接收账号",width:"280px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receiving_name)+":"+e._s(t.row.receiving_account))])]}}])}),a("el-table-column",{attrs:{label:"汇款公司",prop:"company_name"}}),a("el-table-column",{attrs:{label:"业务员",prop:"confirm_user_name"}}),a("el-table-column",{attrs:{label:"金额",prop:"payment_amount"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"录入人",prop:"user_name"}}),a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")]):e._e(),0==t.row.status?a("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(a){return e.deteles(t.row)}}},[e._v("删除")]):e._e(),0!==t.row.status?a("span",[e._v("不可操作")]):e._e()]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"录入款项信息",visible:e.dialogInfo},on:{"update:visible":function(t){e.dialogInfo=t}}},[a("el-form",{ref:"InfoForm",attrs:{model:e.InfoForm,inline:""}},[a("el-form-item",{attrs:{label:"公司","label-width":"90px",prop:"company"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{filterable:"",placeholder:"请选择公司"},model:{value:e.InfoForm.company,callback:function(t){e.$set(e.InfoForm,"company",t)},expression:"InfoForm.company"}},e._l(e.optionsCompany,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"绑定业务员","label-width":"90px",prop:"confirm_user_id"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{placeholder:"请选择",filterable:""},model:{value:e.InfoForm.confirm_user_id,callback:function(t){e.$set(e.InfoForm,"confirm_user_id",t)},expression:"InfoForm.confirm_user_id"}},[a("el-option",{attrs:{label:"空",value:e.zero}}),e._l(e.user,function(e){return a("el-option",{key:e.user_id,attrs:{label:e.name,value:e.user_id}})})],2)],1),a("el-form-item",{attrs:{label:"渠道","label-width":"90px",prop:"source"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.InfoForm.source,callback:function(t){e.$set(e.InfoForm,"source",t)},expression:"InfoForm.source"}},[e._v("微信")]),a("el-radio",{attrs:{label:"2"},model:{value:e.InfoForm.source,callback:function(t){e.$set(e.InfoForm,"source",t)},expression:"InfoForm.source"}},[e._v("支付宝")]),a("el-radio",{attrs:{label:"3"},model:{value:e.InfoForm.source,callback:function(t){e.$set(e.InfoForm,"source",t)},expression:"InfoForm.source"}},[e._v("银行卡")])],1),a("el-form-item",{attrs:{label:"接收账号","label-width":"90px",prop:"payee_id"}},[a("el-select",{staticStyle:{width:"217px"},attrs:{placeholder:"请选择接收账号"},model:{value:e.InfoForm.payee_id,callback:function(t){e.$set(e.InfoForm,"payee_id",t)},expression:"InfoForm.payee_id"}},e._l(e.optionsK,function(e){return a("el-option",{key:e.id,attrs:{label:e.receiving_name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"汇款日期","label-width":"90px",prop:"payment_time"}},[a("el-date-picker",{staticStyle:{width:"217px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择汇款日期"},model:{value:e.InfoForm.payment_time,callback:function(t){e.$set(e.InfoForm,"payment_time",t)},expression:"InfoForm.payment_time"}})],1),a("el-form-item",{attrs:{label:"金额","label-width":"90px",prop:"payment_amount"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.InfoForm.payment_amount,callback:function(t){e.$set(e.InfoForm,"payment_amount",t)},expression:"InfoForm.payment_amount"}})],1),a("br"),a("el-form-item",{attrs:{label:"备注","label-width":"90px",prop:"company"}},[a("el-input",{staticStyle:{width:"434px"},attrs:{type:"textarea"},model:{value:e.InfoForm.remarks,callback:function(t){e.$set(e.InfoForm,"remarks",t)},expression:"InfoForm.remarks"}})],1),a("br"),a("el-form-item",{attrs:{label:"上传图片","label-width":"90px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/File/receivables_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.InfoForm.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.InfoForm.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogInfo=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addSend}},[e._v("提 交")])],1)],1)],1)},So=[],Ao={data:function(){return{channel:"",company:"",time1:"",time2:"",options:[{value:"1",lable:"微信"},{value:"2",lable:"支付宝"},{value:"3",lable:"银行卡"}],options1:[{value:"1",lable:"微信"},{value:"2",lable:"支付宝"},{value:"3",lable:"银行卡"}],zero:0,tableData:[],optionsPayee:[],user:[],optionsK:[],optionsCompany:[],dialogInfo:!1,InfoForm:{company:"",remarks:"",imageUrl:"",source:"",confirm_user_id:"",payee_id:"",payment_time:"",payment_amount:"",id:""},currentPage:0,total:0,per_page:0,last_page:0}},methods:{seach:function(){},change:function(e){return e<10?"0"+e:e},add:function(){this.dialogInfo=!0,this.InfoForm.company="",this.InfoForm.remarks="",this.InfoForm.imageUrl="",this.InfoForm.source="",this.InfoForm.confirm_user_id="",this.InfoForm.payee_id="",this.InfoForm.payment_amount="",this.InfoForm.id="";var e=new Date,t=e.getFullYear(),a=this.change(e.getMonth()+1),i=this.change(e.getDate());this.InfoForm.payment_time=t+"-"+a+"-"+i},deteles:function(e){var t=this;this.axios.post("/Finance/finance_receivables_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.gettable(),t.open(e.data.msg,"success")):t.open(e.data.msg,"error")})},edit:function(e){this.dialogInfo=!0,this.InfoForm.company=e.company_id,this.InfoForm.remarks=e.remarks,this.InfoForm.imageUrl=e.img,this.InfoForm.source=e.source,this.InfoForm.confirm_user_id=e.confirm_user_id,this.InfoForm.payee_id=e.payee_id,this.InfoForm.payment_time=e.payment_time,this.InfoForm.payment_amount=e.payment_amount,this.InfoForm.id=e.id},addSend:function(){var e=this;""==this.InfoForm.id?""==this.InfoForm.source||""==this.InfoForm.payment_amount||""==this.InfoForm.payee_id?this.open("填写渠道 接收账号 金额！！！","error"):this.axios.post("/Finance/finance_receivables_add",{source:this.InfoForm.source,confirm_user_id:this.InfoForm.confirm_user_id,payee_id:this.InfoForm.payee_id,payment_time:this.InfoForm.payment_time,payment_amount:this.InfoForm.payment_amount,img:this.InfoForm.imageUrl,remarks:this.InfoForm.remarks,company_id:this.InfoForm.company}).then(function(t){2e3==t.data.code?(e.gettable(),e.dialogInfo=!1,e.open(t.data.msg,"success")):e.open(t.data.msg,"error")}):this.axios.post("/Finance/finance_receivables_update",{source:this.InfoForm.source,confirm_user_id:this.InfoForm.confirm_user_id,payee_id:this.InfoForm.payee_id,payment_time:this.InfoForm.payment_time,payment_amount:this.InfoForm.payment_amount,img:this.InfoForm.imageUrl,remarks:this.InfoForm.remarks,company_id:this.InfoForm.company,id:this.InfoForm.id}).then(function(t){2e3==t.data.code?(e.gettable(),e.dialogInfo=!1,e.open(t.data.msg,"success")):e.open(t.data.msg,"error")})},gettable:function(){var e=this;this.axios.get("/Finance/finance_receivables_lists").then(function(t){e.optionsCompany=t.data.company,e.optionsK=t.data.payee,e.user=t.data.user,e.tableData=t.data.receivables.data,e.currentPage=t.data.receivables.current_page,e.total=t.data.receivables.total,e.per_page=t.data.receivables.per_page,e.last_page=t.data.receivables.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_receivables_lists",{page:e}).then(function(e){t.tableData=e.data.receivables.data,t.currentPage=e.data.receivables.current_page,a.close()})},handleAvatarSuccess:function(e,t){this.InfoForm.imageUrl=e.src},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},open:function(e,t){this.$message({showClose:!0,message:e,type:t})}},created:function(){this.gettable()},watch:{$route:function(e){this.gettable()}}},Co=Ao,Fo=(i("0639"),Object(d["a"])(Co,wo,So,!1,null,"1b93a8e2",null)),Po=Fo.exports,Do=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"请输入内容"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seach}},[e._v("搜索")]),a("el-button",{staticStyle:{"margin-left":"100px"},attrs:{type:"primary"},on:{click:e.addCompany}},[e._v("添加收款账号")])],1),a("div",{staticClass:"conten_box"},[a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"收款账号",prop:"receiving_account"}}),a("el-table-column",{attrs:{label:"名称",prop:"receiving_title"}}),a("el-table-column",{attrs:{label:"收款人",prop:"receiving_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.edit(t.row)}}},[e._v("修改")])]}}])})],1)],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"添加收款人",visible:e.dialogNumber},on:{"update:visible":function(t){e.dialogNumber=t}}},[a("el-form",{attrs:{model:e.formNumbers}},[a("el-form-item",{attrs:{label:"公司","label-width":"90px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formNumbers.type,callback:function(t){e.$set(e.formNumbers,"type",t)},expression:"formNumbers.type"}},[e._v("企业")]),a("el-radio",{attrs:{label:"0"},model:{value:e.formNumbers.type,callback:function(t){e.$set(e.formNumbers,"type",t)},expression:"formNumbers.type"}},[e._v("个人")])],1),a("el-form-item",{attrs:{label:"收款名称","label-width":"90px"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.formNumbers.receiving_title,callback:function(t){e.$set(e.formNumbers,"receiving_title",t)},expression:"formNumbers.receiving_title"}})],1),a("el-form-item",{attrs:{label:"收款人","label-width":"90px"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.formNumbers.receiving_name,callback:function(t){e.$set(e.formNumbers,"receiving_name",t)},expression:"formNumbers.receiving_name"}})],1),a("el-form-item",{attrs:{label:"收款账号","label-width":"90px"}},[a("el-input",{staticStyle:{width:"317px"},model:{value:e.formNumbers.receiving_account,callback:function(t){e.$set(e.formNumbers,"receiving_account",t)},expression:"formNumbers.receiving_account"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogNumber=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)],1)],1)},$o=[],Io={data:function(){return{search:"",tableData:[],dialogNumber:!1,formNumbers:{type:"",receiving_name:"",receiving_title:"",receiving_account:"",id:""},currentPage:0,total:0,per_page:0,last_page:0}},methods:{handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/payee_lists",{page:e}).then(function(e){t.tableData=e.data.data,t.currentPage=e.data.current_page,a.close()})},gettableData:function(){var e=this;this.axios.get("/Finance/payee_lists").then(function(t){e.tableData=t.data.data,e.currentPage=t.data.current_page,e.total=t.data.total,e.per_page=t.data.per_page,e.last_page=t.data.last_page})},add:function(){var e=this;this.dialogNumber=!1,""==this.formNumbers.id?this.axios.post("/Finance/payee_add",{type:this.formNumbers.type,receiving_title:this.formNumbers.receiving_title,receiving_name:this.formNumbers.receiving_name,receiving_account:this.formNumbers.receiving_account}).then(function(t){2e3==t.data.code?(e.gettableData(),e.open(t.data.msg,"success"),e.dialogNumber=!1):e.open(t.data.msg,"error")}):this.axios.post("/Finance/payee_update",{type:this.formNumbers.type,receiving_name:this.formNumbers.receiving_name,receiving_title:this.formNumbers.receiving_title,receiving_account:this.formNumbers.receiving_account,id:this.formNumbers.id}).then(function(t){2e3==t.data.code?(e.gettableData(),e.open(t.data.msg,"success"),e.dialogNumber=!1):e.open(t.data.msg,"error")})},addCompany:function(){this.dialogNumber=!0,this.formNumbers.type="",this.formNumbers.receiving_name="",this.formNumbers.receiving_title="",this.formNumbers.receiving_account="",this.formNumbers.id=""},edit:function(e){this.dialogNumber=!0,this.formNumbers.type=String(e.type),this.formNumbers.receiving_title=e.receiving_title,this.formNumbers.receiving_name=e.receiving_name,this.formNumbers.receiving_account=e.receiving_account,this.formNumbers.id=e.id},deteles:function(){},seach:function(){}},created:function(){this.gettableData()},watch:{$route:function(e){this.gettableData()}}},qo=Io,Oo=Object(d["a"])(qo,Do,$o,!1,null,null,null),No=Oo.exports,zo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seachName}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tabledata}},[a("el-table-column",{attrs:{label:"订单编号",prop:"customer_order_id"}}),a("el-table-column",{attrs:{label:"原因",prop:"remarks"}}),a("el-table-column",{attrs:{label:"金额",prop:"money"}}),a("el-table-column",{attrs:{label:"业务员",prop:"user_name"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.stata[t.row.status]))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.FinanceSee(t.row)}}},[e._v("查看")]):1==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.CashierSee(t.row)}}},[e._v("查看")]):e._e(),2==t.row.status?a("el-button",{attrs:{type:"text",size:"small"}},[e._v("已打款")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"财务审核",visible:e.examine},on:{"update:visible":function(t){e.examine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[a("span",[e._v("订单编号：")]),a("span",[e._v(e._s(e.receiving_name))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("原因：")]),a("span",[e._v(e._s(e.receiving_account))])]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("金额：")]),a("span",[e._v(e._s(e.fee)+"￥")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.examine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.Submission}},[e._v("审核通过")])],1)]),a("el-dialog",{attrs:{title:"财务审核",visible:e.Cashierexamine},on:{"update:visible":function(t){e.Cashierexamine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[a("span",[e._v("订单编号：")]),a("span",[e._v(e._s(e.receiving_name))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("原因：")]),a("span",[e._v(e._s(e.receiving_account))])]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("金额：")]),a("span",[e._v(e._s(e.fee)+"￥")])]),a("div",{staticClass:"contract"},[a("label",[e._v("上传打款凭证")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"contractInnerLeft"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:"image/jpeg,image/gif,image/png,image/bmp",action:"/file/customer_extra_charge_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrlstate,expression:"imageUrlstate"}],staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.deleteimg(t.src)}}})])])}),0)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.Cashierexamine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.CashierSubmission}},[e._v("提 交")])],1)])],1)},To=[],jo={data:function(){return{seach:"",stata:["等待财务审核","等待出纳审核","审核完毕"],stata1:["补货","换货","退货","退单"],tabledata:[],currentPage:0,total:0,per_page:0,last_page:0,examine:!1,Cashierexamine:!1,id:"",examineData:[],receiving_name:"",receiving_account:"",fee:"",imageUrl:[],imageUrlstate:!1}},methods:{seachName:function(){var e=this;this.axios.post("/Finance/finance_order_extra_list",{supplier_name:this.seach}).then(function(t){e.tabledata=t.data.extra.data,e.currentPage=t.data.extra.current_page,e.total=t.data.extra.total,e.per_page=t.data.extra.per_page,e.last_page=t.data.extra.last_page})},gettabledata:function(){var e=this;this.axios.get("/Finance/finance_order_extra_list").then(function(t){e.tabledata=t.data.extra.data,e.currentPage=t.data.extra.current_page,e.total=t.data.extra.total,e.per_page=t.data.extra.per_page,e.last_page=t.data.extra.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_order_extra_list",{page:e}).then(function(e){t.tableData=e.data.extra.data,t.currentPage=e.data.extra.current_page,a.close()})},FinanceSee:function(e){this.examine=!0,this.id=e.id,this.receiving_name=e.customer_order_id,this.receiving_account=e.remarks,this.fee=e.money},Submission:function(){var e=this;this.axios.post("/Finance/finance_order_extra_status",{id:this.id}).then(function(t){2e3==t.data.code?(e.gettabledata(),e.open(t.data.msg,"success"),e.examine=!1):e.open(t.data.msg,"error")})},CashierSee:function(e){this.Cashierexamine=!0,this.id=e.id,this.receiving_name=e.customer_order_id,this.receiving_account=e.type,this.receiving_account=e.remarks,this.fee=e.money,this.examineData=e.product,this.getimgUrl(e.id)},handleAvatarSuccess:function(){this.getimgUrl(this.id)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getimgUrl:function(e){var t=this;this.axios.get("/crm.Order/customer_order_file_select?id="+e+"&data_table=customer_order_extra&correlation_id="+this.receiving_name).then(function(e){null!=e.data&&(t.imageUrlstate=!0,t.imageUrl=e.data.customer_order_extra)})},deleteimg:function(e){var t=this;this.axios.post("/file/customer_order_delete",{src:e,class:"customer_order"}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getimgUrl(t.customer_order_id)):t.open(e.data.msg,"error")})},CashierSubmission:function(){for(var e=this,t=[],a=0;a<this.imageUrl.length;a++){var i=this.imageUrl[a].src;t.push(i)}this.axios.post("/Finance/finance_order_extra_status",{id:this.id,src:t}).then(function(t){2e3==t.data.code?(e.gettabledata(),e.open(t.data.msg,"success"),e.Cashierexamine=!1):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettabledata()},watch:{$route:function(e){this.gettabledata()}}},Uo=jo,Mo=(i("c02d"),Object(d["a"])(Uo,zo,To,!1,null,"9f92e0f0",null)),Eo=Mo.exports,Ro=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seachName}},[e._v("搜索")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tabledata}},[a("el-table-column",{attrs:{label:"产品"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.class_name))])]}}])}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"单价",prop:"purchase_price"}}),a("el-table-column",{attrs:{label:"金额",prop:"money"}}),a("el-table-column",{attrs:{label:"供应商",prop:"supplier_id"}}),a("el-table-column",{attrs:{label:"业务员",prop:"user_name"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.stata[t.row.status]))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.FinanceSee(t.row)}}},[e._v("查看")]):1==t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.CashierSee(t.row)}}},[e._v("查看")]):e._e(),2==t.row.status?a("el-button",{attrs:{type:"text",size:"small"}},[e._v("已打款")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"财务审核",visible:e.examine},on:{"update:visible":function(t){e.examine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[a("span",[e._v("收款人：")]),a("span",[e._v(e._s(e.receiving_name))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("收款账号：")]),a("span",[e._v(e._s(e.receiving_account))])]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("预付款金额：")]),a("span",[e._v(e._s(e.fee)+"￥")])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.examine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.Submission}},[e._v("审核通过")])],1)]),a("el-dialog",{attrs:{title:"财务审核",visible:e.Cashierexamine},on:{"update:visible":function(t){e.Cashierexamine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[a("span",[e._v("收款人：")]),a("span",[e._v(e._s(e.receiving_name))]),a("span",{staticStyle:{"margin-left":"30px"}},[e._v("收款账号：")]),a("span",[e._v(e._s(e.receiving_account))])]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("预付款金额：")]),a("span",[e._v(e._s(e.fee)+"￥")])]),a("div",{staticClass:"contract"},[a("label",[e._v("上传打款凭证")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"contractInnerLeft"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:"image/jpeg,image/gif,image/png,image/bmp",action:"/file/product_stockup_supplier_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrlstate,expression:"imageUrlstate"}],staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.deleteimg(t.src)}}})])])}),0)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.Cashierexamine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.CashierSubmission}},[e._v("提 交")])],1)])],1)},Lo=[],Ho={data:function(){return{seach:"",stata:["等待财务审核","等待出纳审核","审核完毕"],stata1:["补货","换货","退货","退单"],tabledata:[],currentPage:0,total:0,per_page:0,last_page:0,examine:!1,Cashierexamine:!1,id:"",examineData:[],receiving_name:"",receiving_account:"",fee:"",imageUrl:[],imageUrlstate:!1}},methods:{seachName:function(){var e=this;this.axios.post("/Finance/finance_product_stockup_supplier_lists",{supplier_name:this.seach}).then(function(t){e.tabledata=t.data.data,e.currentPage=t.data.current_page,e.total=t.data.total,e.per_page=t.data.per_page,e.last_page=t.data.last_page})},gettabledata:function(){var e=this;this.axios.get("/Finance/finance_product_stockup_supplier_lists").then(function(t){e.tabledata=t.data.data,e.currentPage=t.data.current_page,e.total=t.data.total,e.per_page=t.data.per_page,e.last_page=t.data.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_product_stockup_supplier_lists",{page:e}).then(function(e){t.tableData=e.data.data,t.currentPage=e.data.current_page,a.close()})},FinanceSee:function(e){this.examine=!0,this.id=e.id,this.receiving_name=e.supplier_id,this.receiving_account=e.supplier_id,this.fee=e.money,this.examineData=e.product},Submission:function(){var e=this;this.axios.post("/Finance/finance_product_stockup_supplier_status",{id:this.id}).then(function(t){2e3==t.data.code?(e.gettabledata(),e.open(t.data.msg,"success"),e.examine=!1):e.open(t.data.msg,"error")})},CashierSee:function(e){this.Cashierexamine=!0,this.id=e.id,this.receiving_name=e.supplier_id,this.receiving_account=e.supplier_id,this.fee=e.money,this.examineData=e.product,this.getimgUrl(e.id)},handleAvatarSuccess:function(){this.getimgUrl(this.id)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getimgUrl:function(e){var t=this;this.axios.post("/file/file_select",{class:"temporary_file",id:e,data_table:"product_stockup_supplier"}).then(function(e){null!=e.data&&(t.imageUrlstate=!0,t.imageUrl=e.data)})},deleteimg:function(e){var t=this;this.axios.post("/file/customer_order_delete",{src:e}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getimgUrl(t.customer_order_id)):t.open(e.data.msg,"error")})},CashierSubmission:function(){for(var e=this,t=[],a=0;a<this.imageUrl.length;a++){var i=this.imageUrl[a].src;t.push(i)}this.axios.post("/Finance/finance_product_stockup_supplier_status",{id:this.id,src:t}).then(function(t){2e3==t.data.code?(e.gettabledata(),e.open(t.data.msg,"success"),e.Cashierexamine=!1):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettabledata()},watch:{$route:function(e){this.gettabledata()}}},Bo=Ho,Wo=(i("a934"),Object(d["a"])(Bo,Ro,Lo,!1,null,"3fd1c718",null)),Vo=Wo.exports,Go=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px","margin-left":"10px"},attrs:{placeholder:"名称"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:e.seachName}},[e._v("搜索")]),a("el-button",{staticStyle:{"margin-left":"40px"},attrs:{type:"primary"},on:{click:e.add}},[e._v("新增")])],1),a("div",{staticClass:"content_box"},[a("el-table",{attrs:{data:e.tabledata}},[a("el-table-column",{attrs:{label:"供应商名称",prop:"supplier_name",width:"300px"}}),a("el-table-column",{attrs:{label:"发票抬头",prop:"rise"}}),a("el-table-column",{attrs:{label:"发票税号",prop:"tax_number",width:"240px"}}),a("el-table-column",{attrs:{label:"品类",prop:"category"}}),a("el-table-column",{attrs:{label:"发票类型",prop:"type",width:"90px"}}),a("el-table-column",{attrs:{label:"金额",prop:"money"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.deletes(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"新增/修改",visible:e.dialogAdd},on:{"update:visible":function(t){e.dialogAdd=t}}},[a("el-form",{attrs:{model:e.dialogAddForm}},[a("el-form-item",{attrs:{label:"供应商","label-width":"90px"}},[a("el-select",{staticStyle:{width:"70%"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.dialogAddForm.supplier_id,callback:function(t){e.$set(e.dialogAddForm,"supplier_id",t)},expression:"dialogAddForm.supplier_id"}},e._l(e.options,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.name))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("未开票金额"+e._s(t.invoice_money))])])}),1)],1),a("el-form-item",{attrs:{label:"抬头","label-width":"90px"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:e.dialogAddForm.rise,callback:function(t){e.$set(e.dialogAddForm,"rise",t)},expression:"dialogAddForm.rise"}})],1),a("el-form-item",{attrs:{label:"发票税号","label-width":"90px"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:e.dialogAddForm.tax_number,callback:function(t){e.$set(e.dialogAddForm,"tax_number",t)},expression:"dialogAddForm.tax_number"}})],1),a("el-form-item",{attrs:{label:"品类","label-width":"90px"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:e.dialogAddForm.category,callback:function(t){e.$set(e.dialogAddForm,"category",t)},expression:"dialogAddForm.category"}})],1),a("el-form-item",{attrs:{label:"发票类型","label-width":"90px"}},[a("el-input",{staticStyle:{width:"70%"},model:{value:e.dialogAddForm.type,callback:function(t){e.$set(e.dialogAddForm,"type",t)},expression:"dialogAddForm.type"}})],1),a("el-form-item",{attrs:{label:"金额","label-width":"90px"}},[a("el-input",{staticStyle:{width:"70%"},on:{change:e.jine},model:{value:e.dialogAddForm.money,callback:function(t){e.$set(e.dialogAddForm,"money",t)},expression:"dialogAddForm.money"}})],1),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("提交")])],1)],1)],1)],1)},Qo=[],Ko={data:function(){return{seach:"",tabledata:[],currentPage:0,total:0,per_page:0,last_page:0,options:[],dialogAdd:!1,dialogAddForm:{id:"",supplier_id:"",rise:"",tax_number:"",category:"",type:"",money:""}}},methods:{getTabledata:function(){var e=this;this.axios.get("/Finance/finance_supplier_invoice_lists").then(function(t){e.tabledata=t.data.supplier_invoice.data,e.currentPage=t.data.supplier_invoice.current_page,e.total=t.data.supplier_invoice.total,e.per_page=t.data.supplier_invoice.per_page,e.last_page=t.data.supplier_invoice.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_supplier_invoice_lists",{page:e}).then(function(e){t.tabledata=e.data.supplier_invoice.data,t.currentPage=e.data.supplier_invoice.current_page,a.close()})},getoptions:function(){var e=this;this.axios.get("/Finance/finance_supplier_invoice_add").then(function(t){e.options=t.data.supplier})},seachName:function(){conlose.log(1)},jine:function(e){console.log(e)},add:function(){this.getoptions(),this.dialogAdd=!0,this.dialogAddForm.id="",this.dialogAddForm.supplier_id="",this.dialogAddForm.rise="",this.dialogAddForm.tax_number="",this.dialogAddForm.category="",this.dialogAddForm.type="",this.dialogAddForm.money=""},deletes:function(e){var t=this;this.axios.post("/Finance/finance_supplier_invoice_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.getTabledata(),t.open(e.data.msg,"success")):t.open(e.data.msg,"error")})},confirm:function(){var e=this;this.axios.post("/Finance/finance_supplier_invoice_add",{supplier_id:this.dialogAddForm.supplier_id,rise:this.dialogAddForm.rise,tax_number:this.dialogAddForm.tax_number,category:this.dialogAddForm.category,type:this.dialogAddForm.type,money:this.dialogAddForm.money}).then(function(t){2e3==t.data.code?(e.getTabledata(),e.open(t.data.msg,"success"),e.dialogAdd=!1):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.getTabledata()}},Jo=Ko,Zo=Object(d["a"])(Jo,Go,Qo,!1,null,"1d875c5f",null),Yo=Zo.exports,Xo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("筛选：")]),a("el-input",{staticStyle:{width:"217px"},model:{value:e.seach,callback:function(t){e.seach=t},expression:"seach"}}),a("el-button",{staticStyle:{"margin-left":"20px"}},[e._v("确认")])],1),a("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"寄送客户数",prop:"customer_count"}}),a("el-table-column",{attrs:{label:"寄送样品数",prop:"product_sku_count"}}),a("el-table-column",{attrs:{label:"寄出日期",prop:"add_time",width:"160"}}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"}}),a("el-table-column",{attrs:{label:"业务员",prop:"user_name"}}),a("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("草稿")]):e._e(),1==t.row.status?a("span",[e._v("等待采购配货")]):e._e(),10==t.row.status?a("span",[e._v("等待财务审核")]):e._e(),20==t.row.status?a("span",[e._v("等待财务审核")]):e._e(),30==t.row.status?a("span",[e._v("等待发货")]):e._e(),40==t.row.status?a("span",[e._v("已经发货")]):e._e(),50==t.row.status?a("span",[e._v("已经收到货")]):e._e(),90==t.row.status?a("span",[e._v("结束")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.updata(t.row)}}},[e._v("查看")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},el=[],tl={data:function(){return{seach:"",tableData:[],currentPage:0,total:0,per_page:0,last_page:0}},methods:Object(w["a"])({},Object(C["b"])("customerList",["triggerReplaceId"]),Object(C["b"])("Tabs",["triggerAddTabs","triggerSetActiveIndex"]),{gettableData:function(){var e=this;this.axios.get("/Finance/finance_customer_sample_lists").then(function(t){e.tableData=t.data.sample.data,e.currentPage=t.data.sample.current_page,e.total=t.data.sample.total,e.per_page=t.data.sample.per_page,e.last_page=t.data.sample.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/finance_customer_sample_lists",{page:e,company_id:this.value,user_name:this.value1,customer_name:this.value2}).then(function(e){t.tableData=e.data.sample.data,t.currentPage=e.data.sample.current_page,t.total=e.data.sample.total,t.per_page=e.data.sample.per_page,t.last_page=e.data.sample.last_page,a.close()})},updata:function(e){this.triggerReplaceId(e.id),this.$router.push({path:"/Finance/finance_customer_sample_lists_details/".concat(e.id),params:{userId:e.id,name:"/Finance/finance_customer_sample_lists_details/".concat(e.id)}});var t={route:"/Finance/finance_customer_sample_lists_details/".concat(e.id),name:"样品审核详情"},a="/Finance/finance_customer_sample_lists_details/".concat(e.id);this.triggerAddTabs(t),this.triggerSetActiveIndex(a)},deletes:function(e){alert(1)},open:function(e,t){this.$message({message:e,type:t})}}),created:function(){this.gettableData()}},al=tl,il=Object(d["a"])(al,Xo,el,!1,null,null,null),rl=il.exports,sl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"beizhu",staticStyle:{overflow:"hidden","margin-top":"20px"}},[a("span",{staticStyle:{float:"left","line-height":"40px","margin-right":"10px","font-weight":"bold"}},[e._v("备注:"+e._s(e.remarks))])]),a("div",{staticClass:"content_box_product"},[a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"图片",width:"100"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"90px",height:"90px"},attrs:{src:e.row.src}})]}}])}),a("el-table-column",{attrs:{label:"产品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name)+e._s(t.row.sku_name))])]}}])}),a("el-table-column",{attrs:{label:"单位",prop:"unit"}}),a("el-table-column",{attrs:{label:"数量",prop:"number"}}),a("el-table-column",{attrs:{label:"成本",prop:"cost_price"}}),a("el-table-column",{attrs:{label:"付款",prop:"payment"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.payment?a("span",[e._v("不用付款")]):e._e(),1==t.row.payment?a("span",[e._v("付款")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"供应商",prop:"supplier_name"}}),a("el-table-column",{attrs:{label:"付款账号",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.receiving_name)+":"+e._s(t.row.receiving_account))])]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remarks"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.remarks,placement:"top"}},[a("el-button",{attrs:{type:"text"}},[e._v("查看")])],1)]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",[e._v("默认")]):e._e(),3==t.row.status?a("span",[e._v("等待付款")]):e._e(),6==t.row.status?a("span",[e._v("付款完成")]):e._e(),9==t.row.status?a("span",[e._v("完成")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.confirm(t.row)}}},[e._v("财务审核")]):e._e(),1==t.row.status?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.confirmCN(t.row)}}},[e._v("出纳审核")]):e._e(),t.row.status>1?a("el-button",{attrs:{type:"text",size:"mini"}},[e._v("审核通过")]):e._e()]}}])})],1)],1),a("div",{staticClass:"generatedAddress"},[a("label",[e._v("地址配货信息")]),a("hr"),e._l(e.fixedAddress,function(t){return a("div",{key:t.id,staticClass:"generatedAddressInner"},[a("div",{staticClass:"generatedAddressInnerLeft"},[a("p",[a("span",[e._v("收货人："+e._s(t.name))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("收货电话："+e._s(t.phone))]),a("span",{staticStyle:{"margin-left":"60px"}},[e._v("付款方式:"+e._s(1==t.payment?"到付":"现付"))]),1==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上门")]):e._e(),2==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:上楼")]):e._e(),3==t.delivery?a("span",{staticStyle:{"margin-left":"20px"}},[e._v("物流方式:自提")]):e._e()]),a("p",{staticStyle:{"margin-top":"10px"}},[a("span",[e._v(e._s(t.province))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.city))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.county))]),a("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.address))])]),a("p",{staticStyle:{"margin-top":"10px"}},[e._v("发货清单：\n              "),e._l(t.product,function(t){return a("span",{key:t.pid,staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.name)+e._s(t.sku_name)+"---数量："+e._s(t.number))])})],2)])])})],2),a("el-dialog",{attrs:{title:"出纳审核",visible:e.Cashierexamine},on:{"update:visible":function(t){e.Cashierexamine=t}}},[a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[e._v(e._s(e.gongyingshang))]),a("p",{staticStyle:{"font-size":"20px",color:"#000"}},[e._v(e._s(e.gongyingshangZH))]),a("p",{staticStyle:{"font-size":"20px",color:"#000","margin-top":"5px"}},[a("span",[e._v("金额：")]),a("span",[e._v(e._s(e.qian)+"￥")])]),a("div",{staticClass:"contract"},[a("label",[e._v("上传打款凭证")]),a("div",{staticClass:"contractInner"},[a("div",{staticClass:"contractInnerLeft"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:"image/jpeg,image/gif,image/png,image/bmp",action:"/File/customer_sample_product_sku_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrlstate,expression:"imageUrlstate"}],staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.deleteimg(t.src)}}})])])}),0)])]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.Cashierexamine=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.CashierSubmission}},[e._v("提 交")])],1)])],1)},ol=[],ll={data:function(){return{remarks:"",tableData:[],fixedAddress:[],supplier:[],supplierPayee:[],gongyingshang:"",gongyingshangZH:"",qian:"",Cashierexamine:!1,id:"",imageUrl:[],imageUrlstate:!1}},methods:Object(w["a"])({},Object(C["b"])("Tabs",["triggerDeleteTabs"]),{confirm:function(e){var t=this;this.axios.post("/Finance/finance_customer_sample_status",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.triggerDeleteTabs(t.$route.path),t.$router.push({path:"/erp/Purchase/finance_customer_sample_lists"})):t.open(e.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})},getcaogao:function(){var e=this;this.axios.get("/Finance/finance_customer_sample_find?id="+this.$route.params.id).then(function(t){e.remarks=t.data.sample.remarks,e.tableData=t.data.product_sku,e.fixedAddress=t.data.customer})},confirmCN:function(e){this.id=e.id,this.Cashierexamine=!0,this.gongyingshang=e.supplier_name,this.gongyingshangZH="".concat(e.receiving_name,":").concat(e.receiving_account),this.qian=Number(e.number)*Number(e.cost_price),this.getimgUrl(e)},handleAvatarSuccess:function(){this.getimgUrl(this.id)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getimgUrl:function(e){var t=this;this.axios.post("/File/file_select",{data_table:"customer_sample_product_sku",class:"temporary_file ",id:e.id}).then(function(e){null!=e.data&&(t.imageUrlstate=!0,t.imageUrl=e.data)})},deleteimg:function(e){var t=this;this.axios.post("/file/customer_order_delete",{src:e,class:"temporary_file "}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.getimgUrl(t.id)):t.open(e.data.msg,"error")})},CashierSubmission:function(){for(var e=this,t=[],a=0;a<this.imageUrl.length;a++){var i=this.imageUrl[a].src;t.push(i)}this.axios.post("/Finance/finance_customer_sample_status",{id:this.id,src:t}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.Cashierexamine=!1,e.triggerDeleteTabs(e.$route.path),e.$router.push({path:"/erp/Purchase/finance_customer_sample_lists"})):e.open(t.data.msg,"error")})}}),created:function(){this.$route.params.id&&this.getcaogao()},watch:{$route:function(e){this.$route.params.id&&this.getcaogao()}}},nl=ll,cl=(i("ce20"),Object(d["a"])(nl,sl,ol,!1,null,"f6fbc29e",null)),dl=cl.exports,ul=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-button",{staticStyle:{"margin-top":"20px"},on:{click:e.add}},[e._v("新增")]),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"金额",prop:"money"}}),a("el-table-column",{attrs:{label:"内容",prop:"remarks"}}),a("el-table-column",{attrs:{label:"审核人",prop:"user_id"}}),a("el-table-column",{attrs:{label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[-2==t.row.status?a("span",[e._v("等待巴长审核")]):e._e(),-1==t.row.status?a("span",[e._v("等待领导审核")]):e._e(),0==t.row.status?a("span",[e._v("等待财务审核")]):e._e(),1==t.row.status?a("span",[e._v("等待出纳付款")]):e._e(),2==t.row.status?a("span",[e._v("结束")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"类型",prop:"type"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1==t.row.type?"入账":"出账"))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"210px"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.status<-1?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.update(t.row)}}},[e._v("修改")]):e._e(),t.row.status<1?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deletes(t.row)}}},[e._v("删除")]):e._e(),t.row.status<3?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.examine(t.row)}}},[e._v("审核")]):e._e()]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.per_page,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"新增和修改",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{attrs:{model:e.Form}},[a("el-form-item",{attrs:{label:"类型","label-width":"90px"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.Form.type,callback:function(t){e.$set(e.Form,"type",t)},expression:"Form.type"}},[e._v("入帐")]),a("el-radio",{attrs:{label:"2"},model:{value:e.Form.type,callback:function(t){e.$set(e.Form,"type",t)},expression:"Form.type"}},[e._v("出账")])],1),a("el-form-item",{attrs:{label:"金额","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.Form.money,callback:function(t){e.$set(e.Form,"money",t)},expression:"Form.money"}})],1),a("el-form-item",{attrs:{label:"内容","label-width":"90px"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{type:"textarea"},model:{value:e.Form.remarks,callback:function(t){e.$set(e.Form,"remarks",t)},expression:"Form.remarks"}})],1),a("el-form-item",{attrs:{label:"上传报销单"}},[a("div",{staticClass:"contract"},[a("div",{staticClass:"contractInner"},[a("div",{staticClass:"contractInnerLeft"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{accept:"image/jpeg,image/gif,image/png,image/bmp",action:"/File/cost_file","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.imageUrlstate,expression:"imageUrlstate"}],staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.deletesImg(t.src)}}})])])}),0)])])]),a("el-form-item",{attrs:{label:"","label-width":"90px"}},[a("el-button",{on:{click:e.comfirm}},[e._v("提交")])],1)],1)],1),a("el-dialog",{attrs:{title:"审核",visible:e.Auditor},on:{"update:visible":function(t){e.Auditor=t}}},[a("p",{staticStyle:{"font-size":"18px","font-weight":"bold","margin-bottom":"10px"}},[e._v("类型："+e._s(1==e.AuditorForm.type?"入账":"出账"))]),a("p",{staticStyle:{"font-size":"18px","font-weight":"bold","margin-bottom":"10px"}},[e._v("金额："+e._s(e.AuditorForm.money)+"￥")]),a("p",{staticStyle:{"font-size":"18px","font-weight":"bold","margin-bottom":"10px"}},[e._v("申请人："+e._s(e.AuditorForm.user))]),a("p",{staticStyle:{"font-size":"18px","font-weight":"bold","margin-bottom":"10px"}},[e._v("内容："+e._s(e.AuditorForm.content))]),a("div",{staticClass:"img"},e._l(e.imageUrl,function(t){return a("div",{key:t.src,staticClass:"imginner"},[a("img",{staticClass:"avatar",attrs:{src:t.src}}),a("div",{staticClass:"avatars"},[a("i",{staticClass:"el-icon-zoom-in",staticStyle:{"font-size":"30px","margin-top":"75px","margin-left":"75px",color:"#FFF"},on:{click:function(a){return e.big(t.src)}}})])])}),0),a("el-button",{staticStyle:{"margin-top":"20px"},on:{click:e.shenhe}},[e._v("审核通过")])],1),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},pl=[],ml={data:function(){var e;return e={tableData:[],currentPage:0,total:0,per_page:0,last_page:0,dialogVisible:!1,Form:{type:"",money:"",remarks:"",id:""},imageUrl:[],imageUrlstate:!1,ID:"",Auditor:!1},Object(k["a"])(e,"dialogVisible",!1),Object(k["a"])(e,"dialogImageUrl",""),Object(k["a"])(e,"AuditorForm",{type:"",money:"",user:"",content:""}),e},methods:{gettableData:function(){var e=this;this.axios.get("/Finance/cost_lists").then(function(t){e.tableData=t.data.data,e.currentPage=t.data.current_page,e.total=t.data.total,e.per_page=t.data.per_page,e.last_page=t.data.last_page})},handleCurrentChange:function(e){var t=this,a=this.$loading({lock:!0,text:"拼命加载中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.axios.post("/Finance/cost_lists",{page:e}).then(function(e){t.tableData=e.data.data,t.currentPage=e.data.current_page,t.total=e.data.total,t.per_page=e.data.per_page,t.last_page=e.data.last_page,a.close()})},add:function(){this.dialogVisible=!0,this.Form.money="",this.Form.remarks="",this.Form.type="",this.Form.id=""},update:function(e){this.dialogVisible=!0,this.Form.money=e.money,this.Form.remarks=e.remarks,this.Form.type=String(e.type),this.Form.id=e.id,this.getimgUrl(e.id)},deletes:function(e){var t=this;this.axios.post("/Finance/cost_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.dialogVisible=!1,t.gettableData()):t.open(e.data.msg,"error")})},examine:function(e){this.Auditor=!0,this.ID=e.id,this.getimgUrl(e.id),this.AuditorForm.type=e.type,this.AuditorForm.money=e.money,this.AuditorForm.user=e.user_name,this.AuditorForm.content=e.remarks},big:function(e){this.dialogVisible=!0,this.dialogImageUrl=e},comfirm:function(){var e=this;""==this.Form.id?this.axios.post("/Finance/cost_add",{money:this.Form.money,remarks:this.Form.remarks,type:this.Form.type,src:this.imageUrl}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.dialogVisible=!1,e.gettableData()):e.open(t.data.msg,"error")}):this.axios.post("/Finance/cost_update",{money:this.Form.money,remarks:this.Form.remarks,type:this.Form.type,id:this.Form.id,src:this.imageUrl}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.dialogVisible=!1,e.gettableData()):e.open(t.data.msg,"error")})},deletesImg:function(e){var t=this;this.axios.post("/Finance/cost_delete",{id:e.id}).then(function(e){2e3==e.data.code?(t.open(e.data.msg,"success"),t.dialogVisible=!1,t.gettableData()):t.open(e.data.msg,"error")})},handleAvatarSuccess:function(){this.getimgUrl(0)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传图片必须是JPG/PNG格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},getimgUrl:function(e){var t=this;this.axios.post("/File/file_select",{data_table:"cost",class:"temporary_file ",id:e}).then(function(e){null!=e.data&&(t.imageUrlstate=!0,t.imageUrl=e.data)})},shenhe:function(){var e=this;this.axios.post("/Finance/cost_status",{id:this.ID}).then(function(t){2e3==t.data.code?(e.open(t.data.msg,"success"),e.dialogVisible=!1,e.gettableData()):e.open(t.data.msg,"error")})},open:function(e,t){this.$message({message:e,type:t})}},created:function(){this.gettableData()}},hl=ml,fl=(i("3302"),Object(d["a"])(hl,ul,pl,!1,null,"635381e0",null)),_l=fl.exports,gl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("p",[e._v("供应商售后款")]),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"供应商"}}),a("el-table-column",{attrs:{label:"供应商地址"}}),a("el-table-column",{attrs:{label:"款项"}}),a("el-table-column",{attrs:{label:"状态"}}),a("el-table-column",{attrs:{label:"操作"}})],1)],1)},bl=[],vl={data:function(){return{tableData:[]}},methods:{},created:function(){}},yl=vl,xl=Object(d["a"])(yl,gl,bl,!1,null,"1d915dd5",null),kl=xl.exports,wl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"head_box"},[a("label",[e._v("选择日期：")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}}),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.confirm}},[e._v("确定")])],1),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:"","show-summary":""}},[a("el-table-column",{attrs:{prop:"id",label:"部门",width:"180"}}),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),a("el-table-column",{attrs:{prop:"amount1",sortable:"",label:"一级机构"}}),a("el-table-column",{attrs:{prop:"amount2",sortable:"",label:"二级机构"}}),a("el-table-column",{attrs:{prop:"amount3",sortable:"",label:"三级机构"}}),a("el-table-column",{attrs:{label:"合计",sortable:"",prop:"amount4"}})],1)],1)},Sl=[],Al={data:function(){return{tableData:[{id:"12987122",name:"王小虎",amount1:"234",amount2:"3.2",amount3:10,amount4:Number(10)+Number(3.2)+Number(234)},{id:"12987123",name:"王小虎",amount1:"165",amount2:"4.43",amount3:12,amount4:Number(12)+Number(4.43)+Number(165)},{id:"12987124",name:"王小虎",amount1:"324",amount2:"1.9",amount3:9,amount4:Number(9)+Number(1.9)+Number(324)},{id:"12987125",name:"王小虎",amount1:"621",amount2:"2.2",amount3:17,amount4:Number(621)+Number(2.2)+Number(17)},{id:"12987126",name:"王小虎",amount1:"539",amount2:"4.1",amount3:15,amount4:Number(539)+Number(4.1)+Number(15)}],times:""}},methods:{getTableData:function(){this.axios.get("/report.User/sales_rank").then(function(e){})},confirm:function(){window.location.href="https://www.baidu.com"}},created:function(){this.getTableData()}},Cl=Al,Fl=Object(d["a"])(Cl,wl,Sl,!1,null,"8136c65c",null),Pl=Fl.exports,Dl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{ref:"myChart",attrs:{id:"myChart"}}),a("div",{ref:"myChart1",attrs:{id:"myChart1"}}),a("div",{ref:"myChart2",attrs:{id:"myChart2"}})])},$l=[],Il=i("313e"),ql=i.n(Il),Ol={data:function(){return{data:"",data1:"",dataName:"",datadep:"",datadepName:""}},methods:{getdata:function(){var e=this,t=ql.a.init(this.$refs.myChart),a=ql.a.init(this.$refs.myChart1),i=ql.a.init(this.$refs.myChart2);this.axios.get("/report.User/order_count").then(function(r){var s=[],o=[],l=[],n=[],c=[];for(var d in r.data.week){for(var u=r.data.week[d],p="".concat(u[0].date,"至").concat(u[u.length-1].date),m={name:p,type:"line",stack:"".concat(p,"订单数")},h={name:p,type:"line",stack:"".concat(p,"销售金额")},f=[],_=[],g=0;g<u.length;g++)f.push(u[g].number),_.push(u[g].total_price);m["data"]=f,h["data"]=_,s.push(m),o.push(h),n.push(p)}for(var b in r.data.company){var v=r.data.company[b],y=v.dep_title,x={name:y,type:"line",stack:"".concat(y,"订单数"),data:v.number};l.push(x),c.push(y)}e.data=s,e.data1=o,e.dataName=n,e.datadep=l,e.datadepName=c,e.draw("订单笔数",t,e.dataName,e.data),e.draw("销售金额",a,e.dataName,e.data1),e.draw("部门订单",i,e.datadepName,e.datadep)})},draw:function(e,t,a,i){t.setOption({title:{text:e},tooltip:{trigger:"axis"},legend:{data:a},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},toolbox:{feature:{saveAsImage:{}}},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:i})}},created:function(){var e=this;this.$nextTick(function(){e.getdata()})},watch:{$route:function(e){var t=this;this.$nextTick(function(){t.getdata()})}}},Nl=Ol,zl=(i("ca5b"),Object(d["a"])(Nl,Dl,$l,!1,null,"77773019",null)),Tl=zl.exports,jl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box",staticStyle:{"padding-bottom":"20px"}},[a("div",{staticClass:"head_box"},[a("label",[e._v("选择日期：")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","value-format":"timestamp","end-placeholder":"结束日期"},model:{value:e.shijian,callback:function(t){e.shijian=t},expression:"shijian"}}),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.seach}},[e._v("确定")])],1),e._l(e.tableData,function(e){return a("el-table",{key:e.dep_name,staticClass:"elTableB",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.count,border:"","show-summary":""}},[a("el-table-column",{attrs:{label:e.dep_name,prop:"name",width:"180"}}),a("el-table-column",{attrs:{prop:"yiji",sortable:"",label:"一级机构"}}),a("el-table-column",{attrs:{prop:"erji",sortable:"",label:"二级机构"}}),a("el-table-column",{attrs:{prop:"sanji",sortable:"",label:"三级机构"}}),a("el-table-column",{attrs:{prop:"siji",sortable:"",label:"四级机构"}}),a("el-table-column",{attrs:{prop:"user_total",sortable:"",label:"合计"}})],1)})],2)},Ul=[],Ml={data:function(){return{tableData:[],shijian:[]}},methods:{gettableData:function(){var e=this;this.axios.get("/report.Customer/customer_visit").then(function(t){e.tableData=t.data})},seach:function(){var e=this;0==this.shijian.length?this.axios.post("/report.Customer/customer_visit",{start_time:"",end_time:""}).then(function(t){e.tableData=t.data}):this.axios.post("/report.Customer/customer_visit",{start_time:this.shijian[0]/1e3,end_time:this.shijian[1]/1e3}).then(function(t){e.tableData=t.data})}},created:function(){this.gettableData()}},El=Ml,Rl=(i("21c0"),Object(d["a"])(El,jl,Ul,!1,null,null,null)),Ll=Rl.exports,Hl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box",staticStyle:{"padding-bottom":"20px"}},[a("div",{staticClass:"head_box"},[a("label",[e._v("选择日期：")]),a("el-date-picker",{attrs:{"value-format":"timestamp",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.shijian,callback:function(t){e.shijian=t},expression:"shijian"}}),a("el-button",{staticStyle:{"margin-left":"20px"},on:{click:e.seach}},[e._v("确定")])],1),e._l(e.tableData,function(e){return a("el-table",{key:e.dep_name,staticClass:"elTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.count,border:"","show-summary":""}},[a("el-table-column",{attrs:{label:e.dep_name,width:"180",prop:"name"}}),a("el-table-column",{attrs:{prop:"yiji",sortable:"",label:"一级机构",height:"30"}}),a("el-table-column",{attrs:{prop:"erji",sortable:"",label:"二级机构"}}),a("el-table-column",{attrs:{prop:"sanji",sortable:"",label:"三级机构"}}),a("el-table-column",{attrs:{prop:"siji",sortable:"",label:"四级机构"}}),a("el-table-column",{attrs:{prop:"user_total",sortable:"",label:"合计"}})],1)})],2)},Bl=[],Wl={data:function(){return{tableData:[],shijian:[]}},methods:{gettableData:function(){var e=this;this.axios.get("/report.Customer/customer_increments").then(function(t){e.tableData=t.data})},seach:function(){var e=this;0==this.shijian.length?this.axios.post("/report.Customer/customer_increments",{start_time:"",end_time:""}).then(function(t){e.tableData=t.data}):this.axios.post("/report.Customer/customer_increments",{start_time:this.shijian[0]/1e3,end_time:this.shijian[1]/1e3}).then(function(t){e.tableData=t.data})}},created:function(){this.gettableData()}},Vl=Wl,Gl=(i("8ddb"),Object(d["a"])(Vl,Hl,Bl,!1,null,null,null)),Ql=Gl.exports,Kl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"warning"},on:{click:e.add}},[e._v("添加分组")]),a("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"title",label:"名称"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("修改")])]}}])})],1),a("el-dialog",{attrs:{title:"添加分组",visible:e.dialogFormVisible,width:"70%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"分组名字"}},[a("el-input",{staticStyle:{width:"217px"},attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._l(e.shuju,function(t,i){return a("el-form-item",{key:t.id},[a("h4",[e._v("规则--"+e._s(t.title))]),void 0==t.rule?e._l(t.child,function(t){return a("div",{key:t.id},[a("h5",{staticStyle:{"margin-left":"10px"}},[e._v("规则--"+e._s(t.title))]),a("el-checkbox-group",{model:{value:e.form.checkList,callback:function(t){e.$set(e.form,"checkList",t)},expression:"form.checkList"}},e._l(t.rule,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.title))])}),1)],1)}):a("el-checkbox-group",{model:{value:e.form.checkList,callback:function(t){e.$set(e.form,"checkList",t)},expression:"form.checkList"}},e._l(e.shuju[i].rule,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.title))])}),1)],2)}),a("el-form-item",{attrs:{label:"是否开启"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},[e._v("开启")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},[e._v("关闭")])],1),a("el-form-item",{attrs:{label:"排序"}},[a("el-input",{staticStyle:{width:"217px"},model:{value:e.form.rank,callback:function(t){e.$set(e.form,"rank",t)},expression:"form.rank"}})],1)],2),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.tijiao}},[e._v("确 定")])],1)],1)],1)},Jl=[],Zl={data:function(){return{shuju:"",dialogFormVisible:!1,tableData:[],form:{id:"",name:"",checkList:[],radio:"1",rank:""}}},methods:{add:function(){this.form.name="",this.form.radio="",this.form.rank="",this.form.checkList=[],this.form.id=null,this.qing(),this.dialogFormVisible=!0},handleClick:function(e){this.form.name=e.title,this.form.radio=String(e.status),this.form.rank=e.rank,this.form.id=e.id;var t=e.rules.split(","),a=[];t.forEach(function(e){a.push(+e)}),this.form.checkList=a,this.qing(e.id),this.dialogFormVisible=!0},qing:function(e){var t=this;this.axios.get("/system/auth_group_edit?id="+e).then(function(e){t.shuju=e.data.node,console.log(e.data.node)})},tijiao:function(){var e=this;this.axios.post("/System/auth_group_edit",{id:this.form.id,title:this.form.name,status:this.form.radio,rank:this.form.rank,rules:this.form.checkList}).then(function(t){"200"==t.data.code?(e.open(),e.shu(),e.dialogFormVisible=!1):e.open1(t.data.msg)})},open:function(){this.$message({message:"修改成功",type:"success"})},open1:function(e){this.$message({message:e,type:"error"})},shu:function(){var e=this;this.axios.get("/System/auth_group").then(function(t){e.tableData=t.data})}},created:function(){this.shu()},watch:{$route:function(e){this.shu()}}},Yl=Zl,Xl=(i("16b0"),Object(d["a"])(Yl,Kl,Jl,!1,null,"6ce3241b",null)),en=Xl.exports,tn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"headbox"},[a("el-button",{attrs:{type:"warning"},on:{click:e.addgroup1}},[e._v("添加分组")]),a("el-button",{attrs:{type:"warning"},on:{click:e.addrule}},[e._v("添加规则")])],1),a("div",{staticClass:"contentbox"},e._l(e.shuju,function(t){return a("div",{key:t.id,staticClass:"contentboxInner"},[a("div",{staticClass:"contentboxInnerHead"},[a("p",{staticStyle:{float:"left"}},[e._v(e._s(t.title)+" "+e._s(t.name))]),a("p",{staticStyle:{float:"left"}},[e._v(e._s(1==t.status?"开启中":"关闭"))]),t.child[0]?[t.child[0].menu?[a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"warning"},on:{click:function(a){return e.add(t)}}},[e._v("添加规则")])]:[a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"warning"},on:{click:function(a){return e.addgroup(t)}}},[e._v("添加分组")])]]:[a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"warning"},on:{click:function(a){return e.addgroup(t)}}},[e._v("添加分组")]),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"warning"},on:{click:function(a){return e.add(t)}}},[e._v("添加规则")])],a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"warning"},on:{click:function(a){return e.xiugai_x(t)}}},[e._v("修改")]),a("el-button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"danger"},on:{click:function(a){return e.edit(t)}}},[e._v("删除")])],2),t.child!==[]?a("div",e._l(t.child,function(t){return a("div",{key:t.id,staticClass:"contentboxInnerContent"},[a("div",{staticClass:"contentboxInnerContentInner"},[a("el-card",{staticClass:"box-card",staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"clearfix",staticStyle:{overflow:"hidden"},attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.title))]),a("br"),a("span",{staticStyle:{"font-size":"14px"}},[e._v(e._s(t.name))]),void 0==t.menu?a("span",{staticStyle:{"margin-left":"50px"}}):1==t.menu?a("span",{staticStyle:{"margin-left":"50px"}},[e._v("菜单")]):2==t.menu?a("span",{staticStyle:{"margin-left":"50px"}},[e._v("按钮")]):e._e(),a("span",{staticStyle:{"font-size":"13px"}},[e._v(e._s(1==t.status?"开启中":"关闭"))]),1==t.menu?a("div",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"warning",size:"small"},on:{click:function(a){return e.xiugai(t)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.edit(t)}}},[e._v("删除")]),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.add2(t)}}},[e._v("添加按钮")])],1):a("div",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"warning",size:"small"},on:{click:function(a){return e.xiugai_x(t)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.edit(t)}}},[e._v("删除")]),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.add(t)}}},[e._v("添加规则")])],1)]),null!==t.child?a("div",e._l(t.child,function(t){return a("div",{key:t.id,staticClass:"item"},[a("div",{staticClass:"itemChildA"},[a("span",[e._v(e._s(t.title)+" ")]),a("br"),a("span",[e._v(" "+e._s(t.name))]),void 0==t.menu?a("span",{staticStyle:{"margin-left":"50px"}}):1==t.menu?a("span",{staticStyle:{"margin-left":"50px"}},[e._v("菜单")]):2==t.menu?a("span",{staticStyle:{"margin-left":"50px"}},[e._v("按钮")]):e._e(),a("span",{staticStyle:{"font-size":"11px"}},[e._v(e._s(1==t.status?"开启中":"关闭"))]),1==t.menu?a("div",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{"margin-left":"58px"},attrs:{type:"warning",size:"small"},on:{click:function(a){return e.xiugai(t)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.edit(t)}}},[e._v("删除")]),a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.add2(t)}}},[e._v("添加按钮")])],1):a("div",{staticStyle:{float:"right"}},[a("el-button",{staticStyle:{"margin-left":"58px"},attrs:{type:"warning",size:"small"},on:{click:function(a){return e.xiugai(t)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.edit(t)}}},[e._v("删除")])],1)]),null!==t.child?a("div",e._l(t.child,function(i){return a("div",{key:i.id,staticClass:"itemChildB"},[a("span",[e._v(e._s(i.title)+" ")]),a("br"),a("span",[e._v(" "+e._s(i.name))]),a("span",{staticStyle:{"margin-left":"58px"}},[e._v(e._s(1==i.menu?"菜单":"按钮")),a("span",{staticStyle:{"font-size":"11px"}},[e._v(e._s(1==t.status?"开启中":"关闭"))])]),a("el-button",{staticStyle:{"margin-left":"58px"},attrs:{type:"warning",size:"small"},on:{click:function(t){return e.xiugai(i)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.edit(i)}}},[e._v("删除")])],1)}),0):e._e()])}),0):e._e()])],1)])}),0):e._e()])}),0),a("el-dialog",{attrs:{title:"添加或修改规则",visible:e.rule},on:{"update:visible":function(t){e.rule=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"标题","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"规则","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.form.condition,callback:function(t){e.$set(e.form,"condition",t)},expression:"form.condition"}})],1),a("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.form.rank,callback:function(t){e.$set(e.form,"rank",t)},expression:"form.rank"}})],1),a("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:e.form.menu},model:{value:e.form.menu,callback:function(t){e.$set(e.form,"menu",t)},expression:"form.menu"}},[e._v(e._s(1==e.form.menu?"菜单":"按钮"))])],1),a("el-form-item",{attrs:{label:"所有权限","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.auth,callback:function(t){e.$set(e.form,"auth",t)},expression:"form.auth"}},[e._v("是")]),a("el-radio",{attrs:{label:"0"},model:{value:e.form.auth,callback:function(t){e.$set(e.form,"auth",t)},expression:"form.auth"}},[e._v("否")])],1),a("el-form-item",{attrs:{label:"是否开启","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("开启")]),a("el-radio",{attrs:{label:"0"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("关闭")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rule=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.tijiao}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加或修改分组",visible:e.group},on:{"update:visible":function(t){e.group=t}}},[a("el-form",{attrs:{model:e.formGroup}},[a("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.formGroup.name,callback:function(t){e.$set(e.formGroup,"name",t)},expression:"formGroup.name"}})],1),a("el-form-item",{attrs:{label:"标题","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.formGroup.title,callback:function(t){e.$set(e.formGroup,"title",t)},expression:"formGroup.title"}})],1),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.formGroup.remark,callback:function(t){e.$set(e.formGroup,"remark",t)},expression:"formGroup.remark"}})],1),a("el-form-item",{attrs:{label:"是否开启","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:e.formGroup.status,callback:function(t){e.$set(e.formGroup,"status",t)},expression:"formGroup.status"}},[e._v("开启")]),a("el-radio",{attrs:{label:"0"},model:{value:e.formGroup.status,callback:function(t){e.$set(e.formGroup,"status",t)},expression:"formGroup.status"}},[e._v("关闭")])],1),a("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.formGroup.rank,callback:function(t){e.$set(e.formGroup,"rank",t)},expression:"formGroup.rank"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.group=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.btn}},[e._v("确 定")])],1)],1)],1)},an=[],rn={data:function(){return{shuju:[],form:{id:"",node_id:"",name:"",title:"",condition:"",rank:"",menu:"",pid:"",auth:"",status:""},formGroup:{name:"",title:"",rank:"",status:"",remark:"",pid:""},rule:!1,group:!1,formLabelWidth:"120px"}},methods:{xiugai:function(e){this.rule=!0,console.log(e),this.form.id=e.id,void 0==e.node_id?this.form.node_id=e.id:this.form.node_id=e.node_id,this.form.name=e.name,this.form.title=e.title,this.form.condition=String(e.condition),this.form.rank=e.rank,this.form.menu=String(e.menu),this.form.pid=String(e.pid),this.form.status=String(e.status),this.form.auth=String(e.auth)},edit:function(e){var t=this;void 0==e.node_id?this.axios.post("/System/auth_node_delete",{id:e.id}).then(function(e){"2000"==e.data.code?(t.open(),t.qing(),t.rule=!1):t.open1(e.data.msg)}):this.axios.post("/System/auth_rule_delete",{id:e.id}).then(function(e){"2000"==e.data.code?(t.open(),t.qing(),t.rule=!1):t.open1(e.data.msg)})},add:function(e){this.rule=!0,this.form.id="",this.form.node_id=e.id,this.form.name="",this.form.title="",this.form.condition="",this.form.rank="0",this.form.menu="1",this.form.pid=String(e.id),this.form.status="1",this.form.auth="0"},add2:function(e){this.rule=!0,this.form.id="",this.form.node_id=e.node_id,this.form.name="",this.form.title="",this.form.condition="",this.form.rank="0",this.form.menu="2",this.form.pid=String(e.id),this.form.status="1",this.form.auth="0"},tijiao:function(){var e=this;void 0==this.form.node_id?this.axios.post("/System/auth_node_edit",{id:this.form.id,node_id:this.form.node_id,name:this.form.name,title:this.form.title,condition:this.form.condition,rank:this.form.rank,menu:this.form.menu,pid:this.form.pid,auth:this.form.auth,status:this.form.status}).then(function(t){"2000"==t.data.code?(e.open(),e.qing(),e.rule=!1):e.open1(t.data.msg)}):this.form.node_id!=this.form.id&&void 0==this.form.node_id||this.axios.post("/System/auth_rule_edit",{id:this.form.id,node_id:this.form.node_id,name:this.form.name,title:this.form.title,condition:this.form.condition,rank:this.form.rank,menu:this.form.menu,pid:this.form.pid,auth:this.form.auth,status:this.form.status}).then(function(t){"2000"==t.data.code?(e.open(),e.qing(),e.rule=!1):e.open1(t.data.msg)})},xiugai_x:function(e){this.group=!0,this.formGroup.id=e.id,this.formGroup.pid=e.pid,this.formGroup.name=e.name,this.formGroup.title=e.title,this.formGroup.remark=e.remark,this.formGroup.rank=String(e.rank),this.formGroup.status=String(e.status)},btn:function(){var e,t=this;e=null==this.formGroup.pid?0:this.formGroup.pid,this.axios.post("/System/auth_node_edit",{id:this.formGroup.id,name:this.formGroup.name,title:this.formGroup.title,remark:this.formGroup.remark,rank:this.formGroup.rank,status:this.formGroup.status,pid:e}).then(function(e){"2000"==e.data.code?(t.open(),t.qing(),t.group=!1):t.open1(e.data.msg)})},updatemenus:function(){this.axios.get("/Index/menu").then(function(e){var t=e.data;console.log(t)})},addrule:function(){this.rule=!0,this.form.id="",this.form.node_id=void 0,this.form.name="",this.form.title="",this.form.condition="",this.form.rank="0",this.form.menu="",this.form.pid="",this.form.status="",this.form.auth=""},addgroup1:function(){this.group=!0,this.formGroup.name="",this.formGroup.title="",this.formGroup.rank="",this.formGroup.status="",this.formGroup.remark="",this.formGroup.pid=""},addgroup:function(e){this.group=!0,this.formGroup.name="",this.formGroup.title="",this.formGroup.rank="",this.formGroup.status="",this.formGroup.remark="",this.formGroup.pid=e.id},qing:function(){var e=this;this.axios.get("/System/auth_rule").then(function(t){e.shuju=t.data.node})},open:function(){this.$message({message:"修改成功",type:"success"})},open1:function(e){this.$message({message:e,type:"error"})}},created:function(){var e=this;this.$nextTick(function(){e.qing()})},watch:{$route:function(e){var t=this;this.$nextTick(function(){t.qing()})}}},sn=rn,on=(i("ce2d"),Object(d["a"])(sn,tn,an,!1,null,"644e0a8c",null)),ln=on.exports;s["default"].use(m["a"]);var nn=new m["a"]({mode:"hash",base:"/admin/",routes:[{path:"/login",name:"Login",component:v},{path:"/",name:"Index",component:L,redirect:"/sy",meta:{requireAuth:!0,title:"Apptab"},children:[{path:"/sy",name:"首页",component:Q,meta:{requireAuth:!0}},{path:"/oa/User/user_lists",name:"员工查询",component:ee,meta:{requireAuth:!0,title:"user_lists"}},{path:"/oa/User/user_update/:id",name:"员工信息修改",component:oe,meta:{requireAuth:!0,title:"user_update"}},{path:"/oa/User/dep_select",name:"部门管理",component:pe,meta:{requireAuth:!0,title:"dep_select"}},{path:"/oa/User/firm_select",name:"公司列表",component:be,meta:{requireAuth:!0,title:"firm_select"}},{path:"/oa/Days/leave_select",name:"请假外出",component:Se,meta:{requireAuth:!0,title:"leave_select"}},{path:"/oa/Days/add",name:"发起申请",component:$e,meta:{requireAuth:!0,title:"add"}},{path:"/oa/Days/task_select",name:"任务列表",component:Te,meta:{requireAuth:!0,title:"task_select"}},{path:"/oa/Days/task_add/:id",name:"任务发起/修改",component:Le,meta:{requireAuth:!0,title:"task_add"}},{path:"/CRM/Customer/customer_center",name:"客户中心",component:Qe,meta:{requireAuth:!0,title:"customer_center"}},{path:"/CRM/Customer/customer_list",name:"客户列表",component:et,meta:{requireAuth:!0,title:"customer_list"}},{path:"/CRM/Customer/lianxi/:id",name:"联系记录",component:ot,meta:{requireAuth:!0,title:"lianxi"}},{path:"/CRM/Customer/gengxin/:id",name:"更新记录",component:pt,meta:{requireAuth:!0,title:"gengxin"}},{path:"/CRM/Customer/dingdan/:id",name:"订单详情",component:St,meta:{requireAuth:!0,title:"dingdan"}},{path:"/CRM/Customer/address/:id",name:"收货地址",component:bt,meta:{requireAuth:!0,title:"address"}},{path:"/CRM/Customer/see/:id",name:"查看客户",component:$t,meta:{requireAuth:!0,title:"see"}},{path:"/crm/Customer/customer_add",name:"新增客户",component:Lt,meta:{requireAuth:!0,title:"added"}},{path:"/crm/Customer/company_list",name:"企业列表",component:Tt,meta:{requireAuth:!0,title:"company_list"}},{path:"/crm/Customer/company_drawee_lists",name:"企业付款人",component:Qt,meta:{requireAuth:!0,title:"company_drawee_lists"}},{path:"/crm/Order/order_add",name:"添加订单",component:oa,meta:{requireAuth:!0,title:"order"}},{path:"/crm/Order/order_list",name:"订单列表",component:Sa,meta:{requireAuth:!0,title:"order_list"}},{path:"/crm/Order/editOrder/:id",name:"修改订单",component:pa,meta:{requireAuth:!0,title:"editOrder"}},{path:"/crm/Order/seeOrder/:id",name:"查看订单",component:ba,meta:{requireAuth:!0,title:"seeOrder"}},{path:"/crm/Order/afterSale/:id",name:"售后",component:$a,meta:{requireAuth:!0,title:"afterSale"}},{path:"/crm/Order/order_receivables_lists",name:"认款列表",component:La,meta:{requireAuth:!0,title:"order_receivables_lists"}},{path:"/crm/Order/order_receivables_lists_details/:id",name:"认款详情",component:Qa,meta:{requireAuth:!0,title:"order_receivables_lists_details"}},{path:"/CRM/Order/invoice_list",name:"发票列表",component:Ta,meta:{requireAuth:!0,title:"invoice_list"}},{path:"/crm/Order/order_receivables_see/:id",name:"查看认款详情",component:ei,meta:{requireAuth:!0,title:"order_receivables_see"}},{path:"/crm/Sample/sample_add",name:"寄出样品",component:oi,meta:{requireAuth:!0,title:"sample_add"}},{path:"/crm/Sample/sample_lists",name:"寄样列表",component:pi,meta:{requireAuth:!0,title:"sample_lists"}},{path:"/crm/Sample/updata_sample/:id",name:"样品修改",component:bi,meta:{requireAuth:!0,title:"updata_sample"}},{path:"/crm/Sample/seeSample/:id",name:"样品查看",component:Si,meta:{requireAuth:!0,title:"seeSample"}},{path:"/erp/Purchase/purchase_sample_lists",name:"样品采购列表",component:cs,meta:{requireAuth:!0,title:"purchase_sample_lists"}},{path:"/erp/Purchase/sample_modification/:id",name:"样品采购修改",component:fs,meta:{requireAuth:!0,title:"sample_modification"}},{path:"/erp/Purchase/purchase_order_list",name:"采购订单列表",component:Fr,meta:{requireAuth:!0,title:"purchase_order_list"}},{path:"/erp/Purchase/Purchaseorder/:id",name:"采购详情",component:Or,meta:{requireAuth:!0,title:"Purchaseorder"}},{path:"/erp/Purchase/seePurchase/:id",name:"采购查看",component:Mr,meta:{requireAuth:!0,title:"seePurchase"}},{path:"/erp/Purchase/purchase_product_stockup_supplier_lists",name:"采购备货",component:Wr,meta:{requireAuth:!0,title:"purchase_product_stockup_supplier_lists"}},{path:"/erp/Purchase/purchase_order_after_sales_lists",name:"订单售后",component:Zr,meta:{requireAuth:!0,title:"purchase_order_after_sales_lists"}},{path:"/erp/Purchase/afterSales_details/:id",name:"售后详情",component:is,meta:{requireAuth:!0,title:"afterSales_details"}},{path:"/erp/Product/product_list",name:"产品列表",component:$i,meta:{requireAuth:!0,title:"product_list"}},{path:"/erp/Products/external_warehouse",name:"外部仓库",component:Ti,meta:{requireAuth:!0,title:"external_warehouse"}},{path:"/erp/Product/product_add",name:"添加产品",component:Bi,meta:{requireAuth:!0,title:"product_add"}},{path:"/erp/Product/product_update/:id",name:"修改产品",component:Ji,meta:{requireAuth:!0,title:"product_update"}},{path:"/erp/Product/product_class_list",name:"产品分类",component:ir,meta:{requireAuth:!0,title:"product_class_list"}},{path:"/erp/Product/product_product_stock_lists",name:"备货申请",component:cr,meta:{requireAuth:!0,title:"product_product_stock_lists"}},{path:"/erp/Product/product_inventory_lists",name:"产品库存",component:fr,meta:{requireAuth:!0,title:"product_inventory_lists"}},{path:"/erp/supplier/supplier_list",name:"供应商列表",component:xr,meta:{requireAuth:!0,title:"supplier_list"}},{path:"/erp/Delivery/delivery_order_list",name:"发货列表",component:xs,meta:{requireAuth:!0,title:"delivery_order_list"}},{path:"/erp/Delivery/deliver/:supplier_id/:customer_order_id/:customer_order_purchase_id",name:"发货",component:Fs,meta:{requireAuth:!0,title:"deliver"}},{path:"/erp/Delivery/Track/:supplier_id/:customer_order_id/:customer_order_purchase_id",name:"订单跟踪",component:Ms,meta:{requireAuth:!0,title:"Track"}},{path:"/Finance/cost_lists",name:"费用支出",component:_l,meta:{requireAuth:!0,title:"cost_lists"}},{path:"/Finance/finance_order_audit_list",name:"订单审核",component:Ws,meta:{requireAuth:!0,title:"finance_order_audit_list"}},{path:"/Finance/auditDetails/:id",name:"订单审核详情",component:Zs,meta:{requireAuth:!0,title:"auditDetails"}},{path:"/Finance/finance_order_advance_charge_list",name:"采购预付款",component:io,meta:{requireAuth:!0,title:"finance_order_advance_charge_list"}},{path:"/Finance/finance_order_express_cost_list",name:"运费预付款",component:co,meta:{requireAuth:!0,title:"finance_order_express_cost_list"}},{path:"/Finance/finance_order_after_sales_list",name:"售后费用审核",component:_o,meta:{requireAuth:!0,title:"finance_order_after_sales_list"}},{path:"/Finance/finance_invoice_list",name:"开票列表",component:ko,meta:{requireAuth:!0,title:"finance_invoice_list"}},{path:"/Finance/finance_receivables_lists",name:"财务收入账款",component:Po,meta:{requireAuth:!0,title:"financial_receivables_lists"}},{path:"/Finance/payee_lists",name:"公司收款账号",component:No,meta:{requireAuth:!0,title:"payee_lists"}},{path:"/Finance/finance_order_extra_list",name:"额外费用审核",component:Eo,meta:{requireAuth:!0,title:"finance_order_extra_list"}},{path:"/Finance/finance_product_stockup_supplier_lists",name:"备货审核",component:Vo,meta:{requireAuth:!0,title:"finance_product_stockup_supplier_lists"}},{path:"/Finance/finance_supplier_invoice_lists",name:"供应商发票记录",component:Yo,meta:{requireAuth:!0,title:"finance_supplier_invoice_lists"}},{path:"/Finance/finance_customer_sample_lists",name:"样品费用审核",component:rl,meta:{requireAuth:!0,title:"finance_customer_sample_lists"}},{path:"/Finance/finance_customer_sample_lists_details/:id",name:"样品审核详情",component:dl,meta:{requireAuth:!0,title:"finance_customer_sample_lists_details"}},{path:"/Finance/finance_supplier_after_sales_list",name:"供应商售后款",component:kl,meta:{requireAuth:!0,title:"finance_supplier_after_sales_list"}},{path:"/report/User/sales_rank",name:"销售排名",component:Pl,meta:{requireAuth:!0,title:"sales_rank"}},{path:"/report/User/order_count",name:"订单统计",component:Tl,meta:{requireAuth:!0,title:"order_count"}},{path:"/report/Customer/customer_visit",name:"拜访量统计",component:Ll,meta:{requireAuth:!0,title:"customer_visit"}},{path:"/report/Customer/customer_increments",name:"新增量统计",component:Ql,meta:{requireAuth:!0,title:"customer_increments"}},{path:"/System/auth_group",name:"权限角色",component:en,meta:{requireAuth:!0,title:"auth_group"}},{path:"/System/auth_rule",name:"权限规则",component:ln,meta:{requireAuth:!0,title:"auth_rule"}}]}]}),cn={options:[],activeIndex:"/sy",userInfo:""},dn={renderOptions:function(e){return e.options},renderActiveIndex:function(e){return e.activeIndex},renderUserInfo:function(e){return e.userInfo}},un={add_tabs:function(e,t){e.options.some(function(a,i){if(a.name==t.name)return e.options.splice(i,1),!0}),e.options.push(t)},delete_tabs:function(e,t){var a=0,i=!0,r=!1,s=void 0;try{for(var o,l=e.options[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var n=o.value;if(n.route===t)break;a++}}catch(c){r=!0,s=c}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}e.options.splice(a,1)},set_active_index:function(e,t){e.activeIndex=t},save_detail_info:function(e,t){e.userInfo=t}},pn={triggerAddTabs:function(e,t){e.commit("add_tabs",t)},triggerDeleteTabs:function(e,t){e.commit("delete_tabs",t)},triggerSetActiveIndex:function(e,t){e.commit("set_active_index",t)},triggerSaveDetailInfo:function(e,t){e.commit("save_detail_info",t)},triggerkeepAlive:function(e,t){e.commit("save_keepAlive",t)}},mn={namespaced:!0,state:cn,mutations:un,actions:pn,getters:dn},hn={id:"",userInfo:"/customerList",userInfo1:"/customerList",userInfo2:"/customerList",userInfo3:"/customerList"},fn={renderId:function(e){return e.id},renderUserInfo:function(e){return e.userInfo},renderUserInfo1:function(e){return e.userInfo1},renderUserInfo2:function(e){return e.userInfo2},renderUserInfo3:function(e){return e.userInfo3}},_n={replaceId:function(e,t){e.id=t},replaceUserInfo:function(e,t){e.userInfo=t},replaceUserInfo1:function(e,t){e.userInfo1=t},replaceUserInfo2:function(e,t){e.userInfo2=t},replaceUserInfo3:function(e,t){e.userInfo3=t}},gn={triggerReplaceId:function(e,t){e.commit("replaceId",t)},triggerReplaceUserInfo:function(e,t){e.commit("replaceUserInfo",t)},triggerReplaceUserInfo1:function(e,t){e.commit("replaceUserInfo1",t)},triggerReplaceUserInfo2:function(e,t){e.commit("replaceUserInfo2",t)},triggerReplaceUserInfo3:function(e,t){e.commit("replaceUserInfo3",t)}},bn={namespaced:!0,state:hn,mutations:_n,actions:gn,getters:fn};s["default"].use(C["a"]);var vn=new C["a"].Store({modules:{Tabs:mn,customerList:bn}}),yn=vn,xn=i("5c96"),kn=i.n(xn),wn=(i("0fae"),i("2b27")),Sn=i.n(wn),An=i("df45"),Cn=i.n(An),Fn=i("bc3a"),Pn=i.n(Fn),Dn=function(e,t){return Number(e).toFixed(t)},$n={toFixed:Dn};s["default"].config.productionTip=!1,s["default"].use(kn.a),s["default"].use(Sn.a),s["default"].use(Cn.a),s["default"].prototype.axios=Pn.a,Object.keys($n).forEach(function(e){s["default"].filter(e,$n[e])}),nn.beforeEach(function(e,t,a){e.matched.some(function(e){return e.meta.requireAuth})?Pn.a.get("/Index/Index").then(function(e){1e4==e.data.code?a({path:"/login"}):a()}):a()}),new s["default"]({router:nn,store:yn,render:function(e){return e(p)}}).$mount("#app")},5701:function(e,t,a){},"572f":function(e,t,a){},"58c0":function(e,t,a){"use strict";var i=a("9824"),r=a.n(i);r.a},"5acc":function(e,t,a){"use strict";var i=a("8be7"),r=a.n(i);r.a},"5c48":function(e,t,a){},"5c50":function(e,t,a){},"631b":function(e,t,a){"use strict";var i=a("4ed5"),r=a.n(i);r.a},6429:function(e,t,a){"use strict";var i=a("c1bd"),r=a.n(i);r.a},"65e8":function(e,t,a){},"686f":function(e,t,a){},"6c16":function(e,t,a){},7004:function(e,t,a){},"743a":function(e,t,a){"use strict";var i=a("941c"),r=a.n(i);r.a},"74a6":function(e,t,a){},7504:function(e,t,a){"use strict";var i=a("9a10"),r=a.n(i);r.a},"79c9":function(e,t,a){"use strict";var i=a("e320"),r=a.n(i);r.a},"7ac5":function(e,t,a){"use strict";var i=a("8b35"),r=a.n(i);r.a},"7c55":function(e,t,a){"use strict";var i=a("5c48"),r=a.n(i);r.a},"7f15":function(e,t,a){},8108:function(e,t,a){"use strict";var i=a("38f3"),r=a.n(i);r.a},"85f0":function(e,t,a){"use strict";var i=a("9ea5"),r=a.n(i);r.a},"894a":function(e,t,a){"use strict";var i=a("17d0"),r=a.n(i);r.a},"899a":function(e,t,a){},"8b35":function(e,t,a){},"8be7":function(e,t,a){},"8c5c":function(e,t,a){},"8ddb":function(e,t,a){"use strict";var i=a("6c16"),r=a.n(i);r.a},"8e7a":function(e,t,a){"use strict";var i=a("45da"),r=a.n(i);r.a},9121:function(e,t,a){},"941c":function(e,t,a){},9597:function(e,t,a){"use strict";var i=a("0a08"),r=a.n(i);r.a},9824:function(e,t,a){},9915:function(e,t,a){"use strict";var i=a("5443"),r=a.n(i);r.a},"9a10":function(e,t,a){},"9ac0":function(e,t,a){"use strict";var i=a("b26e"),r=a.n(i);r.a},"9c19":function(e,t,a){},"9da6":function(e,t,a){"use strict";var i=a("686f"),r=a.n(i);r.a},"9ea5":function(e,t,a){},"9f84":function(e,t,a){"use strict";var i=a("020e"),r=a.n(i);r.a},a05e:function(e,t,a){"use strict";var i=a("65e8"),r=a.n(i);r.a},a1d0:function(e,t,a){"use strict";var i=a("cea0"),r=a.n(i);r.a},a2e9:function(e,t,a){"use strict";var i=a("74a6"),r=a.n(i);r.a},a341:function(e,t,a){},a934:function(e,t,a){"use strict";var i=a("23ea"),r=a.n(i);r.a},a9cb:function(e,t,a){"use strict";var i=a("a341"),r=a.n(i);r.a},adaa:function(e,t,a){"use strict";var i=a("13fd"),r=a.n(i);r.a},b0f0:function(e,t,a){"use strict";var i=a("e7b0"),r=a.n(i);r.a},b26e:function(e,t,a){},b578:function(e,t,a){"use strict";var i=a("572f"),r=a.n(i);r.a},b6f7:function(e,t,a){},bcf0:function(e,t,a){"use strict";var i=a("bda8"),r=a.n(i);r.a},bd5e:function(e,t,a){"use strict";var i=a("c3e8"),r=a.n(i);r.a},bda8:function(e,t,a){},bedc:function(e,t,a){"use strict";var i=a("e81c"),r=a.n(i);r.a},bff8:function(e,t,a){},c02d:function(e,t,a){"use strict";var i=a("4b8c"),r=a.n(i);r.a},c1bd:function(e,t,a){},c3e8:function(e,t,a){},c8f0:function(e,t,a){},c8fc:function(e,t,a){"use strict";var i=a("899a"),r=a.n(i);r.a},c9a5:function(e,t,a){},c9f8:function(e,t,a){},ca5b:function(e,t,a){"use strict";var i=a("feba"),r=a.n(i);r.a},cb5a:function(e,t,a){"use strict";var i=a("db22"),r=a.n(i);r.a},cc95:function(e,t,a){},cdc6:function(e,t,a){},ce1d:function(e,t,a){"use strict";var i=a("e657"),r=a.n(i);r.a},ce20:function(e,t,a){"use strict";var i=a("c9f8"),r=a.n(i);r.a},ce2d:function(e,t,a){"use strict";var i=a("0e73"),r=a.n(i);r.a},cea0:function(e,t,a){},d471:function(e,t,a){"use strict";var i=a("0c7f"),r=a.n(i);r.a},db22:function(e,t,a){},e320:function(e,t,a){},e657:function(e,t,a){},e691:function(e,t,a){},e7b0:function(e,t,a){},e81c:function(e,t,a){},e9d0:function(e,t,a){"use strict";var i=a("7004"),r=a.n(i);r.a},eb65:function(e,t,a){"use strict";var i=a("0132"),r=a.n(i);r.a},ee51:function(e,t,a){"use strict";var i=a("cdc6"),r=a.n(i);r.a},f67c:function(e,t,a){},f9ee:function(e,t,a){e.exports=a.p+"img/kovi_logo.4896ba69.png"},faa4:function(e,t,a){},feba:function(e,t,a){},ffae:function(e,t,a){"use strict";var i=a("04c9"),r=a.n(i);r.a}});
//# sourceMappingURL=app.e1381d2f.js.map